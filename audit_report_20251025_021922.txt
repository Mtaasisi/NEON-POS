
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘               COMPREHENSIVE SYSTEM AUDIT - STARTING                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1ï¸âƒ£  DATABASE SCHEMA VALIDATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ Checking Core Tables...
              table_name               |   status    
---------------------------------------+-------------
 lats_branches                         | âš ï¸  OPTIONAL
 lats_brands                           | âš ï¸  OPTIONAL
 lats_categories                       | âš ï¸  OPTIONAL
 lats_customers                        | âš ï¸  OPTIONAL
 lats_employees                        | âš ï¸  OPTIONAL
 lats_inventory_adjustments            | âš ï¸  OPTIONAL
 lats_inventory_items                  | âš ï¸  OPTIONAL
 lats_pos_advanced_settings            | âš ï¸  OPTIONAL
 lats_pos_analytics_reporting_settings | âš ï¸  OPTIONAL
 lats_pos_barcode_scanner_settings     | âš ï¸  OPTIONAL
 lats_pos_delivery_settings            | âš ï¸  OPTIONAL
 lats_pos_dynamic_pricing_settings     | âš ï¸  OPTIONAL
 lats_pos_general_settings             | âš ï¸  OPTIONAL
 lats_pos_integrations_settings        | âš ï¸  OPTIONAL
 lats_pos_loyalty_customer_settings    | âš ï¸  OPTIONAL
 lats_pos_notification_settings        | âš ï¸  OPTIONAL
 lats_pos_receipt_settings             | âš ï¸  OPTIONAL
 lats_pos_search_filter_settings       | âš ï¸  OPTIONAL
 lats_pos_user_permissions_settings    | âš ï¸  OPTIONAL
 lats_product_units                    | âš ï¸  OPTIONAL
 lats_product_validation               | âš ï¸  OPTIONAL
 lats_product_variants                 | âœ… EXISTS
 lats_products                         | âœ… EXISTS
 lats_purchase_order_audit_log         | âš ï¸  OPTIONAL
 lats_purchase_order_items             | âœ… EXISTS
 lats_purchase_order_payments          | âš ï¸  OPTIONAL
 lats_purchase_orders                  | âœ… EXISTS
 lats_receipts                         | âš ï¸  OPTIONAL
 lats_sale_items                       | âš ï¸  OPTIONAL
 lats_sales                            | âš ï¸  OPTIONAL
 lats_shipping                         | âš ï¸  OPTIONAL
 lats_shipping_cargo_items             | âš ï¸  OPTIONAL
 lats_spare_part_usage                 | âš ï¸  OPTIONAL
 lats_spare_part_variants              | âš ï¸  OPTIONAL
 lats_spare_parts                      | âš ï¸  OPTIONAL
 lats_stock_movements                  | âœ… EXISTS
 lats_store_locations                  | âš ï¸  OPTIONAL
 lats_store_rooms                      | âš ï¸  OPTIONAL
 lats_store_shelves                    | âš ï¸  OPTIONAL
 lats_suppliers                        | âœ… EXISTS
 lats_trade_in_contracts               | âš ï¸  OPTIONAL
 lats_trade_in_damage_assessments      | âš ï¸  OPTIONAL
 lats_trade_in_prices                  | âš ï¸  OPTIONAL
 lats_trade_in_settings                | âš ï¸  OPTIONAL
 lats_trade_in_transactions            | âš ï¸  OPTIONAL
(45 rows)


ğŸ”— Checking Foreign Key Constraints...
        table_name         |                 constraint_name                  |      column_name       |    foreign_table_name     | foreign_column_name | status 
---------------------------+--------------------------------------------------+------------------------+---------------------------+---------------------+--------
 inventory_items           | inventory_items_branch_id_fkey                   | branch_id              | store_locations           | id                  | âœ…
 inventory_items           | inventory_items_product_id_fkey                  | product_id             | lats_products             | id                  | âœ…
 inventory_items           | inventory_items_purchase_order_id_fkey           | purchase_order_id      | lats_purchase_orders      | id                  | âœ…
 inventory_items           | inventory_items_purchase_order_item_id_fkey      | purchase_order_item_id | lats_purchase_order_items | id                  | âœ…
 inventory_items           | inventory_items_variant_id_fkey                  | variant_id             | lats_product_variants     | id                  | âœ…
 lats_product_variants     | lats_product_variants_branch_id_fkey             | branch_id              | store_locations           | id                  | âœ…
 lats_product_variants     | lats_product_variants_parent_variant_id_fkey     | parent_variant_id      | lats_product_variants     | id                  | âœ…
 lats_product_variants     | lats_product_variants_product_id_fkey            | product_id             | lats_products             | id                  | âœ…
 lats_purchase_order_items | lats_purchase_order_items_product_id_fkey        | product_id             | lats_products             | id                  | âœ…
 lats_purchase_order_items | lats_purchase_order_items_purchase_order_id_fkey | purchase_order_id      | lats_purchase_orders      | id                  | âœ…
 lats_purchase_order_items | lats_purchase_order_items_variant_id_fkey        | variant_id             | lats_product_variants     | id                  | âœ…
 lats_stock_movements      | lats_stock_movements_branch_id_fkey              | branch_id              | store_locations           | id                  | âœ…
 lats_stock_movements      | lats_stock_movements_from_branch_id_fkey         | from_branch_id         | store_locations           | id                  | âœ…
 lats_stock_movements      | lats_stock_movements_product_id_fkey             | product_id             | lats_products             | id                  | âœ…
 lats_stock_movements      | lats_stock_movements_to_branch_id_fkey           | to_branch_id           | store_locations           | id                  | âœ…
 lats_stock_movements      | lats_stock_movements_variant_id_fkey             | variant_id             | lats_product_variants     | id                  | âœ…
(16 rows)


ğŸ“Š Checking Critical Columns...
      table_name       |    column_name     |     data_type     | is_nullable |        column_default         | status 
-----------------------+--------------------+-------------------+-------------+-------------------------------+--------
 lats_product_variants | id                 | uuid              | NO          | gen_random_uuid()             | âœ…
 lats_product_variants | is_parent          | boolean           | YES         | false                         | âœ…
 lats_product_variants | parent_variant_id  | uuid              | YES         |                               | âœ…
 lats_product_variants | product_id         | uuid              | YES         |                               | âœ…
 lats_product_variants | quantity           | integer           | YES         | 0                             | âœ…
 lats_product_variants | variant_attributes | jsonb             | YES         | '{}'::jsonb                   | âœ…
 lats_product_variants | variant_type       | character varying | YES         | 'standard'::character varying | âœ…
(7 rows)


ğŸ” Checking Indexes...
 schemaname |       tablename       |               indexname               |                                                                                                                                                                                                             indexdef                                                                                                                                                                                                              | status 
------------+-----------------------+---------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------
 public     | inventory_items       | idx_inventory_items_variant_id        | CREATE INDEX idx_inventory_items_variant_id ON public.inventory_items USING btree (variant_id) WHERE (variant_id IS NOT NULL)                                                                                                                                                                                                                                                                                                     | âœ…
 public     | lats_product_variants | idx_lats_product_variants_branch_id   | CREATE INDEX idx_lats_product_variants_branch_id ON public.lats_product_variants USING btree (branch_id)                                                                                                                                                                                                                                                                                                                          | âœ…
 public     | lats_product_variants | idx_lats_product_variants_imei        | CREATE INDEX idx_lats_product_variants_imei ON public.lats_product_variants USING btree (((variant_attributes ->> 'imei'::text))) WHERE ((variant_attributes ->> 'imei'::text) IS NOT NULL)                                                                                                                                                                                                                                       | âœ…
 public     | lats_product_variants | idx_lats_product_variants_imei_status | CREATE INDEX idx_lats_product_variants_imei_status ON public.lats_product_variants USING btree (((variant_attributes ->> 'imei_status'::text))) WHERE ((variant_type)::text = 'imei_child'::text)                                                                                                                                                                                                                                 | âœ…
 public     | lats_product_variants | idx_lats_product_variants_is_shared   | CREATE INDEX idx_lats_product_variants_is_shared ON public.lats_product_variants USING btree (is_shared)                                                                                                                                                                                                                                                                                                                          | âœ…
 public     | lats_product_variants | idx_lats_product_variants_parent_id   | CREATE INDEX idx_lats_product_variants_parent_id ON public.lats_product_variants USING btree (parent_variant_id) WHERE (parent_variant_id IS NOT NULL)                                                                                                                                                                                                                                                                            | âœ…
 public     | lats_product_variants | idx_lats_product_variants_product     | CREATE INDEX idx_lats_product_variants_product ON public.lats_product_variants USING btree (product_id)                                                                                                                                                                                                                                                                                                                           | âœ…
 public     | lats_product_variants | idx_lats_product_variants_quantity    | CREATE INDEX idx_lats_product_variants_quantity ON public.lats_product_variants USING btree (product_id, quantity)                                                                                                                                                                                                                                                                                                                | âœ…
 public     | lats_product_variants | idx_unique_imei                       | CREATE UNIQUE INDEX idx_unique_imei ON public.lats_product_variants USING btree (((variant_attributes ->> 'imei'::text))) WHERE (((variant_type)::text = 'imei_child'::text) AND ((variant_attributes ->> 'imei'::text) IS NOT NULL) AND ((variant_attributes ->> 'imei'::text) <> ''::text) AND (((variant_attributes ->> 'imei_status'::text) IS NULL) OR ((variant_attributes ->> 'imei_status'::text) <> 'duplicate'::text))) | âœ…
 public     | lats_product_variants | idx_variant_attributes_imei           | CREATE INDEX idx_variant_attributes_imei ON public.lats_product_variants USING gin (variant_attributes)                                                                                                                                                                                                                                                                                                                           | âœ…
 public     | lats_product_variants | idx_variant_is_parent                 | CREATE INDEX idx_variant_is_parent ON public.lats_product_variants USING btree (is_parent) WHERE (is_parent = true)                                                                                                                                                                                                                                                                                                               | âœ…
 public     | lats_product_variants | idx_variant_parent_id                 | CREATE INDEX idx_variant_parent_id ON public.lats_product_variants USING btree (parent_variant_id) WHERE (parent_variant_id IS NOT NULL)                                                                                                                                                                                                                                                                                          | âœ…
 public     | lats_product_variants | idx_variant_type                      | CREATE INDEX idx_variant_type ON public.lats_product_variants USING btree (variant_type)                                                                                                                                                                                                                                                                                                                                          | âœ…
 public     | lats_product_variants | idx_variants_active                   | CREATE INDEX idx_variants_active ON public.lats_product_variants USING btree (is_active)                                                                                                                                                                                                                                                                                                                                          | âœ…
 public     | lats_product_variants | idx_variants_branch                   | CREATE INDEX idx_variants_branch ON public.lats_product_variants USING btree (branch_id)                                                                                                                                                                                                                                                                                                                                          | âœ…
 public     | lats_product_variants | idx_variants_is_shared                | CREATE INDEX idx_variants_is_shared ON public.lats_product_variants USING btree (is_shared)                                                                                                                                                                                                                                                                                                                                       | âœ…
 public     | lats_product_variants | idx_variants_parent_id                | CREATE INDEX idx_variants_parent_id ON public.lats_product_variants USING btree (parent_variant_id) WHERE (parent_variant_id IS NOT NULL)                                                                                                                                                                                                                                                                                         | âœ…
 public     | lats_product_variants | idx_variants_parent_type              | CREATE INDEX idx_variants_parent_type ON public.lats_product_variants USING btree (parent_variant_id, variant_type) WHERE ((variant_type)::text = 'imei'::text)                                                                                                                                                                                                                                                                   | âœ…
 public     | lats_product_variants | idx_variants_product                  | CREATE INDEX idx_variants_product ON public.lats_product_variants USING btree (product_id)                                                                                                                                                                                                                                                                                                                                        | âœ…
 public     | lats_product_variants | idx_variants_product_id               | CREATE INDEX idx_variants_product_id ON public.lats_product_variants USING btree (product_id)                                                                                                                                                                                                                                                                                                                                     | âœ…
 public     | lats_product_variants | idx_variants_sharing_mode             | CREATE INDEX idx_variants_sharing_mode ON public.lats_product_variants USING btree (sharing_mode)                                                                                                                                                                                                                                                                                                                                 | âœ…
 public     | lats_product_variants | idx_variants_sku                      | CREATE INDEX idx_variants_sku ON public.lats_product_variants USING btree (sku)                                                                                                                                                                                                                                                                                                                                                   | âœ…
 public     | lats_product_variants | idx_variants_type                     | CREATE INDEX idx_variants_type ON public.lats_product_variants USING btree (variant_type)                                                                                                                                                                                                                                                                                                                                         | âœ…
 public     | lats_product_variants | idx_variants_visible_branches         | CREATE INDEX idx_variants_visible_branches ON public.lats_product_variants USING gin (visible_to_branches)                                                                                                                                                                                                                                                                                                                        | âœ…
 public     | lats_product_variants | lats_product_variants_pkey            | CREATE UNIQUE INDEX lats_product_variants_pkey ON public.lats_product_variants USING btree (id)                                                                                                                                                                                                                                                                                                                                   | âœ…
 public     | lats_product_variants | lats_product_variants_sku_key         | CREATE UNIQUE INDEX lats_product_variants_sku_key ON public.lats_product_variants USING btree (sku)                                                                                                                                                                                                                                                                                                                               | âœ…
 public     | lats_product_variants | uniq_imei_index                       | CREATE UNIQUE INDEX uniq_imei_index ON public.lats_product_variants USING btree (((variant_attributes ->> 'imei'::text))) WHERE ((variant_attributes ->> 'imei'::text) IS NOT NULL)                                                                                                                                                                                                                                               | âœ…
(27 rows)


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
2ï¸âƒ£  IMEI SYSTEM VALIDATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“± Total Variant Types Distribution...
 variant_type | count | total_quantity 
--------------+-------+----------------
 imei_child   |    20 |             20
 standard     |    15 |             24
 parent       |     7 |              6
(3 rows)


ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Parent-Child Relationships...
              parent_id               |   parent_name   | parent_type | is_parent | parent_quantity | children_count | children_total_qty | stock_status 
--------------------------------------+-----------------+-------------+-----------+-----------------+----------------+--------------------+--------------
 2f7e2225-16bf-47e4-90c7-02cdc0a7b821 | 0000001         | standard    | f         |               0 |              0 |                  0 | âœ… MATCH
 538f073f-a88f-4f65-8507-d8964d0eea6d | 001             | standard    | f         |               0 |              0 |                  0 | âœ… MATCH
 36cbd0ac-f137-494b-a49a-eb44983ae05e | 128             | parent      | t         |               6 |              6 |                  6 | âœ… MATCH
 f5ac09b5-bcee-42a8-a0c4-ad44601ac40a | Default Variant | parent      | t         |               0 |              0 |                  0 | âœ… MATCH
 bce2dfbf-2f8c-4721-a903-1d8fdb55a617 | Default Variant | parent      | t         |               0 |              0 |                  0 | âœ… MATCH
 8141f888-e076-4c3c-b362-c8a07c48bff6 | Default Variant | parent      | t         |               0 |              0 |                  0 | âœ… MATCH
 3a07fb47-bb75-4976-bb04-7696a0f0a371 | Kibonge         | parent      | t         |               0 |              0 |                  0 | âœ… MATCH
 5c390e74-e2ed-4aa1-9bcc-46e1af810a1b | Mwembamba       | standard    | f         |               0 |              0 |                  0 | âœ… MATCH
 6f3e6f08-544a-46e5-8331-b9e89d4cdc7e | Variant 1       | standard    | f         |               3 |              3 |                  3 | âœ… MATCH
 2149be92-5081-433f-8389-d2f2eec1aff3 | Variant 1       | standard    | f         |               1 |              1 |                  1 | âœ… MATCH
 b255d9ee-0921-4841-821b-8182a83391e0 | Variant 1       | parent      | t         |               0 |              0 |                  0 | âœ… MATCH
 d1c2847d-6f9a-4e06-9f85-5efad2edeb58 | Variant 1       | parent      | t         |               0 |              0 |                  0 | âœ… MATCH
(12 rows)


ğŸ” Orphaned IMEI Children (No Parent)...
 id | name | parent_variant_id | variant_type | imei | status 
----+------+-------------------+--------------+------+--------
(0 rows)


ğŸ”„ Duplicate IMEI Detection...
 imei | duplicate_count | variant_ids | variant_names | status 
------+-----------------+-------------+---------------+--------
(0 rows)


âŒ Invalid IMEI Format (Not 15 Digits)...
 id | name | imei | imei_length | status 
----+------+------+-------------+--------
(0 rows)


ğŸ“Š IMEI Status Distribution...
 imei_status | count | total_quantity 
-------------+-------+----------------
             |    32 |             29
 invalid     |    23 |             21
 valid       |     2 |              2
 duplicate   |     1 |              0
(4 rows)


ğŸ·ï¸  IMEIs Without Status Set...
                  id                  |                           name                            |      imei       | status |    issue     
--------------------------------------+-----------------------------------------------------------+-----------------+--------+--------------
 e12e5a96-5c33-4cc6-b1bd-6e88de757524 | Variant 1 - IMEI: 544645654654666 - IMEI: 768787878788888 | 768787878788888 |        | âš ï¸  NO STATUS
 a42717bf-ff33-4d75-a5e9-c25dafd20f5b | IMEI: 675467865788888                                     | 675467865788888 |        | âš ï¸  NO STATUS
 ee87adad-7a17-4bad-a82e-436e9b6ba479 | IMEI: 123456765445654                                     | 123456765445654 |        | âš ï¸  NO STATUS
 63b94e65-fac6-44b2-9494-d45d72ddabef | IMEI: 765754754754757                                     | 765754754754757 |        | âš ï¸  NO STATUS
 3b49431f-397e-411b-b504-7508ec00be04 | IMEI: 123456789012345                                     | 123456789012345 |        | âš ï¸  NO STATUS
 e65a2bf1-1115-40be-9705-84afb91077a8 | IMEI: 123453456789567                                     | 123453456789567 |        | âš ï¸  NO STATUS
 2a33832e-ab85-4123-95dc-d9679ef86209 | IMEI: 234567345674564                                     | 234567345674564 |        | âš ï¸  NO STATUS
 0db1446d-0d63-4819-b28a-73f676c583eb | 128GB - IMEI: 435435435435444                             | 435435435435444 |        | âš ï¸  NO STATUS
 59de629f-688f-4392-bfa7-9736e336aae5 | IMEI: 234567890123456                                     | 234567890123456 |        | âš ï¸  NO STATUS
 9b23418b-ded7-43b9-bcc4-63d676dc6a7b | IMEI: 345678901234567                                     | 345678901234567 |        | âš ï¸  NO STATUS
(10 rows)


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
3ï¸âƒ£  DATA INTEGRITY CHECKS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  Negative Stock Quantities...
 id | name | sku | quantity | issue 
----+------+-----+----------+-------
(0 rows)


ğŸ”— Variants Without Product Reference...
 id | name | product_id | issue 
----+------+------------+-------
(0 rows)


ğŸ’° Variants With Invalid Prices...
                  id                  |      name       | cost_price | selling_price |       issue       
--------------------------------------+-----------------+------------+---------------+-------------------
 292e9204-0b3c-43c1-9c13-aef8d39e8d0f | Default Variant |     788.00 |          0.00 | âš ï¸  SELLING < COST
 4dd41d99-8887-4042-a6ca-328b8dc1dd65 | Default Variant |     788.00 |          0.00 | âš ï¸  SELLING < COST
 8b74ccbb-2308-4131-bdd3-033336eb26af | Variant 1       |       8777 |        780.00 | âš ï¸  SELLING < COST
(3 rows)


ğŸ“¦ Product Stock vs Variant Stock Mismatch...
 product_id | product_name | product_stock | variants_total_stock | difference | status 
------------+--------------+---------------+----------------------+------------+--------
(0 rows)


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
4ï¸âƒ£  TRIGGERS & FUNCTIONS VALIDATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš™ï¸  Active Triggers on Core Tables...
      table_name       |                 trigger_name                 | event  | timing | status 
-----------------------+----------------------------------------------+--------+--------+--------
 inventory_items       | inventory_items_updated_at                   | UPDATE | BEFORE | âœ…
 inventory_items       | trigger_sync_variant_quantity_delete         | DELETE | AFTER  | âœ…
 inventory_items       | trigger_sync_variant_quantity_insert_update  | INSERT | AFTER  | âœ…
 inventory_items       | trigger_sync_variant_quantity_insert_update  | UPDATE | AFTER  | âœ…
 lats_product_variants | ensure_imei_has_parent                       | INSERT | BEFORE | âœ…
 lats_product_variants | ensure_imei_has_parent                       | UPDATE | BEFORE | âœ…
 lats_product_variants | sync_product_stock_trigger                   | DELETE | AFTER  | âœ…
 lats_product_variants | sync_product_stock_trigger                   | INSERT | AFTER  | âœ…
 lats_product_variants | sync_product_stock_trigger                   | UPDATE | AFTER  | âœ…
 lats_product_variants | sync_variant_prices_trigger                  | INSERT | BEFORE | âœ…
 lats_product_variants | sync_variant_prices_trigger                  | UPDATE | BEFORE | âœ…
 lats_product_variants | trg_update_parent_quantity                   | DELETE | AFTER  | âœ…
 lats_product_variants | trg_update_parent_quantity                   | INSERT | AFTER  | âœ…
 lats_product_variants | trg_update_parent_quantity                   | UPDATE | AFTER  | âœ…
 lats_product_variants | trg_validate_and_set_imei_status             | INSERT | BEFORE | âœ…
 lats_product_variants | trg_validate_and_set_imei_status             | UPDATE | BEFORE | âœ…
 lats_product_variants | trg_validate_new_imei                        | INSERT | BEFORE | âœ…
 lats_product_variants | trg_validate_new_imei                        | UPDATE | BEFORE | âœ…
 lats_product_variants | trigger_auto_reorder                         | UPDATE | AFTER  | âœ…
 lats_product_variants | trigger_set_imei_status                      | INSERT | BEFORE | âœ…
 lats_product_variants | trigger_set_is_shared_variants               | INSERT | BEFORE | âœ…
 lats_product_variants | trigger_sync_product_stock_on_variant_delete | DELETE | AFTER  | âœ…
 lats_product_variants | trigger_sync_product_stock_on_variant_insert | INSERT | AFTER  | âœ…
 lats_product_variants | trigger_sync_product_stock_on_variant_update | UPDATE | AFTER  | âœ…
 lats_product_variants | trigger_update_parent_stock                  | DELETE | AFTER  | âœ…
 lats_product_variants | trigger_update_parent_stock                  | INSERT | AFTER  | âœ…
 lats_product_variants | trigger_update_parent_stock                  | UPDATE | AFTER  | âœ…
 lats_product_variants | trigger_update_product_totals                | DELETE | AFTER  | âœ…
 lats_product_variants | trigger_update_product_totals                | INSERT | AFTER  | âœ…
 lats_product_variants | trigger_update_product_totals                | UPDATE | AFTER  | âœ…
 lats_product_variants | update_variant_count_trigger                 | DELETE | AFTER  | âœ…
 lats_product_variants | update_variant_count_trigger                 | INSERT | AFTER  | âœ…
 lats_product_variants | update_variant_count_trigger                 | UPDATE | AFTER  | âœ…
 lats_product_variants | validate_variant_price_trigger               | INSERT | BEFORE | âœ…
 lats_product_variants | validate_variant_price_trigger               | UPDATE | BEFORE | âœ…
 lats_products         | trigger_set_is_shared_products               | INSERT | BEFORE | âœ…
 lats_products         | trigger_set_product_branch                   | INSERT | BEFORE | âœ…
 lats_products         | trigger_sync_product_category                | INSERT | BEFORE | âœ…
 lats_products         | trigger_sync_product_category                | UPDATE | BEFORE | âœ…
(39 rows)


ğŸ”§ Critical Functions Status...
           function_name           |                                                                                                                                                                arguments                                                                                                                                                                 |                                                                                    return_type                                                                                    | status 
-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------
 add_imei_to_parent_variant        | parent_variant_id_param uuid, imei_param text, serial_number_param text DEFAULT NULL::text, mac_address_param text DEFAULT NULL::text, cost_price_param numeric DEFAULT 0, selling_price_param numeric DEFAULT 0, condition_param text DEFAULT 'new'::text, branch_id_param uuid DEFAULT NULL::uuid, notes_param text DEFAULT NULL::text | TABLE(success boolean, child_variant_id uuid, error_message text)                                                                                                                 | âœ…
 get_available_imeis_for_pos       | parent_variant_id_param uuid                                                                                                                                                                                                                                                                                                             | TABLE(child_variant_id uuid, imei text, serial_number text, mac_address text, condition text, cost_price numeric, selling_price numeric, received_at timestamp without time zone) | âœ…
 mark_imei_as_sold                 | imei_param text, sale_reference text DEFAULT NULL::text                                                                                                                                                                                                                                                                                  | boolean                                                                                                                                                                           | âœ…
 mark_imei_as_sold                 | child_variant_id_param uuid, sale_id_param uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                       | boolean                                                                                                                                                                           | âœ…
 recalculate_all_parent_stocks     |                                                                                                                                                                                                                                                                                                                                          | TABLE(parent_id uuid, parent_name text, old_quantity integer, new_quantity integer, children_count integer)                                                                       | âœ…
 update_parent_stock_from_children |                                                                                                                                                                                                                                                                                                                                          | trigger                                                                                                                                                                           | âœ…
(6 rows)


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
5ï¸âƒ£  STOCK MOVEMENTS AUDIT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š Stock Movements by Type...
 movement_type | count | total_quantity 
---------------+-------+----------------
 purchase      |    32 |             32
 out           |    18 |             29
 transfer_in   |    16 |             16
 transfer_out  |    16 |            -16
 in            |     3 |              3
 trade_in      |     1 |              1
(6 rows)


âš ï¸  Stock Movements for Non-Existent Variants...
 id | variant_id | movement_type | quantity | issue 
----+------------+---------------+----------+-------
(0 rows)


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
6ï¸âƒ£  PURCHASE ORDERS VALIDATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¦ Recent Purchase Orders...
psql:COMPREHENSIVE_SYSTEM_AUDIT.sql:397: ERROR:  column poi.quantity does not exist
LINE 6:   SUM(poi.quantity) as total_quantity,
              ^

âš ï¸  PO Items Without Valid Variants...
psql:COMPREHENSIVE_SYSTEM_AUDIT.sql:412: ERROR:  column poi.quantity does not exist
LINE 5:   poi.quantity,
          ^

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
7ï¸âƒ£  SYSTEM SUMMARY STATISTICS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

          metric          |      value      | status 
--------------------------+-----------------+--------
 ğŸ“¦ Total Products        | 19              | âœ…
 ğŸ“Š Total Variants        | 42              | âœ…
 ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Parent Variants | 7               | âœ…
 ğŸ“± IMEI Children         | 20              | âœ…
 ğŸ’° Total Stock Value     |    1,214,600.00 | âœ…
 ğŸ“¦ Total Stock Units     | 40              | âœ…
 ğŸ”„ Stock Movements (30d) | 86              | âœ…
 ğŸ›’ Purchase Orders (30d) | 70              | âœ…
(8 rows)


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘               COMPREHENSIVE SYSTEM AUDIT - COMPLETED                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

