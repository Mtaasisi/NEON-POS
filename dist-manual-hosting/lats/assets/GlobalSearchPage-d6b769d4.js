import{u as e,b as r,a as t,j as s}from"./index-222cfb29.js";import{r as a}from"./vendor-a2ff445a.js";import{S as o,a as l}from"./SearchResults-b4708312.js";import{a as c,u as i}from"./routing-a2f0f6d2.js";import{bc as n,y as u,X as d}from"./ui-551a39a6.js";import"./supabase-7e851d02.js";import"./phoneUtils-1ba19aca.js";const x=()=>{const{currentUser:x}=e();let h=[];try{const e=r();h=(null==e?void 0:e.devices)||[]}catch(w){}const{customers:m}=t(),p=c(),b=i(),[g,f]=a.useState(""),[j,y]=a.useState("all"),[S,v]=a.useState([]);a.useEffect(()=>{const e=new URLSearchParams(b.search).get("q");e&&f(e)},[b.search]),a.useEffect(()=>{const e=localStorage.getItem("recentSearches");if(e)try{v(JSON.parse(e))}catch(w){}},[]);return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/30 via-white/50 to-purple-50/30",children:[s.jsx("div",{className:"bg-white/40 backdrop-blur-2xl border-b border-white/20 shadow-[0_8px_32px_0_rgba(31,38,135,0.07)] sticky top-0 z-10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-5",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>p(-1),className:"p-3 rounded-xl bg-white/50 hover:bg-white/70 transition-all duration-300 backdrop-blur-xl border border-white/30 shadow-[0_4px_16px_0_rgba(31,38,135,0.1)] hover:shadow-[0_8px_24px_0_rgba(31,38,135,0.15)]",children:s.jsx(n,{size:20,className:"text-gray-700 rotate-180"})}),s.jsx("div",{className:"flex-1 max-w-2xl",children:s.jsxs("form",{onSubmit:e=>{e.preventDefault(),g.trim()&&(e=>{if(!e.trim())return;const r=[e,...S.filter(r=>r!==e)].slice(0,10);v(r),localStorage.setItem("recentSearches",JSON.stringify(r))})(g)},className:"relative group",children:[s.jsx(u,{className:"absolute left-5 top-1/2 transform -translate-y-1/2 text-gray-400 group-focus-within:text-blue-500 transition-colors",size:20}),s.jsx("input",{type:"text",placeholder:"Search...",value:g,onChange:e=>f(e.target.value),className:"w-full pl-14 pr-14 py-4 rounded-2xl bg-white/60 border border-white/30 focus:outline-none focus:bg-white/80 focus:border-blue-400/50 focus:shadow-[0_8px_32px_0_rgba(59,130,246,0.15)] backdrop-blur-xl text-gray-800 placeholder-gray-400 transition-all duration-300",autoFocus:!0}),g&&s.jsx("button",{type:"button",onClick:()=>{f(""),p("/search")},className:"absolute right-5 top-1/2 transform -translate-y-1/2 p-1.5 rounded-full bg-gray-100/80 hover:bg-gray-200/80 backdrop-blur-sm transition-all duration-200",children:s.jsx(d,{size:16,className:"text-gray-500"})})]})})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-6 py-8",children:g?s.jsx(l,{query:g,filter:j,onFilterChange:y,userRole:x.role,devices:h,customers:m}):s.jsx(o,{recentSearches:S,onSearch:f,onRemoveSearch:e=>{const r=S.filter(r=>r!==e);v(r),localStorage.setItem("recentSearches",JSON.stringify(r))},userRole:x.role})})]})};export{x as default};
