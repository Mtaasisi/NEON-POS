import{a as e,j as t}from"./index-222cfb29.js";import{r as a}from"./vendor-a2ff445a.js";import{z as n}from"./ui-551a39a6.js";import{f as r,a as s}from"./phoneUtils-1ba19aca.js";import{u as l,S as o}from"./useSuccessModal-e8b7d685.js";import{S as i}from"./SuccessModalIcons-20b743c5.js";import{M as d,S as p,a as c,b as x,c as g,d as u}from"./MobileSheetContent-ad1cebdf.js";const m=({isOpen:m,onClose:h,onCustomerCreated:y,onAddAnother:f})=>{const{addCustomer:b}=e(),S=l(),[j,v]=a.useState(""),[C,w]=a.useState(""),[N,M]=a.useState(""),[A,z]=a.useState(""),[k,D]=a.useState(""),[W,F]=a.useState(""),[O,I]=a.useState(""),[T,B]=a.useState(""),[R,L]=a.useState(""),[G,J]=a.useState(!1),[K,P]=a.useState(!1),[q,E]=a.useState(!0);a.useEffect(()=>{q&&C&&!N&&M(C)},[C,q]),a.useEffect(()=>{m&&H()},[m]);const H=()=>{v(""),w(""),M(""),z(""),D(""),F(""),I(""),B(""),L(""),E(!0),P(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs(d,{isOpen:m,onClose:h,title:"Add Customer",subtitle:C?r(C):"New Customer",leftButtonText:"Cancel",rightButtonText:G?"Adding...":"Add",rightButtonDisabled:G||!j.trim()||!C.trim(),onRightButtonClick:async()=>{if(j.trim()?C.trim()||(n.error("Phone number is required"),0):(n.error("Customer name is required"),0))try{J(!0);const e={name:j.trim(),phone:r(C),email:"",gender:A||"male",city:k||"",whatsapp:q?s(N||C):"",referralSource:T||"",birthMonth:W||"",birthDay:O||"",notes:R?[{id:Date.now().toString(),content:R,createdAt:(new Date).toISOString(),createdBy:"system"}]:[],loyaltyLevel:"interested",colorTag:"new",referrals:[],totalSpent:0,points:0,lastVisit:(new Date).toISOString(),isActive:!0,devices:[]},t=await b(e);t&&(S.show(`${t.name} has been added to your customer list!`,{title:"Customer Added! ðŸŽ‰",icon:i.customerAdded,autoCloseDelay:0,actionButtons:[{label:"Add Another",onClick:()=>{S.hide(),H(),f&&f()},variant:"primary"},{label:"Done",onClick:()=>{S.hide(),h()},variant:"secondary"}]}),y&&y(t))}catch(e){n.error(e.message||"Failed to add customer")}finally{J(!1)}},children:[t.jsxs(p,{children:[t.jsx(c,{placeholder:"Customer name",value:j,onChange:v,autoFocus:!0}),t.jsx(c,{placeholder:"Phone number",value:C,onChange:w,type:"tel"}),t.jsx("div",{style:{padding:"14px 16px"},children:t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[t.jsx("input",{type:"tel",placeholder:"WhatsApp number",value:N,onChange:e=>M(e.target.value),disabled:!q,className:"flex-1 outline-none bg-transparent border-0 p-0 disabled:text-gray-400",style:{fontSize:"17px",fontWeight:"400",color:N?"#000000":"#C7C7CC",letterSpacing:"-0.41px"}}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[t.jsx("input",{type:"checkbox",checked:q,onChange:e=>E(e.target.checked),className:"w-4 h-4 text-blue-500 rounded"}),t.jsx("span",{className:"text-gray-500",style:{fontSize:"13px",fontWeight:"400",letterSpacing:"-0.08px"},children:"Same as phone"})]})]})})]}),t.jsx(x,{}),t.jsxs("div",{className:"border-t border-b border-gray-200",children:[t.jsx("div",{style:{padding:"14px 16px"},children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-gray-900",style:{fontSize:"17px",fontWeight:"400",letterSpacing:"-0.41px"},children:"Gender"}),t.jsx("span",{className:"text-gray-900 font-semibold",style:{fontSize:"17px",letterSpacing:"-0.41px"},children:"male"===A?"Male":"female"===A?"Female":"--"})]})}),t.jsx("div",{className:"border-t border-gray-200",style:{padding:"14px 16px"},children:t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{type:"button",onClick:()=>z("male"),className:"flex-1 rounded-lg font-medium transition-all "+("male"===A?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"),style:{fontSize:"15px",padding:"10px 16px",letterSpacing:"-0.24px"},children:"Male"}),t.jsx("button",{type:"button",onClick:()=>z("female"),className:"flex-1 rounded-lg font-medium transition-all "+("female"===A?"bg-blue-500 text-white":"bg-gray-100 text-gray-700"),style:{fontSize:"15px",padding:"10px 16px",letterSpacing:"-0.24px"},children:"Female"})]})})]}),t.jsx(x,{}),t.jsx(g,{title:"More options",subtitle:"Location, birthday, referral source",isOpen:K,onToggle:()=>P(!K),children:t.jsx("div",{style:{padding:"16px",paddingTop:"12px"},children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[t.jsxs("select",{value:k,onChange:e=>D(e.target.value),className:"w-full bg-gray-100 border-0 rounded-lg text-gray-900 outline-none",style:{fontSize:"15px",fontWeight:"400",padding:"12px 16px",letterSpacing:"-0.24px"},children:[t.jsx("option",{value:"",children:"City / Region"}),["Dar es Salaam","Arusha","Mwanza","Dodoma","Mbeya","Tanga","Morogoro","Iringa","Tabora","Kigoma","Mara","Kagera","Shinyanga","Singida","Rukwa","Ruvuma","Lindi","Mtwara","Pwani","Manyara","Geita","Simiyu","Katavi","Njombe","Songwe"].map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsxs("select",{value:W,onChange:e=>F(e.target.value),className:"flex-1 bg-gray-100 border-0 rounded-lg text-gray-900 outline-none",style:{fontSize:"15px",fontWeight:"400",padding:"12px 16px",letterSpacing:"-0.24px"},children:[t.jsx("option",{value:"",children:"Month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,a)=>t.jsx("option",{value:String(a+1),children:e},e))]}),t.jsxs("select",{value:O,onChange:e=>I(e.target.value),className:"bg-gray-100 border-0 rounded-lg text-gray-900 outline-none",style:{fontSize:"15px",fontWeight:"400",padding:"12px 16px",letterSpacing:"-0.24px",width:"96px"},children:[t.jsx("option",{value:"",children:"Day"}),Array.from({length:31},(e,t)=>t+1).map(e=>t.jsx("option",{value:String(e),children:e},e))]})]}),t.jsxs("select",{value:T,onChange:e=>B(e.target.value),className:"w-full bg-gray-100 border-0 rounded-lg text-gray-900 outline-none",style:{fontSize:"15px",fontWeight:"400",padding:"12px 16px",letterSpacing:"-0.24px"},children:[t.jsx("option",{value:"",children:"How did they find us?"}),["Walk-in","Facebook","Instagram","WhatsApp","Google","Friend Referral","Returning Customer","Advertisement","Other"].map(e=>t.jsx("option",{value:e,children:e},e))]}),t.jsx("textarea",{value:R,onChange:e=>L(e.target.value),placeholder:"Notes (Optional)",rows:3,className:"w-full bg-gray-100 border-0 rounded-lg placeholder-gray-400 outline-none resize-none",style:{fontSize:"15px",fontWeight:"400",padding:"12px 16px",letterSpacing:"-0.24px",color:R?"#000000":"#C7C7CC"}})]})})}),t.jsx(u,{})]}),t.jsx(o,{...S.props})]})};export{m as M};
