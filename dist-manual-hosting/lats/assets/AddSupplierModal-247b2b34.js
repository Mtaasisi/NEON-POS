import{c as e,j as a,d as s,G as r}from"./index-222cfb29.js";import{r as t}from"./vendor-a2ff445a.js";import{aC as l,X as n,Q as o,n as i}from"./ui-551a39a6.js";import{S as c}from"./purchaseOrderUtils-e0e1d78b.js";import{G as d}from"./GlassInput-ba5c3c0d.js";import{u as p}from"./useBodyScrollLock-0216d39f.js";const m=({isOpen:m,onClose:u,onSupplierCreated:h})=>{const{createSupplier:g}=e(),[x,y]=t.useState(!1),[v,j]=t.useState({name:"",company_name:"",contact_person:"",phone:"",email:"",address:"",city:"",country:"Tanzania",exchange_rates:"",currency:"TZS",description:"",whatsapp:"",notes:""}),b=(e,a)=>{j(s=>({...s,[e]:a}))};return p(m),m?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:u,children:a.jsx("div",{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:a.jsxs(s,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-orange-50 rounded-lg",children:a.jsx(l,{className:"w-6 h-6 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Add New Supplier"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Create a new supplier for purchase orders"})]})]}),a.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(n,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),v.name.trim())try{y(!0);const e={name:v.name,contact_person:v.contact_person||void 0,email:v.email||void 0,phone:v.phone||void 0,address:v.address||void 0,city:v.city||void 0,country:v.country||void 0,notes:v.notes||void 0,is_active:!0},a=await g(e);a.ok&&a.data?(i.success("Supplier added successfully!"),h(a.data),u(),j({name:"",company_name:"",contact_person:"",phone:"",email:"",address:"",city:"",country:"Tanzania",exchange_rates:"",currency:"TZS",description:"",whatsapp:"",notes:""})):i.error(a.message||"Failed to add supplier")}catch(a){i.error("Failed to add supplier")}finally{y(!1)}else i.error("Supplier name is required")},className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Basic Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(d,{label:"Supplier Name",placeholder:"Enter supplier name",value:v.name,onChange:e=>b("name",e.target.value),required:!0}),a.jsx(d,{label:"Company Name",placeholder:"Enter company name (optional)",value:v.company_name,onChange:e=>b("company_name",e.target.value)})]}),a.jsx(d,{label:"Contact Person",placeholder:"Enter contact person name",value:v.contact_person,onChange:e=>b("contact_person",e.target.value)}),a.jsx(d,{label:"Description",placeholder:"Enter supplier description (optional)",value:v.description,onChange:e=>b("description",e.target.value),multiline:!0,rows:2})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Contact Information"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(d,{label:"Phone Number",placeholder:"Enter phone number",type:"tel",value:v.phone,onChange:e=>b("phone",e.target.value)}),a.jsx(d,{label:"Email",placeholder:"Enter email address",value:v.email,onChange:e=>b("email",e.target.value),type:"email"})]}),a.jsx(d,{label:"WhatsApp",placeholder:"Enter WhatsApp number",type:"tel",value:v.whatsapp,onChange:e=>b("whatsapp",e.target.value),helperText:"WhatsApp number for quick communication"}),a.jsx(d,{label:"Address",placeholder:"Enter full address",value:v.address,onChange:e=>b("address",e.target.value)}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(d,{label:"City",placeholder:"Enter city",value:v.city,onChange:e=>b("city",e.target.value)}),a.jsx(d,{label:"Country",placeholder:"Enter country",value:v.country,onChange:e=>b("country",e.target.value)})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Business Terms"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange Rates"}),a.jsx("input",{type:"text",value:v.exchange_rates,onChange:e=>b("exchange_rates",e.target.value),placeholder:"Enter exchange rates (e.g., 1 USD = 150 KES)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Currency"}),a.jsx("select",{value:v.currency,onChange:e=>b("currency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:c.map(e=>a.jsxs("option",{value:e.code,children:[e.flag," ",e.code," - ",e.name]},e.code))})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Additional Information"}),a.jsx(d,{label:"Notes",placeholder:"Enter additional notes about this supplier",value:v.notes,onChange:e=>b("notes",e.target.value),multiline:!0,rows:2,helperText:"Any additional information about this supplier"})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:a.jsx(r,{type:"submit",disabled:x||!v.name.trim(),className:"w-full py-4 bg-orange-600 text-white hover:bg-orange-700 text-lg font-semibold",icon:x?void 0:a.jsx(o,{size:20}),children:x?"Adding...":"Add Supplier"})})]})]})})}):null};export{m as A};
