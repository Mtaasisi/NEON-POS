import{j as e,u as t,a as r,b as s,v as a,a1 as l,d as n}from"./index-222cfb29.js";import{r as i}from"./vendor-a2ff445a.js";import{r as o}from"./reminderApi-01c80b0e.js";import{B as d}from"./BackButton-e41d1482.js";import{az as c,Q as u,c as m,Z as x,u as g,f as p,R as b,n as h,am as f,e as y,y as v,X as j,ab as N,U as w,m as C,aT as k,$ as T,aL as S,aE as D}from"./ui-551a39a6.js";import{a as z}from"./routing-a2f0f6d2.js";import"./supabase-7e851d02.js";const L=({value:t,onChange:r,options:s,placeholder:a="Type to search...",label:l,required:n=!1,disabled:o=!1,createNew:d=!1,onCreateNew:m,fuzzyMatch:x=!0,showRecent:g=!0,recentKey:p,icon:b,error:h,helperText:f,maxSuggestions:y=10,className:v=""})=>{const[j,N]=i.useState(!1),[w,C]=i.useState(t),[k,T]=i.useState(-1),[S,D]=i.useState([]),z=i.useRef(null),L=i.useRef(null),I=i.useMemo(()=>s.map(e=>"string"==typeof e?{value:e,label:e,icon:void 0}:e),[s]);i.useEffect(()=>{if(g&&p){const e=localStorage.getItem(`recent_${p}`);e&&D(JSON.parse(e))}},[g,p]),i.useEffect(()=>{const e=I.find(e=>e.value===t);C(e?e.label:t)},[t,I]);const R=(e,t)=>{e=e.toLowerCase(),t=t.toLowerCase();let r=0,s=0;for(let a=0;a<t.length;a++)if(t[a]===e[s]&&(r+=e.length-s,s++,s===e.length))return r;return s===e.length?r:0},E=i.useMemo(()=>{if(!w.trim()){if(g&&S.length>0){const e=I.filter(e=>S.includes(e.value)),t=I.filter(e=>!S.includes(e.value)).slice(0,y-e.length);return[...e,...t]}return I.slice(0,y)}return x?I.map(e=>({...e,score:R(w,e.label)})).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).slice(0,y):I.filter(e=>e.label.toLowerCase().includes(w.toLowerCase())).slice(0,y)},[w,I,x,S,g,y]),O=e=>{if(g&&p){const t=[e,...S.filter(t=>t!==e)].slice(0,5);D(t),localStorage.setItem(`recent_${p}`,JSON.stringify(t))}},$=e=>{const t=I.find(t=>t.value===e);r(e),C(t?t.label:e),O(e),N(!1),T(-1)};i.useEffect(()=>{const e=e=>{var t;!L.current||L.current.contains(e.target)||(null==(t=z.current)?void 0:t.contains(e.target))||(N(!1),T(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),i.useEffect(()=>{if(k>=0&&L.current){const e=L.current.children[k];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[k]);const B=d&&w.trim()&&!E.some(e=>e.value.toLowerCase()===w.toLowerCase());return e.jsxs("div",{className:`relative ${v}`,children:[l&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[l,n&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:z,type:"text",value:w,onChange:e=>{C(e.target.value),N(!0),T(-1)},onFocus:()=>{C(""),N(!0)},onKeyDown:e=>{if(j||"Escape"===e.key)switch(e.key){case"ArrowDown":e.preventDefault(),T(e=>e<E.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),T(e=>e>0?e-1:-1);break;case"Enter":e.preventDefault(),k>=0&&k<E.length?$(E[k].value):d&&w.trim()&&m?(m(w.trim()),O(w.trim()),N(!1)):w.trim()&&(r(w.trim()),O(w.trim()),N(!1));break;case"Escape":e.preventDefault(),N(!1),T(-1);break;case"Tab":k>=0&&k<E.length?(e.preventDefault(),$(E[k].value)):N(!1)}else N(!0)},placeholder:a,disabled:o,required:n,className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${b?"pl-11":""} ${h?"border-red-500 focus:border-red-500":t?"border-green-500 focus:border-green-500 bg-green-50":"border-gray-200 focus:border-blue-500"} ${o?"bg-gray-100 cursor-not-allowed":"bg-white"}`,autoComplete:"off",autoCorrect:"off",spellCheck:!1}),b&&e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:b}),j&&!o&&e.jsx("div",{ref:L,className:"absolute z-[9999] w-full mt-1 bg-white border-2 border-gray-200 rounded-lg shadow-xl max-h-60 overflow-y-auto",children:0!==E.length||B?e.jsxs(e.Fragment,{children:[E.map((r,s)=>{const a=S.includes(r.value),l=s===k;return e.jsxs("button",{type:"button",onClick:()=>$(r.value),className:`w-full px-4 py-3 text-left flex items-center gap-3 transition-colors ${l?"bg-blue-50 text-blue-700":"hover:bg-gray-50"} ${0===s?"rounded-t-lg":""} ${s!==E.length-1||B?"":"rounded-b-lg"}`,children:[r.icon&&e.jsx("div",{className:"flex-shrink-0 text-gray-400",children:r.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:r.label}),a&&e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Recent)"})]}),t===r.value&&e.jsx(c,{size:16,className:"text-blue-600 flex-shrink-0"})]},r.value)}),B&&e.jsxs("button",{type:"button",onClick:()=>{m?m(w.trim()):r(w.trim()),O(w.trim()),N(!1)},className:`w-full px-4 py-3 text-left flex items-center gap-3 border-t-2 border-gray-100 transition-colors ${k===E.length?"bg-blue-50 text-blue-700":"hover:bg-gray-50"} rounded-b-lg`,children:[e.jsx(u,{size:16,className:"text-blue-600 flex-shrink-0"}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:['Create "',w.trim(),'"']})]})]}):e.jsx("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:"No matches found"})})]}),(h||f)&&e.jsx("p",{className:"mt-1 text-sm "+(h?"text-red-600":"text-gray-500"),children:h||f}),j&&!o&&e.jsxs("div",{className:"mt-1 text-xs text-gray-400 flex items-center gap-3",children:[e.jsx("span",{children:"↑↓ Navigate"}),e.jsx("span",{children:"Enter Select"}),e.jsx("span",{children:"Esc Close"}),B&&e.jsx("span",{children:"Tab Create"})]})]})},I=({actions:t,className:r=""})=>{const s=(e="secondary")=>{switch(e){case"primary":return"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100";case"success":return"bg-green-50 text-green-700 border-green-200 hover:bg-green-100";case"warning":return"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100";default:return"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100"}};return e.jsx("div",{className:`flex flex-wrap gap-2 ${r}`,children:t.map((t,r)=>e.jsxs("button",{type:"button",onClick:t.action,title:t.tooltip||t.label,className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium border-2 transition-all hover:shadow-sm ${s(t.variant)}`,children:[t.icon,e.jsx("span",{children:t.label})]},r))})},R=t=>({label:"Today + 7 Days",icon:e.jsx(g,{size:16}),action:t,variant:"success",tooltip:"Set date to 7 days from today"}),E=t=>({label:"In 1 Hour",icon:e.jsx(p,{size:16}),action:t,variant:"warning",tooltip:"Set time to 1 hour from now"}),O=t=>({label:"Reset",icon:e.jsx(b,{size:16}),action:t,variant:"secondary",tooltip:"Reset form to default values"});const $=e=>{const{key:t,data:r,enabled:s=!0,debounceMs:a=1e3,exclude:l=[]}=e,n=`form_draft_${t}`,o=i.useRef(!0),d=i.useCallback(e=>{const t={...e};return l.forEach(e=>{delete t[e]}),t},[l]),c=i.useCallback(e=>{if(s)try{const t={data:d(e),timestamp:(new Date).toISOString()};localStorage.setItem(n,JSON.stringify(t))}catch(t){}},[s,n,d]),u=i.useRef(function(e,t){let r=null;const s=function(...s){r&&clearTimeout(r),r=setTimeout(()=>{r=null,e(...s)},t)};return s.cancel=function(){r&&(clearTimeout(r),r=null)},s}(e=>c(e),a)).current,m=i.useCallback(()=>{try{localStorage.removeItem(n)}catch(e){}},[n]),x=i.useCallback(()=>{try{return null!==localStorage.getItem(n)}catch{return!1}},[n]),g=i.useCallback(()=>{try{const e=localStorage.getItem(n);if(!e)return null;const t=JSON.parse(e);return{data:t.data,timestamp:t.timestamp}}catch(e){return null}},[n]),p=i.useCallback(()=>{const e=g();if(!e)return null;const t=new Date(e.timestamp),r=(new Date).getTime()-t.getTime();return Math.floor(r/6e4)},[g]);return i.useEffect(()=>{if(o.current)return void(o.current=!1);if(!s||!r)return;Object.values(r).some(e=>"string"==typeof e?""!==e.trim():"number"==typeof e?0!==e:Array.isArray(e)?e.length>0:null!=e)&&u(r)},[r,s,u]),i.useEffect(()=>()=>{u.cancel()},[u]),{saveDraft:c,clearDraft:m,hasDraft:x,loadDraft:g,getDraftAge:p}},B=()=>{const e=new Date;return{today:e.toISOString().split("T")[0],tomorrow:new Date(e.getTime()+864e5).toISOString().split("T")[0],nextWeek:new Date(e.getTime()+6048e5).toISOString().split("T")[0],todayPlus7:new Date(e.getTime()+6048e5).toISOString().split("T")[0],todayPlus14:new Date(e.getTime()+12096e5).toISOString().split("T")[0],currentTime:e.toTimeString().slice(0,5),oneHourLater:new Date(e.getTime()+36e5).toTimeString().slice(0,5),twoHoursLater:new Date(e.getTime()+72e5).toTimeString().slice(0,5),nineAM:"09:00",fivePM:"17:00"}},M={reminderTimes:[{label:"In 15 minutes",value:15},{label:"In 30 minutes",value:30},{label:"In 1 hour",value:60},{label:"In 2 hours",value:120},{label:"In 1 day",value:1440}],deviceReturnDays:[{label:"Same day",value:0},{label:"3 days",value:3},{label:"1 week",value:7},{label:"2 weeks",value:14},{label:"1 month",value:30}],priorities:[{value:"low",label:"Low",color:"blue"},{value:"medium",label:"Medium",color:"orange"},{value:"high",label:"High",color:"red"}],employeePositions:["Technician","Senior Technician","Customer Care","Manager","Sales Representative","Administrator","Inventory Manager","Finance Officer"],deviceBrands:["Apple","Samsung","Huawei","Xiaomi","OnePlus","Google","Sony","LG","Motorola","Nokia","Oppo","Vivo","Realme","Tecno","Infinix"],commonIssues:["Screen Broken","Battery Issue","Charging Problem","Water Damage","Software Issue","Network Problem","Speaker Not Working","Microphone Not Working","Camera Issue","Power Button Stuck","Volume Button Not Working","WiFi Not Working","Bluetooth Issue","Overheating"]},A=e=>{const{formType:t,currentData:r}=e,s=B();switch(t){case"device":return{expectedReturnDate:s.todayPlus7,commonIssues:"Apple"===r.brand?["Screen Broken","Battery Issue","Camera Issue"]:M.commonIssues};case"reminder":return{date:s.today,time:s.oneHourLater,notifyBefore:15,priority:"medium"};case"customer":return{loyaltyLevel:"interested",colorTag:"new"};case"employee":return{hireDate:s.today,status:"active",performance:3,attendance:100};default:return{}}},F=()=>{z();const{currentUser:x}=t(),{customers:b}=r(),{devices:S}=s(),{currentBranch:D}=a(),[L,I]=i.useState([]),[R,E]=i.useState(!0),[O,$]=i.useState(!1),[B,M]=i.useState("all"),[A,F]=i.useState(""),[H,U]=i.useState(null);i.useEffect(()=>{D&&W()},[D]);const W=async()=>{try{E(!0);const e=await o.getReminders(null==D?void 0:D.id);I(e)}catch(e){h.error("Failed to load reminders")}finally{E(!1)}};l([{key:"n",meta:!0,action:()=>{U(null),$(!0)},description:"Create new reminder"},{key:"Escape",action:()=>{O&&$(!1)},description:"Close modal"}]);const q=i.useMemo(()=>L.filter(e=>{var t,r,s,a,l,n,i,o,d,c,u,m,x,g,p;let h=!1;if("all"===B)h=!0;else if("pending"===B)h="pending"===e.status;else if("completed"===B)h="completed"===e.status;else if("overdue"===B){const t=new Date,r=t.toISOString().split("T")[0],s=t.toTimeString().split(" ")[0].slice(0,5);h="pending"===e.status&&(e.date<r||e.date===r&&e.time<s)}let f=!0;if(A.trim()){const h=A.toLowerCase();let y=!1;if("customer"===(null==(t=e.relatedTo)?void 0:t.type)&&(null==(r=e.relatedTo)?void 0:r.id)){const t=b.find(t=>{var r;return t.id===(null==(r=e.relatedTo)?void 0:r.id)});t&&(y=t.name.toLowerCase().includes(h)||(null==(s=t.phone)?void 0:s.toLowerCase().includes(h))||!1||(null==(a=t.email)?void 0:a.toLowerCase().includes(h))||!1)}else if("device"===(null==(l=e.relatedTo)?void 0:l.type)&&(null==(n=e.relatedTo)?void 0:n.id)){const t=S.find(t=>{var r;return t.id===(null==(r=e.relatedTo)?void 0:r.id)});t&&(y=(null==(i=t.model)?void 0:i.toLowerCase().includes(h))||(null==(o=t.brand)?void 0:o.toLowerCase().includes(h))||!1||(null==(d=t.serialNumber)?void 0:d.toLowerCase().includes(h))||!1||(null==(c=t.imei)?void 0:c.toLowerCase().includes(h))||!1)}f=e.title.toLowerCase().includes(h)||(null==(u=e.description)?void 0:u.toLowerCase().includes(h))||!1||String(e.date).toLowerCase().includes(h)||String(e.time).toLowerCase().includes(h)||e.priority.toLowerCase().includes(h)||e.category.toLowerCase().includes(h)||e.status.toLowerCase().includes(h)||(null==(x=null==(m=e.relatedTo)?void 0:m.name)?void 0:x.toLowerCase().includes(h))||!1||(null==(p=null==(g=e.relatedTo)?void 0:g.type)?void 0:p.toLowerCase().includes(h))||!1||y}return h&&f}),[L,B,A,b,S]),_={total:L.length,pending:L.filter(e=>"pending"===e.status).length,completed:L.filter(e=>"completed"===e.status).length,overdue:L.filter(e=>{const t=new Date,r=t.toISOString().split("T")[0],s=t.toTimeString().split(" ")[0].slice(0,5);return"pending"===e.status&&(e.date<r||e.date===r&&e.time<s)}).length},J=e=>{switch(e){case"high":return"bg-red-100 text-red-700";case"medium":return"bg-orange-100 text-orange-700";case"low":return"bg-blue-100 text-blue-700";default:return"bg-gray-100 text-gray-700"}},G=e=>{switch(e){case"device":return"bg-purple-50 text-purple-700";case"customer":return"bg-blue-50 text-blue-700";case"appointment":return"bg-green-50 text-green-700";case"payment":return"bg-yellow-50 text-yellow-700";default:return"bg-gray-50 text-gray-700"}};return R?e.jsx("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#3498db]"}),e.jsx("span",{className:"ml-3 text-gray-600 font-medium",children:"Loading reminders..."})]})}):e.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(d,{to:"/dashboard"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reminders"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Smart reminder system with auto-complete and templates"})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{onClick:()=>{U(null),$(!0)},className:"flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(u,{size:18}),"New Reminder",e.jsx("span",{className:"hidden sm:inline text-xs opacity-75 ml-2",children:"⌘N"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-5 hover:bg-blue-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"w-7 h-7 text-blue-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.total})]})]})}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-5 hover:bg-orange-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"w-7 h-7 text-orange-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.pending})]})]})}),e.jsx("div",{className:"bg-red-50 rounded-lg p-5 hover:bg-red-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"w-7 h-7 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.overdue})]})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-5 hover:bg-green-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{className:"w-7 h-7 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.completed})]})]})})]}),e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 w-full md:w-auto min-w-[300px]",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search reminders by title, customer, device, category, priority...",value:A,onChange:e=>F(e.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),A&&e.jsx("button",{onClick:()=>F(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(j,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),e.jsx("div",{className:"flex rounded-full bg-gray-100 p-1 gap-1",children:["all","pending","overdue","completed"].map(t=>e.jsx("button",{onClick:()=>M(t),className:`px-3 py-1.5 text-sm font-medium rounded-full transition-colors ${(()=>{if(B!==t)return"text-gray-600 hover:text-gray-900";switch(t){case"all":return"bg-blue-500 text-white";case"pending":return"bg-amber-500 text-white";case"overdue":return"bg-red-500 text-white";case"completed":return"bg-green-500 text-white";default:return"bg-white text-gray-900 shadow-sm"}})()}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]})]})}),e.jsx(n,{className:"p-6",children:0===q.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No reminders found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"all"===B?"Create your first reminder to get started":`No ${B} reminders`}),e.jsxs("button",{onClick:()=>$(!0),className:"flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors mx-auto",children:[e.jsx(u,{size:18}),"Add Reminder"]})]}):e.jsx("div",{className:"space-y-3",children:q.map(t=>{const r="pending"===t.status&&(t.date<(new Date).toISOString().split("T")[0]||t.date===(new Date).toISOString().split("T")[0]&&t.time<(new Date).toTimeString().split(" ")[0].slice(0,5));return e.jsx("div",{className:"border-2 rounded-lg p-4 hover:border-gray-300 transition-colors "+("completed"===t.status?"bg-gray-50 border-gray-200":r?"bg-red-50 border-red-200":"bg-white border-gray-200"),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold "+("completed"===t.status?"text-gray-500 line-through":"text-gray-900"),children:t.title}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${J(t.priority)}`,children:t.priority}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${G(t.category)}`,children:t.category})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{size:14}),e.jsx("span",{children:new Date(t.date).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(p,{size:14}),e.jsx("span",{children:t.time})]}),r&&"pending"===t.status&&e.jsxs("span",{className:"text-red-600 font-medium flex items-center gap-1",children:[e.jsx(y,{size:14}),"Overdue"]})]}),t.relatedTo&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 text-sm",children:["customer"===t.relatedTo.type&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-blue-50 text-blue-700 rounded-md",children:[e.jsx(w,{size:14}),e.jsx("span",{className:"font-medium",children:t.relatedTo.name}),(()=>{const r=b.find(e=>{var r;return e.id===(null==(r=t.relatedTo)?void 0:r.id)});return(null==r?void 0:r.phone)?e.jsxs("span",{className:"text-blue-600",children:["• ",r.phone]}):null})()]}),"device"===t.relatedTo.type&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-purple-50 text-purple-700 rounded-md",children:[e.jsx(C,{size:14}),e.jsx("span",{className:"font-medium",children:t.relatedTo.name})]}),"appointment"===t.relatedTo.type&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-green-50 text-green-700 rounded-md",children:[e.jsx(g,{size:14}),e.jsx("span",{className:"font-medium",children:t.relatedTo.name})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:["pending"===t.status&&e.jsx("button",{onClick:()=>(async e=>{try{await o.completeReminder(e),h.success("Reminder completed!"),W()}catch(t){h.error("Failed to complete reminder")}})(t.id),className:"flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-green-600 text-white hover:bg-green-700 transition-colors",title:"Mark as complete",children:e.jsx(c,{size:13})}),e.jsx("button",{onClick:()=>(e=>{U({...e,id:"",status:"pending",title:`${e.title} (Copy)`}),$(!0)})(t),className:"flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors",title:"Duplicate",children:e.jsx(m,{size:13})}),e.jsx("button",{onClick:()=>{U(t),$(!0)},className:"flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-gray-600 text-white hover:bg-gray-700 transition-colors",title:"Edit",children:e.jsx(k,{size:13})}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this reminder?"))try{await o.deleteReminder(e),h.success("Reminder deleted"),W()}catch(t){h.error("Failed to delete reminder")}})(t.id),className:"flex items-center gap-1 px-3 py-1.5 rounded-md text-xs font-medium bg-red-600 text-white hover:bg-red-700 transition-colors",title:"Delete",children:e.jsx(T,{size:13})})]})]})},t.id)})})}),O&&e.jsx(P,{isOpen:O,onClose:()=>{$(!1),U(null)},onSuccess:()=>{$(!1),U(null),W()},reminder:H,currentUser:x,branchId:null==D?void 0:D.id})]})},P=({isOpen:t,onClose:a,onSuccess:n,reminder:d,currentUser:u,branchId:m})=>{var x,b,N,k,T,z,M,F,P,H,U,W,q;const{customers:_}=r(),{devices:J}=s(),G=B();i.useEffect(()=>{},[t]);const[K,V]=i.useState({title:"",description:"",date:"",time:"",priority:"medium",category:"general",notifyBefore:15,relatedTo:void 0,recurring:{enabled:!1,type:"daily",interval:1,endDate:void 0}}),[Q,X]=i.useState(!1),[Z,Y]=i.useState(!1),[ee,te]=i.useState(""),[re,se]=i.useState(!1),ae=i.useMemo(()=>{var e,t;const r=ee.toLowerCase().trim();return"customer"===(null==(e=K.relatedTo)?void 0:e.type)?_.filter(e=>{var t,s;return e.name.toLowerCase().includes(r)||(null==(t=e.email)?void 0:t.toLowerCase().includes(r))||(null==(s=e.phone)?void 0:s.toLowerCase().includes(r))}).slice(0,50):"device"===(null==(t=K.relatedTo)?void 0:t.type)?J.filter(e=>{var t,s,a;return(null==(t=e.model)?void 0:t.toLowerCase().includes(r))||(null==(s=e.serialNumber)?void 0:s.toLowerCase().includes(r))||(null==(a=e.brand)?void 0:a.toLowerCase().includes(r))}).slice(0,50):[]},[null==(x=K.relatedTo)?void 0:x.type,ee,_,J]),{clearDraft:le,hasDraft:ne,loadDraft:ie,getDraftAge:oe}=$({key:"enhanced_reminder",data:K,enabled:!d,debounceMs:1e3});i.useEffect(()=>{if(d)V({title:d.title,description:d.description||"",date:d.date,time:d.time,priority:d.priority,category:d.category,notifyBefore:d.notifyBefore||15,relatedTo:d.relatedTo,recurring:d.recurring||{enabled:!1,type:"daily",interval:1,endDate:void 0}});else{const e=A({formType:"reminder",currentData:{}});V({title:"",description:"",date:e.date,time:e.time,priority:e.priority,category:"general",notifyBefore:e.notifyBefore,relatedTo:void 0,recurring:{enabled:!1,type:"daily",interval:1,endDate:void 0}})}},[d]),l([{key:"s",meta:!0,action:e=>{e.preventDefault(),de(e)},description:"Save reminder"}]);const de=async e=>{if(e.preventDefault(),!re)if(K.title&&K.date&&K.time){se(!0);try{if(d)await o.updateReminder(d.id,K),h.success("Reminder updated successfully");else{if(!(null==u?void 0:u.id))return h.error("User not authenticated"),void se(!1);if(!m)return h.error("No branch selected"),void se(!1);if(!(await o.createReminder(K,u.id,m)))throw new Error("Failed to create reminder - no data returned");h.success("Reminder created successfully"),le()}n()}catch(t){const e=(null==t?void 0:t.message)||"Failed to save reminder";h.error(e)}finally{se(!1)}}else h.error("Please fill in all required fields")};return t?e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-[99999]",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[95vh] flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 p-6 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(f,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:d?"Edit Reminder":"Create New Reminder"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Smart reminder with autocomplete and templates"})]})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(j,{className:"w-6 h-6"})})]}),e.jsx(I,{actions:[E(()=>{V({...K,time:G.oneHourLater})}),R(()=>{V({...K,date:G.tomorrow})}),O(()=>{const e=A({formType:"reminder",currentData:{}});V({title:"",description:"",date:e.date,time:e.time,priority:e.priority,category:"general",notifyBefore:e.notifyBefore})})],className:"mb-4"}),e.jsxs("form",{onSubmit:de,className:"space-y-4",children:[e.jsx(L,{label:"Title",value:K.title,onChange:e=>V({...K,title:e}),options:["Follow up on device repair","Call customer about pickup","Check parts inventory","Team meeting","Send payment reminder"],placeholder:"Enter reminder title or create your own",required:!0,fuzzyMatch:!0,showRecent:!0,recentKey:"reminder_titles",createNew:!0,icon:e.jsx(f,{size:16})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"date",value:K.date,onChange:e=>V({...K,date:e.target.value}),className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"time",value:K.time,onChange:e=>V({...K,time:e.target.value}),className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>V({...K,priority:"low"}),className:"px-4 py-3 rounded-lg border-2 font-medium transition-all flex items-center justify-center gap-2 "+("low"===K.priority?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-blue-300"),children:[e.jsx("span",{className:"text-blue-600 text-xl",children:"◉"})," Low"]}),e.jsxs("button",{type:"button",onClick:()=>V({...K,priority:"medium"}),className:"px-4 py-3 rounded-lg border-2 font-medium transition-all flex items-center justify-center gap-2 "+("medium"===K.priority?"border-orange-500 bg-orange-50 text-orange-700":"border-gray-200 bg-white text-gray-700 hover:border-orange-300"),children:[e.jsx("span",{className:"text-orange-600 text-xl",children:"◉"})," Medium"]}),e.jsxs("button",{type:"button",onClick:()=>V({...K,priority:"high"}),className:"px-4 py-3 rounded-lg border-2 font-medium transition-all flex items-center justify-center gap-2 "+("high"===K.priority?"border-red-500 bg-red-50 text-red-700":"border-gray-200 bg-white text-gray-700 hover:border-red-300"),children:[e.jsx("span",{className:"text-red-600 text-xl",children:"◉"})," High"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(L,{label:"Category",value:K.category,onChange:e=>V({...K,category:e}),options:[{value:"general",label:"General",icon:e.jsx(f,{size:16})},{value:"device",label:"Device",icon:e.jsx(C,{size:16})},{value:"customer",label:"Customer",icon:e.jsx(w,{size:16})},{value:"appointment",label:"Appointment",icon:e.jsx(g,{size:16})},{value:"payment",label:"Payment",icon:e.jsx(p,{size:16})},{value:"other",label:"Other",icon:e.jsx(y,{size:16})}],placeholder:"Select category"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notify Before (minutes)"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"number",value:K.notifyBefore,onChange:e=>V({...K,notifyBefore:parseInt(e.target.value)}),placeholder:"15",min:"0",className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:K.description,onChange:e=>V({...K,description:e.target.value}),placeholder:"Enter description (optional)",rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900 resize-none"})]}),e.jsxs("div",{className:"border-t-2 border-gray-100 pt-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-3",children:"Advanced Options"}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("button",{type:"button",onClick:()=>X(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-lg border-2 transition-all "+((null==(b=K.recurring)?void 0:b.enabled)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:border-blue-400"),children:[e.jsx(S,{size:18}),e.jsx("span",{className:"font-medium",children:(null==(N=K.recurring)?void 0:N.enabled)?"Recurring: Enabled":"Add Recurring"})]}),e.jsxs("button",{type:"button",onClick:()=>Y(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-lg border-2 transition-all "+(K.relatedTo?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700 hover:border-green-400"),children:[e.jsx(D,{size:18}),e.jsx("span",{className:"font-medium",children:K.relatedTo?`Linked to ${K.relatedTo.type}`:"Link Entity"})]})]})]})]})]}),e.jsx("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:a,disabled:re,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed bg-white",children:"Cancel"}),e.jsx("button",{type:"button",onClick:de,disabled:re,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:re?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[d?"Update":"Create"," Reminder",e.jsx("span",{className:"text-xs opacity-75",children:"⌘S"})]})})]})})]}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{size:24}),e.jsx("h3",{className:"text-xl font-bold",children:"Recurring Options"})]}),e.jsx("button",{onClick:()=>X(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:e.jsx(j,{size:20})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("input",{type:"checkbox",id:"enableRecurringModal",checked:(null==(k=K.recurring)?void 0:k.enabled)||!1,onChange:e=>V({...K,recurring:{...K.recurring,enabled:e.target.checked}}),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"}),e.jsx("label",{htmlFor:"enableRecurringModal",className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Enable recurring reminder"})]}),(null==(T=K.recurring)?void 0:T.enabled)&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recurring Type"}),e.jsxs("select",{value:(null==(z=K.recurring)?void 0:z.type)||"daily",onChange:e=>V({...K,recurring:{...K.recurring,type:e.target.value}}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Repeat Every ","daily"===(null==(M=K.recurring)?void 0:M.type)?"days":"weekly"===(null==(F=K.recurring)?void 0:F.type)?"weeks":"months"]}),e.jsx("input",{type:"number",min:"1",value:(null==(P=K.recurring)?void 0:P.interval)||1,onChange:e=>V({...K,recurring:{...K.recurring,interval:parseInt(e.target.value)||1}}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date (Optional)"}),e.jsx("input",{type:"date",value:(null==(H=K.recurring)?void 0:H.endDate)||"",onChange:e=>V({...K,recurring:{...K.recurring,endDate:e.target.value||void 0}}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors"})]})]})]}),e.jsx("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-gray-200 bg-gray-50 rounded-b-2xl",children:e.jsx("button",{onClick:()=>X(!1),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Done"})})]})}),Z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-green-600 to-green-700 text-white p-6 rounded-t-2xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(D,{size:24}),e.jsx("h3",{className:"text-xl font-bold",children:"Link Entity"})]}),e.jsx("button",{onClick:()=>{Y(!1),te("")},className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:e.jsx(j,{size:20})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Link Type"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{V({...K,relatedTo:{type:"customer",id:"",name:""}}),te("")},className:"flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all "+("customer"===(null==(U=K.relatedTo)?void 0:U.type)?"border-green-500 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-600 hover:border-green-300"),children:[e.jsx(w,{size:20}),e.jsx("span",{className:"text-xs font-medium",children:"Customer"})]}),e.jsxs("button",{type:"button",onClick:()=>{V({...K,relatedTo:{type:"device",id:"",name:""}}),te("")},className:"flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all "+("device"===(null==(W=K.relatedTo)?void 0:W.type)?"border-green-500 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-600 hover:border-green-300"),children:[e.jsx(C,{size:20}),e.jsx("span",{className:"text-xs font-medium",children:"Device"})]}),e.jsxs("button",{type:"button",onClick:()=>{V({...K,relatedTo:{type:"appointment",id:"",name:""}}),te("")},className:"flex flex-col items-center gap-2 p-3 rounded-lg border-2 transition-all "+("appointment"===(null==(q=K.relatedTo)?void 0:q.type)?"border-green-500 bg-green-50 text-green-700":"border-gray-200 bg-white text-gray-600 hover:border-green-300"),children:[e.jsx(g,{size:20}),e.jsx("span",{className:"text-xs font-medium",children:"Appointment"})]})]})]}),K.relatedTo&&"appointment"!==K.relatedTo.type&&e.jsxs("div",{className:"animate-in fade-in duration-200 space-y-3",children:[!K.relatedTo.id&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:`Search ${"customer"===K.relatedTo.type?"customers":"devices"}...`,value:ee,onChange:e=>te(e.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-green-500 transition-colors"})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto border-2 border-gray-200 rounded-lg",children:ae.length>0?e.jsx("div",{className:"divide-y",children:ae.map(t=>e.jsxs("button",{type:"button",onClick:()=>{V({...K,relatedTo:{type:K.relatedTo.type,id:t.id,name:"customer"===K.relatedTo.type?t.name:`${t.brand||""} ${t.model||""}`.trim()}})},className:"w-full text-left p-3 hover:bg-green-50 transition-colors flex items-center gap-3 "+(K.relatedTo.id===t.id?"bg-green-50 border-l-4 border-green-500":""),children:["customer"===K.relatedTo.type?e.jsxs(e.Fragment,{children:[e.jsx(w,{size:18,className:"text-gray-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.name}),e.jsxs("div",{className:"text-sm text-gray-500 truncate",children:[t.phone&&e.jsx("span",{children:t.phone}),t.email&&e.jsx("span",{className:"ml-2",children:t.email})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{size:18,className:"text-gray-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[t.brand&&`${t.brand} `,t.model]}),e.jsx("div",{className:"text-sm text-gray-500 truncate",children:t.serialNumber&&e.jsxs("span",{children:["SN: ",t.serialNumber]})})]})]}),K.relatedTo.id===t.id&&e.jsx(c,{size:18,className:"text-green-600 flex-shrink-0"})]},t.id))}):e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsxs("div",{className:"mb-2",children:["No ","customer"===K.relatedTo.type?"customers":"devices"," found"]}),e.jsx("div",{className:"text-sm",children:"Try a different search term"})]})})]}),K.relatedTo.id&&e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"p-3 bg-green-50 border-2 border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{size:16,className:"text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Selected: ",K.relatedTo.name]})]}),e.jsx("button",{type:"button",onClick:()=>{V({...K,relatedTo:{type:K.relatedTo.type,id:"",name:""}}),te("")},className:"text-sm text-green-600 hover:text-green-700 font-medium underline",children:"Change"})]})})})]}),K.relatedTo&&"appointment"===K.relatedTo.type&&e.jsxs("div",{className:"animate-in fade-in duration-200",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 mb-2",children:[e.jsx(g,{size:16,className:"text-gray-600"}),"Appointment Title"]}),e.jsx("input",{type:"text",value:K.relatedTo.name,onChange:e=>V({...K,relatedTo:{...K.relatedTo,name:e.target.value}}),placeholder:"Enter appointment title",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-green-500 transition-colors"})]})]}),e.jsx("div",{className:"flex-shrink-0 p-6 pt-4 border-t border-gray-200 bg-gray-50 rounded-b-2xl",children:e.jsxs("div",{className:"flex gap-3",children:[K.relatedTo&&e.jsx("button",{onClick:()=>{V({...K,relatedTo:void 0}),te("")},className:"flex-1 px-4 py-3 border-2 border-red-200 text-red-600 rounded-lg font-medium hover:bg-red-50 transition-colors bg-white",children:"Remove Link"}),e.jsx("button",{onClick:()=>{Y(!1),te("")},className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Done"})]})})]})})]}):null};export{P as EnhancedReminderModal,F as default};
