import{s as e,j as s}from"./index-222cfb29.js";import{I as t,aP as a,f as n,b7 as i,A as r,d as l,s as o,a5 as c,aa as d,t as m,a4 as h,bR as x,K as u,k as g,av as p}from"./ui-551a39a6.js";const j=new class{constructor(){this.BASE_URL="https://api.green-api.com"}async getInstances(){try{const{data:s,error:t}=await e.from("whatsapp_instances").select("*").order("created_at",{ascending:!1});if(t)throw t;return s||[]}catch(s){return[]}}async getInstance(s){try{const{data:t,error:a}=await e.from("whatsapp_instances").select("*").eq("instance_id",s).single();if(a)throw a;return t}catch(t){return null}}async createTestInstance(){try{const{data:s,error:t}=await e.from("whatsapp_instances").insert({instance_id:"test-"+Date.now(),api_token:"test-token",is_active:!0}).select().single();if(t)throw t;return s}catch(s){throw s}}async checkInstanceConnection(e){try{const s=await this.getInstance(e);if(!s)return!1;const t=await fetch(`${this.BASE_URL}/waInstance${e}/getStateInstance/${s.api_token}`);if(!t.ok)return!1;return"authorized"===(await t.json()).stateInstance}catch(s){return!1}}async sendMessage(e){try{const{instanceId:s,apiToken:t,phoneNumber:a,message:n,quotedMessageId:i,linkPreview:r=!0,host:l}=e;let o=t;if(!o){const e=await this.getInstance(s);if(!e)return{success:!1,error:"Instance not found"};o=e.api_token}const c=`${l||this.BASE_URL}/waInstance${s}/sendMessage/${o}`,d={chatId:a.includes("@")?a:`${a}@c.us`,message:n,linkPreview:r};i&&(d.quotedMessageId=i);const m=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!m.ok){return{success:!1,error:(await m.json().catch(()=>({}))).message||m.statusText}}const h=await m.json();return{success:!0,messageId:h.idMessage,idMessage:h.idMessage}}catch(s){return{success:!1,error:s.message||"Failed to send message"}}}async getWaSettings(e,s,t){try{const a=t||this.BASE_URL,n=await fetch(`${a}/waInstance${e}/getWaSettings/${s}`);if(!n.ok)throw new Error(`Failed to get settings: ${n.statusText}`);return await n.json()}catch(a){throw a}}async getSettings(e,s,t){try{const a=t||this.BASE_URL,n=await fetch(`${a}/waInstance${e}/getSettings/${s}`);if(!n.ok)throw new Error(`Failed to get settings: ${n.statusText}`);return await n.json()}catch(a){throw a}}async setSettings(e,s,t,a){try{const n=a||this.BASE_URL,i=await fetch(`${n}/waInstance${e}/setSettings/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok)throw new Error(`Failed to set settings: ${i.statusText}`);return await i.json()}catch(n){throw n}}async logout(e,s,t){try{const a=t||this.BASE_URL,n=await fetch(`${a}/waInstance${e}/logout/${s}`);if(!n.ok)throw new Error(`Failed to logout: ${n.statusText}`);return await n.json()}catch(a){throw a}}async reboot(e,s,t){try{const a=t||this.BASE_URL,n=await fetch(`${a}/waInstance${e}/reboot/${s}`);if(!n.ok)throw new Error(`Failed to reboot: ${n.statusText}`);return await n.json()}catch(a){throw a}}async updateApiToken(s,t,a,n){try{const{error:n}=await e.from("whatsapp_instances").update({api_token:a,updated_at:(new Date).toISOString()}).eq("instance_id",s).eq("api_token",t);if(n)throw n;return{success:!0}}catch(i){throw i}}async setProfilePicture(e,s,t){try{const a=new FormData;a.append("file",t);const n=await fetch(`${this.BASE_URL}/waInstance${e}/setProfilePicture/${s}`,{method:"POST",body:a});if(!n.ok)throw new Error(`Failed to set profile picture: ${n.statusText}`);return await n.json()}catch(a){throw a}}async getAuthorizationCode(e,s,t,a){try{const n=a||this.BASE_URL,i=await fetch(`${n}/waInstance${e}/getAuthorizationCode/${s}?phoneNumber=${t}`);if(!i.ok)throw new Error(`Failed to get authorization code: ${i.statusText}`);return await i.json()}catch(n){throw n}}async diagnoseRLSIssues(){try{const s=[],{data:{user:t}}=await e.auth.getUser();t||s.push("No authenticated user");const{error:a}=await e.from("whatsapp_instances").select("count");return a&&s.push(`Database query error: ${a.message}`),{hasIssues:s.length>0,issues:s}}catch(s){return{hasIssues:!0,issues:[s.message||"Unknown error"]}}}};const b=new class{constructor(){this.BASE_URL="https://api.green-api.com"}async loadSettingsFromDatabase(s){try{const{data:t,error:a}=await e.from("whatsapp_instances").select("settings").eq("instance_id",s).single();if(a)throw a;return(null==t?void 0:t.settings)||null}catch(t){return null}}async saveSettingsToDatabase(s,t){try{const{error:a}=await e.from("whatsapp_instances").update({settings:t,updated_at:(new Date).toISOString()}).eq("instance_id",s);if(a)throw a}catch(a){throw a}}async getSettings(e,s){try{const t=await fetch(`${this.BASE_URL}/waInstance${e}/getSettings/${s}`);if(!t.ok)throw new Error(`Failed to get settings: ${t.statusText}`);return await t.json()}catch(t){throw t}}async setSettings(e,s,t){try{const a=await fetch(`${this.BASE_URL}/waInstance${e}/setSettings/${s}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error(`Failed to set settings: ${a.statusText}`)}catch(a){throw a}}async getStateInstance(e,s){try{const t=await fetch(`${this.BASE_URL}/waInstance${e}/getStateInstance/${s}`);if(!t.ok)throw new Error(`Failed to get state: ${t.statusText}`);return await t.json()}catch(t){throw t}}async rebootInstance(e,s){try{const t=await fetch(`${this.BASE_URL}/waInstance${e}/reboot/${s}`,{method:"GET"});if(!t.ok)throw new Error(`Failed to reboot instance: ${t.statusText}`)}catch(t){throw t}}async logoutInstance(e,s){try{const t=await fetch(`${this.BASE_URL}/waInstance${e}/logout/${s}`,{method:"GET"});if(!t.ok)throw new Error(`Failed to logout instance: ${t.statusText}`)}catch(t){throw t}}async getQRCode(e,s){try{const t=await fetch(`${this.BASE_URL}/waInstance${e}/qr/${s}`);if(!t.ok)throw new Error(`Failed to get QR code: ${t.statusText}`);return await t.json()}catch(t){throw t}}async getAuthorizationCode(e,s){try{const t=await fetch(`${this.BASE_URL}/waInstance${e}/getAuthorizationCode/${s}`);if(!t.ok)throw new Error(`Failed to get authorization code: ${t.statusText}`);return await t.json()}catch(t){throw t}}async updateApiToken(s,t,a){try{const{error:n}=await e.from("whatsapp_instances").update({api_token:a,updated_at:(new Date).toISOString()}).eq("instance_id",s).eq("api_token",t);if(n)throw n}catch(n){throw n}}validateSettings(e){const s=[];if(e.webhookUrl&&!this.isValidUrl(e.webhookUrl)&&s.push("Webhook URL is not valid"),e.delaySendMessagesMilliseconds){const t=Number(e.delaySendMessagesMilliseconds);(isNaN(t)||t<0||t>6e4)&&s.push("Delay must be between 0 and 60000 milliseconds")}return{isValid:0===s.length,errors:s}}getDefaultSettings(){return{webhookUrl:"",webhookUrlToken:"",delaySendMessagesMilliseconds:1e3,markIncomingMessagesReaded:"no",markIncomingMessagesReadedOnReply:"no",outgoingWebhook:"yes",outgoingMessageWebhook:"yes",outgoingAPIMessageWebhook:"yes",incomingWebhook:"yes",stateWebhook:"yes",incomingBlockWebhook:"yes",pollMessageWebhook:"no",keepOnlineStatus:"no"}}isValidUrl(e){try{return new URL(e),!0}catch{return!1}}},f=({settings:e,setSettings:r})=>{const l=(e,s)=>{r(t=>({...t,[e]:s}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(t,{className:"h-5 w-5 text-blue-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Instance Information"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WhatsApp ID"}),s.jsx("input",{type:"text",value:e.wid||"",onChange:e=>l("wid",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"e.g., 79876543210@c.us"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Your WhatsApp account ID"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country Instance"}),s.jsx("input",{type:"text",value:e.countryInstance||"",onChange:e=>l("countryInstance",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"e.g., US"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Country code for the instance"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Type"}),s.jsx("input",{type:"text",value:e.typeAccount||"",onChange:e=>l("typeAccount",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"e.g., personal"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Type of WhatsApp account"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(a,{className:"h-5 w-5 text-green-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Webhook Configuration"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL"}),s.jsx("input",{type:"url",value:e.webhookUrl||"",onChange:e=>l("webhookUrl",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"https://mysite.com/webhook/green-api/"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"URL for receiving incoming notifications. Leave empty for HTTP API technology."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook Token"}),s.jsx("input",{type:"password",value:e.webhookUrlToken||"",onChange:e=>l("webhookUrlToken",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"Secret token for webhook verification"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Authorization header for webhook verification"})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(n,{className:"h-5 w-5 text-purple-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Message Settings"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message Send Delay (milliseconds)"}),s.jsx("input",{type:"number",min:"0",max:"60000",value:e.delaySendMessagesMilliseconds||5e3,onChange:e=>l("delaySendMessagesMilliseconds",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"5000"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Delay between sending messages to avoid rate limiting (0-60000ms)"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mark Incoming Messages as Read"}),s.jsxs("select",{value:e.markIncomingMessagesReaded||"no",onChange:e=>l("markIncomingMessagesReaded",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",children:[s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically mark incoming messages as read"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mark Read on Reply"}),s.jsxs("select",{value:e.markIncomingMessagesReadedOnReply||"no",onChange:e=>l("markIncomingMessagesReadedOnReply",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",children:[s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mark messages as read when replying via API"})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(i,{className:"h-5 w-5 text-gray-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Status Settings"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keep Online Status"}),s.jsxs("select",{value:e.keepOnlineStatus||"no",onChange:e=>l("keepOnlineStatus",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",children:[s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Keep 'online' status when phone and linked devices are turned off"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Settings Information"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Webhook URL:"})," Required for receiving notifications about incoming messages and events"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Message Delay:"})," Helps avoid rate limiting when sending multiple messages"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Mark as Read:"})," Automatically marks incoming messages as read in WhatsApp"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Keep Online:"})," Maintains online status even when devices are offline"]})]})]})]})})]})},y=({settings:e,setSettings:n})=>{const i=(e,s)=>{n(t=>({...t,[e]:s}))},o=[{key:"outgoingWebhook",label:"Outgoing Message Status Webhooks",description:"Receive notifications about outgoing message statuses (sent, delivered, read)",icon:s.jsx(l,{size:16,className:"text-green-600"})},{key:"outgoingMessageWebhook",label:"Messages Sent from Phone",description:"Receive notifications about messages sent from your mobile phone",icon:s.jsx(l,{size:16,className:"text-blue-600"})},{key:"outgoingAPIMessageWebhook",label:"Messages Sent from API",description:"Receive notifications about messages sent via the API",icon:s.jsx(l,{size:16,className:"text-purple-600"})},{key:"incomingWebhook",label:"Incoming Messages & Files",description:"Receive notifications about incoming messages and file uploads",icon:s.jsx(l,{size:16,className:"text-orange-600"})},{key:"stateWebhook",label:"Instance State Changes",description:"Receive notifications when instance authorization state changes",icon:s.jsx(l,{size:16,className:"text-gray-600"})},{key:"pollMessageWebhook",label:"Poll Messages",description:"Receive notifications about polls and poll responses",icon:s.jsx(l,{size:16,className:"text-indigo-600"})},{key:"incomingBlockWebhook",label:"Incoming Chat Blocks",description:"Receive notifications about incoming chat blocks (temporarily disabled)",icon:s.jsx(r,{size:16,className:"text-red-600"})},{key:"incomingCallWebhook",label:"Incoming Calls",description:"Receive notifications about incoming calls",icon:s.jsx(l,{size:16,className:"text-teal-600"})},{key:"editedMessageWebhook",label:"Edited Messages",description:"Receive notifications about edited messages",icon:s.jsx(l,{size:16,className:"text-yellow-600"})},{key:"deletedMessageWebhook",label:"Deleted Messages",description:"Receive notifications about deleted messages",icon:s.jsx(l,{size:16,className:"text-red-600"})}],c=e.webhookUrl&&""!==e.webhookUrl.trim();return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(a,{className:"h-5 w-5 text-green-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Webhook URL Configuration"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL *"}),s.jsx("input",{type:"url",value:e.webhookUrl||"",onChange:e=>i("webhookUrl",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"https://your-domain.com/webhook/green-api/"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The URL where Green API will send webhook notifications"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook Token"}),s.jsx("input",{type:"password",value:e.webhookUrlToken||"",onChange:e=>i("webhookUrlToken",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"Optional secret token for webhook verification"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional secret token for webhook authentication"})]})]})]}),!c&&s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(r,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Webhook URL Required"}),s.jsx("p",{className:"text-sm text-yellow-800",children:"You need to configure a webhook URL to receive notifications. Without a webhook URL, you can only use HTTP API technology to poll for notifications."})]})]})}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(t,{className:"h-5 w-5 text-blue-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Webhook Notifications"})]}),s.jsx("div",{className:"space-y-4",children:o.map(t=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[t.icon,s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:t.label}),s.jsx("p",{className:"text-xs text-gray-600",children:t.description})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("select",{value:e[t.key]||"no",onChange:e=>i(t.key,e.target.value),disabled:!c,className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:border-green-500 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("option",{value:"yes",children:"Enabled"}),s.jsx("option",{value:"no",children:"Disabled"})]})})]},t.key))})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Webhook Configuration Guide"}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Required Setup:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Configure a webhook URL that can receive POST requests"}),s.jsx("li",{children:"Ensure your server can handle the webhook payload format"}),s.jsx("li",{children:"Set up proper authentication using the webhook token"}),s.jsx("li",{children:"Test webhook delivery to ensure reliability"})]}),s.jsx("p",{className:"mt-3",children:s.jsx("strong",{children:"Recommended Notifications:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Incoming Messages:"})," Essential for receiving messages"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Outgoing Status:"})," Track message delivery status"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"State Changes:"})," Monitor instance connection status"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Incoming Calls:"})," Handle call notifications"]})]}),s.jsxs("p",{className:"mt-3",children:[s.jsx("strong",{children:"Note:"})," Some webhook types are temporarily disabled by Green API. Check the Green API documentation for current status."]})]})]})]})}),c&&s.jsx("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(l,{className:"h-5 w-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Webhook URL Configured"}),s.jsxs("p",{className:"text-sm text-green-800",children:["Your webhook URL is configured. You can now enable the webhook notifications above. Make sure your server is ready to receive webhook notifications at:",s.jsx("code",{className:"block mt-1 p-2 bg-green-100 rounded text-xs font-mono",children:e.webhookUrl})]})]})]})})]})},N=({settings:e,setSettings:a})=>{const i=(e,s)=>{a(t=>({...t,[e]:s}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(n,{className:"h-5 w-5 text-purple-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Message Delivery Settings"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message Send Delay (milliseconds)"}),s.jsx("input",{type:"number",min:"0",max:"60000",step:"100",value:e.delaySendMessagesMilliseconds||5e3,onChange:e=>i("delaySendMessagesMilliseconds",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"5000"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Delay between sending messages to avoid rate limiting. Recommended: 1000-5000ms"})]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(o,{className:"h-5 w-5 text-blue-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Message Read Settings"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mark Incoming Messages as Read"}),s.jsxs("select",{value:e.markIncomingMessagesReaded||"no",onChange:e=>i("markIncomingMessagesReaded",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",children:[s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Automatically mark incoming messages as read in WhatsApp"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mark Read on Reply"}),s.jsxs("select",{value:e.markIncomingMessagesReadedOnReply||"no",onChange:e=>i("markIncomingMessagesReadedOnReply",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",children:[s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Mark messages as read when replying via API (overrides above setting)"})]})]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(t,{className:"h-5 w-5 text-green-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Message Status Tracking"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:[s.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Message Status Flow"}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Pending:"})," Message queued for sending"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Sending:"})," Message being sent to WhatsApp"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Sent:"})," Message delivered to WhatsApp servers"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Delivered:"})," Message delivered to recipient's device"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Read:"})," Message read by recipient"]})]})]})]})})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(r,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-yellow-900 mb-2",children:"Rate Limiting Guidelines"}),s.jsxs("div",{className:"text-sm text-yellow-800 space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"WhatsApp Business API Limits:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Maximum 1000 messages per day per phone number"}),s.jsx("li",{children:"Maximum 5 messages per second per phone number"}),s.jsx("li",{children:"Recommended delay: 1-5 seconds between messages"}),s.jsx("li",{children:"Bulk messaging: Use longer delays (5-10 seconds)"})]}),s.jsx("p",{className:"mt-3",children:s.jsx("strong",{children:"Best Practices:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Start with 5-second delays for new instances"}),s.jsx("li",{children:"Monitor delivery rates and adjust accordingly"}),s.jsx("li",{children:"Use webhooks to track message status"}),s.jsx("li",{children:"Implement retry logic for failed messages"})]})]})]})]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t,{className:"h-5 w-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Message Settings Tips"}),s.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Recommended Configuration:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Message Delay:"})," 3000-5000ms for normal use, 5000-10000ms for bulk messaging"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Mark as Read:"})," Enable for better user experience"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Mark Read on Reply:"})," Enable to automatically mark messages as read when responding"]})]}),s.jsx("p",{className:"mt-3",children:s.jsx("strong",{children:"Performance Optimization:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Use webhooks to track message delivery status"}),s.jsx("li",{children:"Implement message queuing for high-volume scenarios"}),s.jsx("li",{children:"Monitor delivery rates and adjust delays as needed"}),s.jsx("li",{children:"Use message templates for consistent formatting"})]})]})]})]})})]})},v=({settings:e,setSettings:t})=>{const n=(s,a)=>{t({...e,[s]:a})},i=[{key:"incomingMessage",label:"Incoming Messages",description:"Receive notifications for new incoming messages",icon:s.jsx(o,{size:16})},{key:"outgoingMessage",label:"Outgoing Messages",description:"Receive notifications when messages are sent",icon:s.jsx(o,{size:16})},{key:"messageStatus",label:"Message Status Updates",description:"Receive notifications for message delivery status changes",icon:s.jsx(c,{size:16})},{key:"instanceStatus",label:"Instance Status Changes",description:"Receive notifications when instance status changes",icon:s.jsx(d,{size:16})},{key:"webhookErrors",label:"Webhook Errors",description:"Receive notifications for webhook delivery failures",icon:s.jsx(a,{size:16})},{key:"connectionStatus",label:"Connection Status",description:"Receive notifications for connection status changes",icon:s.jsx(m,{size:16})}];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notification Events"}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Configure which events should trigger webhook notifications to your server."}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.map(t=>s.jsxs("div",{className:"flex items-start space-x-3 p-4 border border-gray-200 rounded-lg",children:[s.jsx("div",{className:"flex-shrink-0 mt-1",children:s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:t.icon})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"text-sm font-medium text-gray-900",children:t.label}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.description})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e[`notify_${t.key}`]||!1,onChange:e=>n(`notify_${t.key}`,e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})})]},t.key))})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notification Settings"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Retry Attempts"}),s.jsx("input",{type:"number",min:"0",max:"10",value:e.notification_retry_attempts||3,onChange:e=>n("notification_retry_attempts",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Number of times to retry failed webhook notifications"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Timeout (seconds)"}),s.jsx("input",{type:"number",min:"1",max:"60",value:e.notification_timeout||30,onChange:e=>n("notification_timeout",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Timeout for webhook notification requests"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.notification_include_metadata||!1,onChange:e=>n("notification_include_metadata",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Include Metadata"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Include additional metadata in notification payloads"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e.notification_compress_payload||!1,onChange:e=>n("notification_compress_payload",e.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Compress Payload"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Compress notification payloads to reduce bandwidth"})]})]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Notification Format"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Format"}),s.jsxs("select",{value:e.notification_format||"json",onChange:e=>n("notification_format",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"json",children:"JSON"}),s.jsx("option",{value:"xml",children:"XML"}),s.jsx("option",{value:"form",children:"Form Data"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Headers (JSON)"}),s.jsx("textarea",{value:e.notification_custom_headers||"{}",onChange:e=>n("notification_custom_headers",e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:'{"X-Custom-Header": "value"}'}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Additional headers to include with webhook notifications"})]})]})]})]})},w=({settings:e,setSettings:a})=>{const n=(e,s)=>{a(t=>({...t,[e]:s}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(h,{className:"h-5 w-5 text-red-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Authentication Methods"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(x,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:"QR Code Authentication"}),s.jsx("p",{className:"text-sm text-blue-800",children:"Scan a QR code with your WhatsApp mobile app to authenticate this instance. This is the most secure method for initial setup."})]})]})}),s.jsx("div",{className:"bg-green-50 border border-green-200 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(u,{className:"h-5 w-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-green-900 mb-1",children:"Authorization Code"}),s.jsx("p",{className:"text-sm text-green-800",children:"Use an authorization code from your WhatsApp mobile app to authenticate. This method is useful for re-authentication without scanning QR codes."})]})]})})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(g,{className:"h-5 w-5 text-purple-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"API Token Security"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(r,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-yellow-900 mb-1",children:"Security Best Practices"}),s.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[s.jsx("li",{children:"• Keep your API token secure and never share it publicly"}),s.jsx("li",{children:"• Regularly rotate your API token for enhanced security"}),s.jsx("li",{children:"• Use HTTPS for all API communications"}),s.jsx("li",{children:"• Monitor API usage for suspicious activity"})]})]})]})}),s.jsx("div",{className:"bg-red-50 border border-red-200 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(r,{className:"h-5 w-5 text-red-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-red-900 mb-1",children:"Important Security Notes"}),s.jsxs("ul",{className:"text-sm text-red-800 space-y-1",children:[s.jsx("li",{children:"• Never expose your API token in client-side code"}),s.jsx("li",{children:"• Store tokens securely in environment variables"}),s.jsx("li",{children:"• Implement proper access controls for your webhook endpoints"}),s.jsx("li",{children:"• Regularly audit your instance access and permissions"})]})]})]})})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(h,{className:"h-5 w-5 text-indigo-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Webhook Security"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook Token"}),s.jsx("input",{type:"password",value:e.webhookUrlToken||"",onChange:e=>n("webhookUrlToken",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",placeholder:"Enter webhook verification token"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This token will be included in webhook requests for verification"})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:"Webhook Token Usage"}),s.jsx("p",{className:"text-sm text-blue-800",children:"When you set a webhook token, Green API will include it in the Authorization header of all webhook requests. Verify this token in your webhook handler to ensure requests are coming from Green API."})]})]})})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(g,{className:"h-5 w-5 text-gray-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Session Security"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Shared Session"}),s.jsxs("select",{value:e.sharedSession||"no",onChange:e=>n("sharedSession",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",children:[s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Allow multiple instances to share the same WhatsApp session (deprecated)"})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(r,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-yellow-900 mb-1",children:"Session Security Warning"}),s.jsx("p",{className:"text-sm text-yellow-800",children:"The shared session feature is deprecated and may cause security issues. It's recommended to keep this setting disabled and use separate instances for different applications."})]})]})})]})]}),s.jsx("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t,{className:"h-5 w-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Security Recommendations"}),s.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Authentication:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Use QR code authentication for initial setup"}),s.jsx("li",{children:"Keep authorization codes secure and temporary"}),s.jsx("li",{children:"Regularly re-authenticate instances for security"})]}),s.jsx("p",{className:"mt-3",children:s.jsx("strong",{children:"API Security:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Rotate API tokens regularly (every 30-90 days)"}),s.jsx("li",{children:"Use environment variables for token storage"}),s.jsx("li",{children:"Implement rate limiting on your API endpoints"}),s.jsx("li",{children:"Monitor API usage for unusual patterns"})]}),s.jsx("p",{className:"mt-3",children:s.jsx("strong",{children:"Webhook Security:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Always use HTTPS for webhook URLs"}),s.jsx("li",{children:"Implement webhook token verification"}),s.jsx("li",{children:"Validate webhook payload signatures"}),s.jsx("li",{children:"Set up proper error handling for webhook failures"})]})]})]})]})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(h,{className:"h-5 w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Security Checklist"}),s.jsx("div",{className:"text-sm text-blue-800 space-y-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",className:"rounded"}),s.jsx("span",{children:"API token is stored securely (not in code)"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",className:"rounded"}),s.jsx("span",{children:"Webhook URL uses HTTPS"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",className:"rounded"}),s.jsx("span",{children:"Webhook token is configured"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",className:"rounded"}),s.jsx("span",{children:"Instance is properly authenticated"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",className:"rounded"}),s.jsx("span",{children:"Access logs are being monitored"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",className:"rounded"}),s.jsx("span",{children:"Backup authentication method is available"})]})]})})]})]})})]})},k=({settings:e,setSettings:a})=>{const i=(e,s)=>{a(t=>({...t,[e]:s}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(p,{className:"h-5 w-5 text-gray-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Instance Status"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:[s.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Instance States"}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"authorized:"})," Instance is connected and ready to send/receive messages"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"notAuthorized:"})," Instance is not authenticated, needs QR code or auth code"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"blocked:"})," Instance is blocked, may need to re-authenticate"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-gray-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"sleepMode:"})," Instance is in sleep mode to save resources"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsxs("span",{children:[s.jsx("strong",{children:"starting:"})," Instance is starting up"]})]})]})]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(l,{className:"h-5 w-5 text-green-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Online Status"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Keep Online Status"}),s.jsxs("select",{value:e.keepOnlineStatus||"no",onChange:e=>i("keepOnlineStatus",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",children:[s.jsx("option",{value:"yes",children:"Yes"}),s.jsx("option",{value:"no",children:"No"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Keep 'online' status even when phone and linked devices are turned off"})]}),s.jsx("div",{className:"bg-green-50 border border-green-200 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t,{className:"h-5 w-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-green-900 mb-1",children:"Online Status Benefits"}),s.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[s.jsx("li",{children:"• Maintains 'Online' status in WhatsApp"}),s.jsx("li",{children:"• Ensures message status shows as 'delivered'"}),s.jsx("li",{children:"• Improves message delivery reliability"}),s.jsx("li",{children:"• Better user experience for recipients"})]})]})]})})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(p,{className:"h-5 w-5 text-purple-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Monitoring Settings"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Change Notifications"}),s.jsxs("select",{value:e.stateWebhook||"no",onChange:e=>i("stateWebhook",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",children:[s.jsx("option",{value:"yes",children:"Enabled"}),s.jsx("option",{value:"no",children:"Disabled"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get notified when instance state changes"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Status Notifications"}),s.jsxs("select",{value:e.deviceWebhook||"no",onChange:e=>i("deviceWebhook",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:border-green-500 focus:outline-none",disabled:!0,children:[s.jsx("option",{value:"yes",children:"Enabled"}),s.jsx("option",{value:"no",children:"Disabled"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get device and battery level notifications (temporarily disabled)"})]})]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(n,{className:"h-5 w-5 text-blue-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Health Monitoring"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:[s.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Monitoring Best Practices"}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Regular Health Checks:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Monitor instance state every 5-10 minutes"}),s.jsx("li",{children:"Check message delivery rates"}),s.jsx("li",{children:"Monitor webhook delivery success"}),s.jsx("li",{children:"Track API response times"})]}),s.jsx("p",{className:"mt-3",children:s.jsx("strong",{children:"Alert Thresholds:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsxs("li",{children:["Alert if instance state is not 'authorized' for ",">","5 minutes"]}),s.jsx("li",{children:"Alert if message delivery rate drops below 95%"}),s.jsxs("li",{children:["Alert if webhook delivery fails ",">","3 times"]}),s.jsx("li",{children:"Alert if API response time exceeds 10 seconds"})]})]})]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(p,{className:"h-5 w-5 text-orange-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Performance Optimization"})]}),s.jsx("div",{className:"space-y-4",children:s.jsx("div",{className:"bg-orange-50 border border-orange-200 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(t,{className:"h-5 w-5 text-orange-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-orange-900 mb-1",children:"Performance Tips"}),s.jsxs("ul",{className:"text-sm text-orange-800 space-y-1",children:[s.jsx("li",{children:"• Keep online status enabled for better delivery rates"}),s.jsx("li",{children:"• Monitor instance state changes to detect issues early"}),s.jsx("li",{children:"• Use appropriate message delays to avoid rate limiting"}),s.jsx("li",{children:"• Implement retry logic for failed operations"}),s.jsx("li",{children:"• Monitor webhook delivery to ensure notifications are received"})]})]})]})})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(r,{className:"h-5 w-5 text-red-600"}),s.jsx("h4",{className:"font-medium text-gray-900",children:"Troubleshooting"})]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 p-3 rounded-lg",children:[s.jsx("h5",{className:"font-medium text-red-900 mb-2",children:"Common Issues & Solutions"}),s.jsxs("div",{className:"text-sm text-red-800 space-y-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Instance not authorized:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Scan QR code or use authorization code"}),s.jsx("li",{children:"Check if phone is connected to internet"}),s.jsx("li",{children:"Ensure WhatsApp is active on the phone"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Messages not delivering:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Check instance state is 'authorized'"}),s.jsx("li",{children:"Verify recipient phone numbers are correct"}),s.jsx("li",{children:"Ensure message content follows WhatsApp guidelines"}),s.jsx("li",{children:"Check rate limiting settings"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Webhooks not receiving:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Verify webhook URL is accessible"}),s.jsx("li",{children:"Check webhook token configuration"}),s.jsx("li",{children:"Ensure server can handle POST requests"}),s.jsx("li",{children:"Monitor webhook delivery logs"})]})]})]})]})})]}),s.jsx("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(l,{className:"h-5 w-5 text-green-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Status Monitoring Summary"}),s.jsxs("div",{className:"text-sm text-green-800 space-y-2",children:[s.jsx("p",{children:s.jsx("strong",{children:"Key Metrics to Monitor:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Instance State:"})," Should be 'authorized' for normal operation"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Message Delivery Rate:"})," Should be ",">","95% for good performance"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Webhook Delivery:"})," Monitor for failed webhook notifications"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"API Response Time:"})," Should be ","<","5 seconds for good performance"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Online Status:"})," Keep enabled for better delivery rates"]})]}),s.jsx("p",{className:"mt-3",children:s.jsx("strong",{children:"Recommended Actions:"})}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[s.jsx("li",{children:"Set up automated monitoring for instance state changes"}),s.jsx("li",{children:"Implement alerting for critical issues"}),s.jsx("li",{children:"Regularly review performance metrics"}),s.jsx("li",{children:"Keep backup authentication methods ready"})]})]})]})]})})]})};export{f as G,N as M,v as N,w as S,y as W,j as a,k as b,b as g};
