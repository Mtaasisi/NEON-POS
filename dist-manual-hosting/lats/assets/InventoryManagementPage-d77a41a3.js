import{aL as e,a5 as t,aE as a,j as s,G as r,d as i,R as o,P as n,Q as l,s as c,u as d}from"./index-222cfb29.js";import{r as u}from"./vendor-a2ff445a.js";import{a as x,c as p}from"./routing-a2f0f6d2.js";import{P as g}from"./PageErrorBoundary-d0d559c5.js";import{P as h}from"./PageHeader-9450e930.js";import{S as m}from"./SearchBar-2b6f451f.js";import{cr as y,b as j,ao as b,cq as f,Q as v,r as N,$ as w,T as C,ac as S,ad as _,x as k,d as F,h as E,n as P,v as B,ct as z,t as M,P as D,j as A,l as L,aa as T,X as R,aX as I,a5 as $,az as U,Z as q,ca as H,ce as O,aV as W,bl as G,bY as K,bZ as Z,bU as Q,bm as Y,bT as J,aW as V,c0 as X,J as ee,c3 as te,c4 as ae,aZ as se,cb as re,c8 as ie,c7 as oe,c5 as ne,c6 as le,a4 as ce,cd as de,cc as ue,c9 as xe,cv as pe,b_ as ge,q as he,S as me,aR as ye,b9 as je,c1 as be,cw as fe,aM as ve,Y as Ne,aC as we}from"./ui-551a39a6.js";import{C as Ce}from"./CategoryFormModal-788e39ee.js";import{S as Se}from"./SuppliersTab-a9a4cdaf.js";import _e from"./StorageRoomManagementPage-8c3f1fee.js";import"./supabase-7e851d02.js";import"./forms-fd94c8fb.js";import"./zod-4c7d126c.js";import"./GlassInput-ba5c3c0d.js";import"./utils-fb833cf6.js";import"./charts-66cc82bb.js";import"./GlassSelect-3b56e5f5.js";import"./GlassBadge-18f019e2.js";import"./useBodyScrollLock-0216d39f.js";import"./SupplierForm-e7ec71ff.js";import"./SupplierDetailsModal-8b57c375.js";import"./storeShelfApi-d8b142f6.js";import"./storeLocationApi-de3f7bfa.js";import"./BackButton-e41d1482.js";const ke=({category:e,level:t,onEditCategory:a,onDeleteCategory:r,onAddSubcategory:i,selectedCategoryId:o,onSelectCategory:n})=>{const[l,c]=u.useState(!1),d=e.children&&e.children.length>0,x=o===e.id;return s.jsxs("div",{className:"w-full",children:[s.jsxs("div",{className:`\n          flex items-center gap-2 p-2 rounded-md transition-colors cursor-pointer group\n          ${x?"bg-blue-50 border border-blue-200":"hover:bg-gray-50 border border-transparent"}\n        `,style:{paddingLeft:20*t+12+"px"},children:[d?s.jsx("button",{onClick:()=>{d&&c(!l)},className:"p-1 hover:bg-gray-200 rounded transition-colors",children:l?s.jsx(j,{size:16,className:"text-gray-600"}):s.jsx(b,{size:16,className:"text-gray-600"})}):s.jsx("div",{className:"w-6"}),s.jsx("div",{className:"w-6 h-6 rounded flex items-center justify-center",style:{backgroundColor:e.color||"#3B82F6"},children:l?s.jsx(f,{size:14,className:"text-white"}):s.jsx(y,{size:14,className:"text-white"})}),s.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>{null==n||n(e)},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-gray-900 truncate",children:e.name}),!e.is_active&&s.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded",children:"Inactive"})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-600 truncate",children:e.description})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>i(e.id),className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Add subcategory",children:s.jsx(v,{size:14})}),s.jsx("button",{onClick:()=>a(e),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit category",children:s.jsx(N,{size:14})}),s.jsx("button",{onClick:()=>r(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete category",children:s.jsx(w,{size:14})})]})]}),l&&d&&s.jsx("div",{className:"w-full",children:e.children.map(e=>s.jsx(ke,{category:e,level:t+1,onEditCategory:a,onDeleteCategory:r,onAddSubcategory:i,selectedCategoryId:o,onSelectCategory:n},e.id))})]})},Fe=({categories:e,onEditCategory:t,onDeleteCategory:a,onAddSubcategory:r,selectedCategoryId:i,onSelectCategory:o})=>{const n=(e=>{const t=new Map,a=[];return e.forEach(e=>{t.set(e.id,{...e,children:[]})}),e.forEach(e=>{if(e.parent_id){const a=t.get(e.parent_id);a&&(a.children=a.children||[],a.children.push(t.get(e.id)))}else a.push(t.get(e.id))}),a})(e);return 0===n.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(y,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No categories found"}),s.jsx("p",{className:"text-gray-600",children:"Get started by adding your first category"})]}):s.jsx("div",{className:"w-full space-y-1",children:n.map(e=>s.jsx(ke,{category:e,level:0,onEditCategory:t,onDeleteCategory:a,onAddSubcategory:r,selectedCategoryId:i,onSelectCategory:o},e.id))})},Ee=()=>{const{categories:c,loading:d,refreshCategories:x}=((s={})=>{const{activeOnly:r=!0,searchQuery:i="",autoFetch:o=!0}=s,[n,l]=u.useState([]),[c,d]=u.useState(!1),[x,p]=u.useState(null),g=async()=>{try{let s;d(!0),p(null),s=i?await e(i):r?await t():await a(),l(s)}catch(s){p(s instanceof Error?s.message:"Failed to fetch categories")}finally{d(!1)}};return u.useEffect(()=>{o&&g()},[r,i,o]),{categories:n,loading:c,error:x,refetch:async()=>{await g()},search:async t=>{try{d(!0),p(null);const a=await e(t);l(a)}catch(a){p(a instanceof Error?a.message:"Failed to search categories")}finally{d(!1)}}}})(),[p,g]=u.useState([]),[h,y]=u.useState(""),[j,b]=u.useState(!1),[f,B]=u.useState(null),[z,M]=u.useState(!1),[D,A]=u.useState("tree"),[L,T]=u.useState();u.useEffect(()=>{let e=c||[];h&&(e=e.filter(e=>{var t;return e.name.toLowerCase().includes(h.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(h.toLowerCase()))})),g(e)},[c,h]);const R=()=>{B(null),b(!0)},I=e=>{const t={...e,parentId:e.parent_id,isActive:e.is_active,sortOrder:e.sort_order,createdAt:e.created_at,updatedAt:e.updated_at};B(t),b(!0)},$=async e=>{if(confirm("Are you sure you want to delete this category?"))try{await o(e),P.success("Category deleted successfully"),x()}catch(t){P.error(t.message||"Failed to delete category")}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(C,{className:"w-6 h-6 text-green-600"}),"Category Management"]}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Organize products into categories (",p.length," categories)"]})]}),s.jsx(r,{onClick:R,icon:s.jsx(v,{size:18}),className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:"Add Category"})]}),s.jsx(i,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[s.jsx("div",{className:"flex-1",children:s.jsx(m,{placeholder:"Search categories...",onSearch:y})}),s.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>A("tree"),className:"p-2 rounded-md transition-colors "+("tree"===D?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"),title:"Tree view",children:s.jsx(S,{size:18})}),s.jsx("button",{onClick:()=>A("grid"),className:"p-2 rounded-md transition-colors "+("grid"===D?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"),title:"Grid view",children:s.jsx(_,{size:18})})]})]})}),s.jsx(i,{className:"p-6",children:d?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):0===p.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(k,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No categories found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:h?"Try adjusting your search":"Get started by adding your first category"}),!h&&s.jsx(r,{onClick:R,icon:s.jsx(v,{size:18}),className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:"Add First Category"})]}):"tree"===D?s.jsx(Fe,{categories:p,onEditCategory:I,onDeleteCategory:$,onAddSubcategory:e=>{null==c||c.find(t=>t.id===e),B(null);B({id:void 0,name:"",description:"",parent_id:e,color:"#3B82F6",icon:"",is_active:!0,sort_order:0,created_at:"",updated_at:"",parentId:e,isActive:!0,sortOrder:0,createdAt:"",updatedAt:""}),b(!0)},selectedCategoryId:L,onSelectCategory:e=>{T(e.id)}}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>{var t;return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:e.color||"#3B82F6"},children:s.jsx(C,{className:"w-4 h-4 text-white"})}),s.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.is_active?s.jsx(F,{className:"w-4 h-4 text-green-500"}):s.jsx(E,{className:"w-4 h-4 text-red-500"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>I(e),className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Edit category",children:s.jsx(N,{size:16})}),s.jsx("button",{onClick:()=>$(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete category",children:s.jsx(w,{size:16})})]})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[void 0!==e.product_count&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-medium",children:"Products:"}),s.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:e.product_count})]}),e.parent_id&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-medium",children:"Parent:"}),s.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:(null==(t=null==c?void 0:c.find(t=>t.id===e.parent_id))?void 0:t.name)||"Unknown"})]})]})]},e.id)})})}),s.jsx(Ce,{isOpen:j,onClose:()=>b(!1),onSubmit:async e=>{try{M(!0),f&&f.id?(await n(f.id,e),P.success("Category updated successfully")):(await l(e),P.success("Category created successfully")),b(!1),x()}catch(t){P.error(t.message||(f?"Failed to update category":"Failed to create category"))}finally{M(!1)}},parentCategories:(null==c?void 0:c.filter(e=>!e.parent_id))||[],loading:z,editingCategory:f})]})},Pe=()=>{const[e,t]=u.useState([]),[a,o]=u.useState([]),[n,l]=u.useState(!1),[c,d]=u.useState(""),[x,p]=u.useState(!1),[g,h]=u.useState(null),[y,j]=u.useState(!1),[b,f]=u.useState({name:"",description:"",address:"",city:"",country:"",phone:"",email:"",manager:"",opening_hours:"",is_main_branch:!1});u.useEffect(()=>{l(!0),setTimeout(()=>{t([{id:"1",name:"Main Branch - Nairobi",description:"Primary store location in Nairobi CBD",address:"123 Kimathi Street",city:"Nairobi",country:"Kenya",phone:"+254700123456",email:"nairobi@store.com",manager:"Jane Smith",opening_hours:"Mon-Fri: 8AM-6PM, Sat: 9AM-4PM",is_active:!0,is_main_branch:!0,created_at:"2024-01-01",updated_at:"2024-01-01"}]),l(!1)},1e3)},[]),u.useEffect(()=>{let t=e;c&&(t=t.filter(e=>{var t;return e.name.toLowerCase().includes(c.toLowerCase())||(null==(t=e.description)?void 0:t.toLowerCase().includes(c.toLowerCase()))||e.city.toLowerCase().includes(c.toLowerCase())})),o(t)},[e,c]);const C=()=>{h(null),f({name:"",description:"",address:"",city:"",country:"",phone:"",email:"",manager:"",opening_hours:"",is_main_branch:!1}),p(!0)},S=(e,t)=>{f(a=>({...a,[e]:t}))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[s.jsx(B,{className:"w-6 h-6 text-orange-600"}),"Store Locations"]}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage store locations and branches (",a.length," locations)"]})]}),s.jsx(r,{onClick:C,icon:s.jsx(v,{size:18}),className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:"Add Location"})]}),s.jsx(i,{className:"p-4",children:s.jsx(m,{placeholder:"Search store locations...",onSearch:d})}),s.jsx(i,{className:"p-6",children:n?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):0===a.length?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No store locations found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:c?"Try adjusting your search":"Get started by adding your first store location"}),!c&&s.jsx(r,{onClick:C,icon:s.jsx(v,{size:18}),className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:"Add First Location"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(e=>s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(B,{className:"w-5 h-5 text-orange-600"}),s.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),e.is_active?s.jsx(F,{className:"w-4 h-4 text-green-500"}):s.jsx(E,{className:"w-4 h-4 text-red-500"}),e.is_main_branch&&s.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:"Main"})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>(e=>{h(e),f({name:e.name,description:e.description||"",address:e.address,city:e.city,country:e.country,phone:e.phone||"",email:e.email||"",manager:e.manager||"",opening_hours:e.opening_hours||"",is_main_branch:e.is_main_branch}),p(!0)})(e),className:"p-1 text-gray-400 hover:text-orange-600 transition-colors",title:"Edit location",children:s.jsx(N,{size:16})}),s.jsx("button",{onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this store location?"))try{t(t=>t.filter(t=>t.id!==e)),P.success("Store location deleted successfully")}catch(a){P.error("Failed to delete store location")}})(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete location",children:s.jsx(w,{size:16})})]})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),s.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(B,{className:"w-3 h-3"}),s.jsxs("span",{children:[e.address,", ",e.city,", ",e.country]})]}),e.manager&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(M,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Manager:"}),s.jsx("span",{children:e.manager})]}),e.phone&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(D,{className:"w-3 h-3"}),s.jsx("a",{href:`tel:${e.phone}`,className:"text-blue-600 hover:underline",children:e.phone})]}),e.email&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(A,{className:"w-3 h-3"}),s.jsx("a",{href:`mailto:${e.email}`,className:"text-blue-600 hover:underline",children:e.email})]})]})]},e.id))})}),x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:g?"Edit Store Location":"Add New Store Location"}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),j(!0);try{if(g)t(e=>e.map(e=>e.id===g.id?{...e,...b}:e)),P.success("Store location updated successfully");else{const e={id:Date.now().toString(),...b,is_active:!0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};t(t=>[...t,e]),P.success("Store location created successfully")}p(!1)}catch(a){P.error(g?"Failed to update store location":"Failed to create store location")}finally{j(!1)}},className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Name *"}),s.jsx("input",{type:"text",value:b.name,onChange:e=>S("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),s.jsx("input",{type:"text",value:b.address,onChange:e=>S("address",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),s.jsxs("select",{value:b.city,onChange:e=>S("city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Select city"}),[{value:"Nairobi",label:"Nairobi"},{value:"Mombasa",label:"Mombasa"},{value:"Kisumu",label:"Kisumu"},{value:"Other",label:"Other"}].map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),s.jsxs("select",{value:b.country,onChange:e=>S("country",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Select country"}),[{value:"Kenya",label:"Kenya"},{value:"Tanzania",label:"Tanzania"},{value:"Uganda",label:"Uganda"},{value:"Other",label:"Other"}].map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"is_main_branch",checked:b.is_main_branch,onChange:e=>S("is_main_branch",e.target.checked),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),s.jsx("label",{htmlFor:"is_main_branch",className:"text-sm font-medium text-gray-700",children:"Main Branch"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx(r,{type:"submit",disabled:y,className:"flex-1 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:y?"Saving...":g?"Update Location":"Add Location"}),s.jsx(r,{type:"button",onClick:()=>p(!1),variant:"secondary",className:"flex-1",children:"Cancel"})]})]})]})})})]})};const Be=new class{async getCategories(){try{const{data:e,error:t}=await c.from("lats_specification_categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(t)throw new Error(`Failed to fetch categories: ${t.message}`);return e||[]}catch(e){throw e}}async getCategoryById(e){try{const{data:t,error:a}=await c.from("lats_specification_categories").select("*").eq("id",e).single();return a?null:t}catch(t){return null}}async getCategoryByCategoryId(e){try{const{data:t,error:a}=await c.from("lats_specification_categories").select("*").eq("category_id",e).single();return a?null:t}catch(t){return null}}async createCategory(e){try{const{data:t,error:a}=await c.from("lats_specification_categories").insert([e]).select().single();if(a)throw new Error(`Failed to create category: ${a.message}`);return P.success("Category created successfully!"),t}catch(t){throw P.error("Failed to create category"),t}}async updateCategory(e,t){try{const{data:a,error:s}=await c.from("lats_specification_categories").update(t).eq("id",e).select().single();if(s)throw new Error(`Failed to update category: ${s.message}`);return P.success("Category updated successfully!"),a}catch(a){throw P.error("Failed to update category"),a}}async deleteCategory(e){try{const{error:t}=await c.from("lats_specification_categories").delete().eq("id",e);if(t)throw new Error(`Failed to delete category: ${t.message}`);P.success("Category deleted successfully!")}catch(t){throw P.error("Failed to delete category"),t}}async getSpecificationsByCategory(e){try{const{data:t,error:a}=await c.from("lats_specifications").select("*").eq("category_id",e).eq("is_active",!0).order("sort_order",{ascending:!0});if(a)throw new Error(`Failed to fetch specifications: ${a.message}`);return t||[]}catch(t){throw t}}async getSpecificationById(e){try{const{data:t,error:a}=await c.from("lats_specifications").select("*").eq("id",e).single();return a?null:t}catch(t){return null}}async createSpecification(e){try{const{data:t,error:a}=await c.from("lats_specifications").insert([e]).select().single();if(a)throw new Error(`Failed to create specification: ${a.message}`);return P.success("Specification created successfully!"),t}catch(t){throw P.error("Failed to create specification"),t}}async updateSpecification(e,t){try{const{data:a,error:s}=await c.from("lats_specifications").update(t).eq("id",e).select().single();if(s)throw new Error(`Failed to update specification: ${s.message}`);return P.success("Specification updated successfully!"),a}catch(a){throw P.error("Failed to update specification"),a}}async deleteSpecification(e){try{const{error:t}=await c.from("lats_specifications").delete().eq("id",e);if(t)throw new Error(`Failed to delete specification: ${t.message}`);P.success("Specification deleted successfully!")}catch(t){throw P.error("Failed to delete specification"),t}}async getProductSpecifications(e){try{const{data:t,error:a}=await c.from("lats_product_specifications").select("*").eq("product_id",e);if(a)throw new Error(`Failed to fetch product specifications: ${a.message}`);return t||[]}catch(t){throw t}}async setProductSpecification(e,t,a){try{const{data:s,error:r}=await c.from("lats_product_specifications").upsert([{product_id:e,specification_id:t,value:a}]).select().single();if(r)throw new Error(`Failed to set product specification: ${r.message}`);return s}catch(s){throw s}}async deleteProductSpecification(e,t){try{const{error:a}=await c.from("lats_product_specifications").delete().eq("product_id",e).eq("specification_id",t);if(a)throw new Error(`Failed to delete product specification: ${a.message}`)}catch(a){throw a}}async getSpecificationsByType(e){try{const t=await this.getSpecificationsByCategory(e),a={text:[],number:[],select:[],boolean:[]};return t.forEach(e=>{a[e.type]&&a[e.type].push(e)}),a}catch(t){throw t}}async getCategoryWithSpecifications(e){try{const[t,a]=await Promise.all([this.getCategoryByCategoryId(e),this.getSpecificationsByCategory(e)]);return{category:t,specifications:a}}catch(t){throw t}}},ze=()=>{const[e,t]=u.useState(""),[a,o]=u.useState(null),[n,l]=u.useState([]),[c,d]=u.useState([]),[x,p]=u.useState(!1),[g,h]=u.useState(!1),[m,y]=u.useState(!1),[j,b]=u.useState(!1),[f,C]=u.useState(null),[S,_]=u.useState(!1),[k,F]=u.useState({spec_key:"",name:"",type:"text",options:[],unit:"",placeholder:"",icon:"Settings"}),[E,B]=u.useState("");u.useEffect(()=>{z()},[]),u.useEffect(()=>{e&&n.length>0&&M(e)},[e,n]);const z=async()=>{try{_(!0);const a=await Be.getCategories();l(a),a.length>0&&!e&&t(a[0].category_id)}catch(a){P.error("Failed to load categories")}finally{_(!1)}},M=async e=>{try{_(!0);const t=n.find(t=>t.category_id===e);if(t){const e=await Be.getSpecificationsByCategory(t.id);d(e)}else{const t=await Be.getSpecificationsByCategory(e);d(t)}}catch(t){P.error("Failed to load specifications")}finally{_(!1)}},[D,A]=u.useState({category_id:"",name:"",color:"blue",icon:"Monitor",description:""}),ve=()=>{E.trim()&&!k.options.includes(E.trim())&&(F(e=>({...e,options:[...e.options,E.trim()]})),B(""))};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[s.jsx(L,{className:"w-8 h-8 text-blue-600"}),"Specification Management"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage product specifications and attributes"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(r,{onClick:()=>{A({category_id:"",name:"",color:"blue",icon:"Monitor",description:""}),y(!0)},icon:s.jsx(v,{size:16}),className:"bg-green-600 text-white hover:bg-green-700",children:"Add Category"}),s.jsx(r,{onClick:()=>{F({spec_key:"",name:"",type:"text",options:[],unit:"",placeholder:"",icon:"Settings"}),p(!0)},icon:s.jsx(v,{size:16}),className:"bg-blue-600 text-white hover:bg-blue-700",children:"Add Specification"})]})]}),S&&s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Loading specifications..."})]}),s.jsx(i,{className:"p-6",children:s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:n.map(a=>{const r=(i=a.icon,{Monitor:I,PhoneCall:H,Cable:O,Settings:T,HardDrive:W,Camera:G,Speaker:K,Headphones:Z,Battery:Q,Wifi:Y,Cpu:J,Palette:V,Zap:q,FileText:$,Check:U,Hand:X,Lightbulb:ee,Fingerprint:te,ScanFace:ae,RotateCcw:se,PenTool:re,FastForward:ie,BatteryCharging:oe,Droplets:ne,Wind:le,Shield:ce,Usb:de,Bluetooth:ue,Expand:xe,Radio:pe,Mic:ge,Eye:he,Sun:me,Power:ye,Ruler:je,Unplug:be,Navigation:fe}[i]||I);var i;const o=e===a.category_id,l=c;return s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{onClick:()=>t(a.category_id),className:"flex items-center gap-2 px-4 py-3 rounded-lg text-sm font-medium whitespace-nowrap transition-all "+(o?`bg-${a.color}-100 text-${a.color}-700 border-2 border-${a.color}-300`:"bg-white text-gray-600 border border-gray-300 hover:bg-gray-50"),children:[s.jsx(r,{size:16}),a.name,s.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:l.length})]}),s.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{A({category_id:e.category_id,name:e.name,color:e.color,icon:e.icon,description:e.description||""}),C(e),b(!0)})(a)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors bg-white rounded shadow-sm",title:"Edit category",children:s.jsx(N,{size:12})}),s.jsx("button",{onClick:s=>{s.stopPropagation(),(async a=>{if(confirm("Are you sure you want to delete this category? This will also delete all specifications in this category.")){_(!0);try{const s=n.find(e=>e.category_id===a);if(s&&(await Be.deleteCategory(s.id),z(),e===a)){const e=n.filter(e=>e.category_id!==a);e.length>0&&t(e[0].category_id)}}catch(s){}finally{_(!1)}}})(a.category_id)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors bg-white rounded shadow-sm",title:"Delete category",children:s.jsx(w,{size:12})})]})})]},a.id)})})}),s.jsxs("div",{className:"space-y-6",children:[Object.entries(c.reduce((e,t)=>(e[t.type]||(e[t.type]=[]),e[t.type].push(t),e),{})).map(([t,a])=>{if(0===a.length)return null;const r=(e=>{switch(e){case"text":default:return $;case"number":return q;case"boolean":return U;case"select":return T}})(t),n=(e=>{switch(e){case"text":return"blue";case"number":return"green";case"boolean":return"purple";case"select":return"orange";default:return"gray"}})(t);return s.jsxs(i,{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.jsx(r,{className:`w-5 h-5 text-${n}-600`}),"text"===t?"Text Fields":"number"===t?"Number Fields":"select"===t?"Dropdown Selections":"boolean"===t?"Yes/No Features":t,s.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:[a.length," fields"]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(t=>{const a=(r=t.icon,{Monitor:I,PhoneCall:H,Cable:O,Settings:T,HardDrive:W,Camera:G,Speaker:K,Headphones:Z,Battery:Q,Wifi:Y,Cpu:J,Palette:V,Zap:q,FileText:$,Check:U,Hand:X,Lightbulb:ee,Fingerprint:te,ScanFace:ae,RotateCcw:se,PenTool:re,FastForward:ie,BatteryCharging:oe,Droplets:ne,Wind:le,Shield:ce,Usb:de,Bluetooth:ue,Expand:xe,Radio:pe,Mic:ge,Eye:he,Sun:me,Power:ye,Ruler:je,Unplug:be,Navigation:fe}[r]||T);var r;return s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(a,{size:16,className:"text-gray-500"}),s.jsx("h4",{className:"font-medium text-gray-900",children:t.name})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>(e=>{F({spec_key:e.spec_key,name:e.name,type:e.type,options:e.options||[],unit:e.unit||"",placeholder:e.placeholder||"",icon:e.icon}),o(e),h(!0)})(t),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit specification",children:s.jsx(N,{size:14})}),s.jsx("button",{onClick:()=>(async t=>{if(confirm("Are you sure you want to delete this specification?")){_(!0);try{await Be.deleteSpecification(t),M(e)}catch(a){}finally{_(!1)}}})(t.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete specification",children:s.jsx(w,{size:14})})]})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Key:"}),s.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:t.spec_key})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Type:"}),s.jsx("span",{className:`px-2 py-1 rounded text-xs bg-${n}-100 text-${n}-700`,children:t.type})]}),t.unit&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Unit:"}),s.jsx("span",{className:"text-gray-500",children:t.unit})]}),t.placeholder&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Placeholder:"}),s.jsxs("span",{className:"text-gray-500 italic",children:['"',t.placeholder,'"']})]}),t.options&&t.options.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Options:"}),s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[t.options.slice(0,3).map(e=>s.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:e},e)),t.options.length>3&&s.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",t.options.length-3," more"]})]})]})]})]},t.id)})})]},t)}),!S&&0===c.length&&s.jsx(i,{className:"p-8 text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(T,{className:"w-12 h-12 text-gray-400"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No specifications found"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Get started by adding your first specification to the ",e," category."]}),s.jsx(r,{onClick:()=>p(!0),icon:s.jsx(v,{size:16}),className:"bg-blue-600 text-white hover:bg-blue-700",children:"Add Specification"})]})]})})]}),(x||g)&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:x?"Add New Specification":"Edit Specification"}),s.jsx("button",{onClick:()=>{p(!1),h(!1),o(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(R,{size:20})})]})}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Key *"}),s.jsx("input",{type:"text",value:k.spec_key,onChange:e=>F(t=>({...t,spec_key:e.target.value})),placeholder:"e.g., screen_size",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),s.jsx("input",{type:"text",value:k.name,onChange:e=>F(t=>({...t,name:e.target.value})),placeholder:"e.g., Screen Size",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),s.jsxs("select",{value:k.type,onChange:e=>F(t=>({...t,type:e.target.value})),className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",children:[s.jsx("option",{value:"text",children:"Text"}),s.jsx("option",{value:"number",children:"Number"}),s.jsx("option",{value:"boolean",children:"Boolean (Yes/No)"}),s.jsx("option",{value:"select",children:"Select (Dropdown)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),s.jsxs("select",{value:k.icon,onChange:e=>F(t=>({...t,icon:e.target.value})),className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",children:[s.jsx("option",{value:"Settings",children:"Settings"}),s.jsx("option",{value:"Monitor",children:"Monitor"}),s.jsx("option",{value:"PhoneCall",children:"Phone"}),s.jsx("option",{value:"Cable",children:"Cable"}),s.jsx("option",{value:"HardDrive",children:"Hard Drive"}),s.jsx("option",{value:"Camera",children:"Camera"}),s.jsx("option",{value:"Speaker",children:"Speaker"}),s.jsx("option",{value:"Headphones",children:"Headphones"}),s.jsx("option",{value:"Battery",children:"Battery"}),s.jsx("option",{value:"Wifi",children:"WiFi"}),s.jsx("option",{value:"Cpu",children:"CPU"}),s.jsx("option",{value:"Palette",children:"Palette"}),s.jsx("option",{value:"Zap",children:"Zap"}),s.jsx("option",{value:"FileText",children:"File Text"}),s.jsx("option",{value:"Check",children:"Check"}),s.jsx("option",{value:"Hand",children:"Hand"}),s.jsx("option",{value:"Lightbulb",children:"Lightbulb"}),s.jsx("option",{value:"Fingerprint",children:"Fingerprint"}),s.jsx("option",{value:"ScanFace",children:"Face Scan"}),s.jsx("option",{value:"RotateCcw",children:"Rotate"}),s.jsx("option",{value:"PenTool",children:"Pen Tool"}),s.jsx("option",{value:"FastForward",children:"Fast Forward"}),s.jsx("option",{value:"BatteryCharging",children:"Battery Charging"}),s.jsx("option",{value:"Droplets",children:"Droplets"}),s.jsx("option",{value:"Wind",children:"Wind"}),s.jsx("option",{value:"Shield",children:"Shield"}),s.jsx("option",{value:"Usb",children:"USB"}),s.jsx("option",{value:"Bluetooth",children:"Bluetooth"}),s.jsx("option",{value:"Expand",children:"Expand"}),s.jsx("option",{value:"Radio",children:"Radio"}),s.jsx("option",{value:"Mic",children:"Microphone"}),s.jsx("option",{value:"Eye",children:"Eye"}),s.jsx("option",{value:"Sun",children:"Sun"}),s.jsx("option",{value:"Power",children:"Power"}),s.jsx("option",{value:"Ruler",children:"Ruler"}),s.jsx("option",{value:"Unplug",children:"Unplug"}),s.jsx("option",{value:"Navigation",children:"Navigation"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),s.jsx("input",{type:"text",value:k.unit,onChange:e=>F(t=>({...t,unit:e.target.value})),placeholder:"e.g., inch, kg, GB",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Placeholder"}),s.jsx("input",{type:"text",value:k.placeholder,onChange:e=>F(t=>({...t,placeholder:e.target.value})),placeholder:"e.g., Enter screen size",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),"select"===k.type&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:E,onChange:e=>B(e.target.value),placeholder:"Add option",className:"flex-1 py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),ve())}}),s.jsx("button",{type:"button",onClick:ve,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:k.options.map(e=>s.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[e,s.jsx("button",{type:"button",onClick:()=>(e=>{F(t=>({...t,options:t.options.filter(t=>t!==e)}))})(e),className:"text-blue-500 hover:text-blue-700",children:s.jsx(R,{size:14})})]},e))})]})]})]})}),s.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{p(!1),h(!1),o(null)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:async()=>{if(k.spec_key&&k.name){_(!0);try{const t=n.find(t=>t.category_id===e);if(!t)return void P.error("Active category not found");const s={category_id:t.id,spec_key:k.spec_key,name:k.name,type:k.type,icon:k.icon,options:k.options,unit:k.unit||void 0,placeholder:k.placeholder||void 0};a?await Be.updateSpecification(a.id,s):await Be.createSpecification(s),p(!1),h(!1),o(null),M(e)}catch(t){}finally{_(!1)}}else P.error("Key and name are required")},disabled:S,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:S?"Saving...":"Save"})]})})]})}),(m||j)&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[s.jsx("div",{className:"border-b border-gray-200 p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:m?"Add New Category":"Edit Category"}),s.jsx("button",{onClick:()=>{y(!1),b(!1),C(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(R,{size:20})})]})}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category ID *"}),s.jsx("input",{type:"text",value:D.category_id,onChange:e=>A(t=>({...t,category_id:e.target.value})),placeholder:"e.g., desktop, printer",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),s.jsx("input",{type:"text",value:D.name,onChange:e=>A(t=>({...t,name:e.target.value})),placeholder:"e.g., Desktop Computer",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("input",{type:"text",value:D.description,onChange:e=>A(t=>({...t,description:e.target.value})),placeholder:"e.g., Desktop computers and workstations",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),s.jsxs("select",{value:D.color,onChange:e=>A(t=>({...t,color:e.target.value})),className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",children:[s.jsx("option",{value:"blue",children:"Blue"}),s.jsx("option",{value:"green",children:"Green"}),s.jsx("option",{value:"purple",children:"Purple"}),s.jsx("option",{value:"orange",children:"Orange"}),s.jsx("option",{value:"red",children:"Red"}),s.jsx("option",{value:"yellow",children:"Yellow"}),s.jsx("option",{value:"indigo",children:"Indigo"}),s.jsx("option",{value:"pink",children:"Pink"}),s.jsx("option",{value:"gray",children:"Gray"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),s.jsxs("select",{value:D.icon,onChange:e=>A(t=>({...t,icon:e.target.value})),className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",children:[s.jsx("option",{value:"Monitor",children:"Monitor"}),s.jsx("option",{value:"PhoneCall",children:"Phone"}),s.jsx("option",{value:"Cable",children:"Cable"}),s.jsx("option",{value:"Settings",children:"Settings"}),s.jsx("option",{value:"HardDrive",children:"Hard Drive"}),s.jsx("option",{value:"Camera",children:"Camera"}),s.jsx("option",{value:"Speaker",children:"Speaker"}),s.jsx("option",{value:"Headphones",children:"Headphones"}),s.jsx("option",{value:"Battery",children:"Battery"}),s.jsx("option",{value:"Wifi",children:"WiFi"}),s.jsx("option",{value:"Cpu",children:"CPU"}),s.jsx("option",{value:"Palette",children:"Palette"}),s.jsx("option",{value:"Zap",children:"Zap"}),s.jsx("option",{value:"FileText",children:"File Text"}),s.jsx("option",{value:"Check",children:"Check"}),s.jsx("option",{value:"Hand",children:"Hand"}),s.jsx("option",{value:"Lightbulb",children:"Lightbulb"}),s.jsx("option",{value:"Fingerprint",children:"Fingerprint"}),s.jsx("option",{value:"ScanFace",children:"Face Scan"}),s.jsx("option",{value:"RotateCcw",children:"Rotate"}),s.jsx("option",{value:"PenTool",children:"Pen Tool"}),s.jsx("option",{value:"FastForward",children:"Fast Forward"}),s.jsx("option",{value:"BatteryCharging",children:"Battery Charging"}),s.jsx("option",{value:"Droplets",children:"Droplets"}),s.jsx("option",{value:"Wind",children:"Wind"}),s.jsx("option",{value:"Shield",children:"Shield"}),s.jsx("option",{value:"Usb",children:"USB"}),s.jsx("option",{value:"Bluetooth",children:"Bluetooth"}),s.jsx("option",{value:"Expand",children:"Expand"}),s.jsx("option",{value:"Radio",children:"Radio"}),s.jsx("option",{value:"Mic",children:"Microphone"}),s.jsx("option",{value:"Eye",children:"Eye"}),s.jsx("option",{value:"Sun",children:"Sun"}),s.jsx("option",{value:"Power",children:"Power"}),s.jsx("option",{value:"Ruler",children:"Ruler"}),s.jsx("option",{value:"Unplug",children:"Unplug"}),s.jsx("option",{value:"Navigation",children:"Navigation"})]})]})]})]})}),s.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{y(!1),b(!1),C(null)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:async()=>{if(D.category_id&&D.name){_(!0);try{const e={category_id:D.category_id,name:D.name,icon:D.icon,color:D.color,description:D.description||void 0};f?await Be.updateCategory(f.id,e):await Be.createCategory(e),y(!1),b(!1),C(null),z()}catch(e){}finally{_(!1)}}else P.error("Category ID and name are required")},disabled:S,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:S?"Saving...":"Save Category"})]})})]})})]})},Me=[{id:"categories",label:"Categories",icon:C,color:"green",description:"Organize products into categories"},{id:"suppliers",label:"Suppliers",icon:Ne,color:"purple",description:"Manage suppliers and vendor relationships"},{id:"store-locations",label:"Store Locations",icon:B,color:"orange",description:"Manage store locations and branches"},{id:"storage-room",label:"Storage Room",icon:we,color:"indigo",description:"Manage storage rooms and capacity"},{id:"specifications",label:"Specifications",icon:L,color:"blue",description:"Manage product specifications and attributes"}],De={green:{active:"bg-green-500 text-white shadow-lg",hover:"text-green-600 hover:bg-green-50"},purple:{active:"bg-purple-500 text-white shadow-lg",hover:"text-purple-600 hover:bg-purple-50"},orange:{active:"bg-orange-500 text-white shadow-lg",hover:"text-orange-600 hover:bg-orange-50"},indigo:{active:"bg-indigo-500 text-white shadow-lg",hover:"text-indigo-600 hover:bg-indigo-50"},blue:{active:"bg-blue-500 text-white shadow-lg",hover:"text-blue-600 hover:bg-blue-50"}},Ae=()=>{const{currentUser:e}=d(),t=x(),[a]=p(),[o,n]=u.useState("categories");u.useState(!1),u.useEffect(()=>{var s,r,i;if(!e)return void t("/login");if(!((null==(s=e.permissions)?void 0:s.includes("all"))||(null==(r=e.permissions)?void 0:r.includes("view_inventory"))||(null==(i=e.permissions)?void 0:i.includes("edit_settings"))||["admin","customer-care"].includes(e.role)))return void t("/dashboard");const o=a.get("storage-room"),l=a.get("shelves");(o||l)&&n("storage-room")},[e,t,a]);return e?s.jsx(g,{pageName:"Inventory Management",showDetails:!0,children:s.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6",children:[s.jsx(h,{title:"Inventory Management",subtitle:"Manage brands, categories, suppliers, and system settings",actions:s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx(r,{onClick:()=>t("/lats/unified-inventory"),variant:"secondary",icon:s.jsx(k,{size:18}),children:"Back to Inventory"}),s.jsx(r,{onClick:()=>t("/lats/stock-transfers"),variant:"secondary",icon:s.jsx(ve,{size:18}),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700",children:"Stock Transfers"}),s.jsx(r,{onClick:()=>t("/lats/add-product"),icon:s.jsx(v,{size:18}),className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:"Add Product"})]})}),s.jsx(i,{className:"p-2",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:Me.map(e=>{const t=e.icon,a=o===e.id,r=De[e.color];return s.jsxs("button",{onClick:()=>{return t=e.id,void n(t);var t},className:`flex items-center gap-2 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${a?r.active:`text-gray-600 ${r.hover}`}`,title:e.description,children:[s.jsx(t,{size:18}),s.jsx("span",{className:"hidden sm:inline",children:e.label})]},e.id)})})}),s.jsx("div",{className:"min-h-[600px]",children:(()=>{switch(o){case"categories":default:return s.jsx(Ee,{});case"suppliers":return s.jsx(Se,{});case"store-locations":return s.jsx(Pe,{});case"storage-room":return s.jsx(_e,{});case"specifications":return s.jsx(ze,{})}})()})]})}):null};export{Ae as default};
