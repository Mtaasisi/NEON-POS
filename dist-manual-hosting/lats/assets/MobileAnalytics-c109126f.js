import{u as e,a7 as t,j as s}from"./index-222cfb29.js";import{r as a}from"./vendor-a2ff445a.js";import{d as r}from"./dashboardService-33c47c64.js";import{a as l}from"./routing-a2f0f6d2.js";import{D as i,V as o,x as n,t as d,ah as c,bu as x,ao as m}from"./ui-551a39a6.js";import"./supabase-7e851d02.js";const b=()=>{const b=l(),{currentUser:u}=e(),{dateRange:h,setDateRange:p,getDateRangeForQuery:g}=t(),[y,j]=a.useState(!0),[v,N]=a.useState(null),[f,k]=a.useState("today");a.useEffect(()=>{(async()=>{if(null==u?void 0:u.id){j(!0);try{const e=g(),t=await r.getDashboardStats(u.id,e.startDate,e.endDate);N(t)}catch(e){}finally{j(!1)}}})()},[null==u?void 0:u.id,h,g]);const w=[{label:"Revenue",value:(null==v?void 0:v.totalRevenue)?`TSh ${(v.totalRevenue/1e6).toFixed(1)}M`:"TSh 0",change:"+12%",trend:"up",icon:i,color:"green"},{label:"Sales",value:(null==v?void 0:v.totalSales)||"0",change:"+8%",trend:"up",icon:o,color:"blue"},{label:"Products",value:(null==v?void 0:v.totalProducts)||"0",change:"+5",trend:"up",icon:n,color:"purple"},{label:"Clients",value:(null==v?void 0:v.totalCustomers)||"0",change:"+3",trend:"up",icon:d,color:"orange"}],S=[{name:"iPhone 13 Pro",sales:45,revenue:"TSh 112.5M"},{name:"Samsung Galaxy S21",sales:32,revenue:"TSh 57.6M"},{name:"MacBook Pro M2",sales:18,revenue:"TSh 81M"}],C=[{id:"1",customer:"John Doe",amount:"TSh 2,500,000",time:"2 min ago"},{id:"2",customer:"Jane Smith",amount:"TSh 450,000",time:"15 min ago"},{id:"3",customer:"Mike Johnson",amount:"TSh 1,200,000",time:"1 hour ago"}];return s.jsxs("div",{className:"flex flex-col h-full bg-white",children:[s.jsx("div",{className:"px-4 pt-3 pb-2",children:s.jsx("h1",{className:"text-[32px] font-bold text-black tracking-tight",children:"Analytics"})}),s.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:s.jsx("div",{className:"flex gap-2",children:[{id:"today",label:"Today"},{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"custom",label:"Custom"}].map(e=>s.jsx("button",{onClick:()=>(e=>{switch(k(e),e){case"today":p("today");break;case"week":p("thisWeek");break;case"month":p("thisMonth")}})(e.id),className:"px-4 py-2 rounded-lg text-[14px] font-medium transition-colors "+(f===e.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},e.id))})}),y&&s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-3"}),s.jsx("p",{className:"text-gray-500 text-[15px]",children:"Loading analytics..."})]})}),!y&&s.jsxs("div",{className:"flex-1 overflow-y-auto pb-20",children:[s.jsx("div",{className:"px-4 py-4",children:s.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map((e,t)=>{const a=e.icon;return s.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("div",{className:"p-2 rounded-lg "+("green"===e.color?"bg-green-100":"blue"===e.color?"bg-blue-100":"purple"===e.color?"bg-purple-100":"bg-orange-100"),children:s.jsx(a,{size:18,className:""+("green"===e.color?"text-green-600":"blue"===e.color?"text-blue-600":"purple"===e.color?"text-purple-600":"text-orange-600"),strokeWidth:2})}),s.jsxs("div",{className:"flex items-center gap-0.5 text-[11px] font-bold "+("up"===e.trend?"text-green-600":"text-red-600"),children:["up"===e.trend?s.jsx(c,{size:11,strokeWidth:3}):s.jsx(x,{size:11,strokeWidth:3}),s.jsx("span",{children:e.change})]})]}),s.jsx("div",{className:"text-[22px] font-bold text-gray-900 mb-1",children:e.value}),s.jsx("div",{className:"text-[12px] text-gray-500",children:e.label})]},t)})})}),s.jsxs("div",{className:"px-4 py-4",children:[s.jsx("div",{className:"text-[13px] text-gray-500 mb-3 uppercase tracking-wide font-semibold",children:"TOP PRODUCTS"}),s.jsx("div",{className:"border-t border-b border-gray-200",children:S.map((e,t)=>{const a=t===S.length-1;return s.jsxs("div",{className:"px-0 py-3 flex items-center justify-between border-b border-gray-200",style:{borderBottomWidth:a?"0":"0.5px"},children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[16px] text-gray-900 font-medium",children:e.name}),s.jsxs("div",{className:"text-[14px] text-gray-500",children:[e.sales," sales"]})]}),s.jsx("div",{className:"text-[15px] font-semibold text-green-600",children:e.revenue})]},t)})})]}),s.jsxs("div",{className:"px-4 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("div",{className:"text-[13px] text-gray-500 uppercase tracking-wide font-semibold",children:"RECENT SALES"}),s.jsx("button",{onClick:()=>b("/mobile/pos"),className:"text-blue-500 text-[15px] font-medium",children:"View All"})]}),s.jsx("div",{className:"border-t border-b border-gray-200",children:C.map((e,t)=>{const a=t===C.length-1;return s.jsxs("div",{className:"px-0 py-3 flex items-center justify-between border-b border-gray-200",style:{borderBottomWidth:a?"0":"0.5px"},children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[16px] text-gray-900",children:e.customer}),s.jsx("div",{className:"text-[14px] text-gray-500",children:e.time})]}),s.jsx("div",{className:"text-[15px] font-semibold text-gray-900",children:e.amount})]},e.id)})})]}),s.jsxs("div",{className:"px-4 py-4",children:[s.jsx("div",{className:"text-[13px] text-gray-500 mb-3 uppercase tracking-wide font-semibold",children:"QUICK ACTIONS"}),s.jsxs("div",{className:"border-t border-b border-gray-200",children:[s.jsxs("button",{onClick:()=>b("/mobile/pos"),className:"w-full px-0 py-3 flex items-center justify-between hover:bg-gray-50 active:bg-gray-100 transition-colors border-b border-gray-200",style:{borderBottomWidth:"0.5px"},children:[s.jsx("span",{className:"text-[16px] text-black",children:"New Sale"}),s.jsx(m,{size:18,className:"text-gray-400",strokeWidth:2})]}),s.jsxs("button",{onClick:()=>b("/mobile/inventory/add"),className:"w-full px-0 py-3 flex items-center justify-between hover:bg-gray-50 active:bg-gray-100 transition-colors border-b border-gray-200",style:{borderBottomWidth:"0.5px"},children:[s.jsx("span",{className:"text-[16px] text-black",children:"Add Product"}),s.jsx(m,{size:18,className:"text-gray-400",strokeWidth:2})]}),s.jsxs("button",{onClick:()=>b("/mobile/clients"),className:"w-full px-0 py-3 flex items-center justify-between hover:bg-gray-50 active:bg-gray-100 transition-colors",children:[s.jsx("span",{className:"text-[16px] text-black",children:"Add Client"}),s.jsx(m,{size:18,className:"text-gray-400",strokeWidth:2})]})]})]})]})]})};export{b as default};
