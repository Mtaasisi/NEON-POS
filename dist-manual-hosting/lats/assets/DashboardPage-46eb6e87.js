import{j as e}from"./index-222cfb29.js";import{r as s}from"./vendor-a2ff445a.js";import{c as t,M as a}from"./customerPortalService-ebbdd244.js";import{a as l}from"./routing-a2f0f6d2.js";import{p as i,x as r,m as o,u as c,ao as n,ar as d,f as m,ah as x,bK as p,ag as u}from"./ui-551a39a6.js";import"./supabase-7e851d02.js";const h=()=>{const h=l(),[g,b]=s.useState({loyaltyPoints:0,activeOrders:0,devicesInRepair:0,upcomingAppointments:0,totalPurchases:0}),[j,f]=s.useState(!0),[v,y]=s.useState("Guest");s.useEffect(()=>{N()},[]);const N=async()=>{try{f(!0);const e=localStorage.getItem("customer_id");if(e){const s=await t.getCustomerById(e);s&&(y(s.name),b(e=>({...e,loyaltyPoints:s.points||0}))),b(e=>({...e,activeOrders:Math.floor(5*Math.random()),devicesInRepair:Math.floor(3*Math.random()),upcomingAppointments:Math.floor(2*Math.random()),totalPurchases:Math.floor(50*Math.random())}))}}catch(e){}finally{f(!1)}},w=[{icon:p,label:"Shop Now",color:"bg-blue-500",action:()=>h("/customer-portal/products")},{icon:r,label:"My Orders",color:"bg-green-500",action:()=>h("/customer-portal/orders")},{icon:u,label:"Rewards",color:"bg-purple-500",action:()=>h("/customer-portal/loyalty")},{icon:c,label:"Book Service",color:"bg-orange-500",action:()=>h("/customer-portal/appointments")}],C=[{icon:i,label:"Loyalty Points",value:g.loyaltyPoints.toLocaleString(),color:"text-yellow-600",bgColor:"bg-yellow-50",action:()=>h("/customer-portal/loyalty")},{icon:r,label:"Active Orders",value:g.activeOrders.toString(),color:"text-blue-600",bgColor:"bg-blue-50",action:()=>h("/customer-portal/orders")},{icon:o,label:"Devices in Repair",value:g.devicesInRepair.toString(),color:"text-green-600",bgColor:"bg-green-50",action:()=>h("/customer-portal/devices")},{icon:c,label:"Appointments",value:g.upcomingAppointments.toString(),color:"text-purple-600",bgColor:"bg-purple-50",action:()=>h("/customer-portal/appointments")}];return j?e.jsx(a,{title:"Dashboard",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsxs(a,{title:"Dashboard",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 p-6 text-white",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome back, ",v,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-blue-100",children:"Ready to continue shopping?"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Quick Actions"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(80px, 100%), 1fr))",gap:"clamp(0.5rem, 1.5vw, 0.75rem)",gridAutoRows:"1fr"},children:w.map((s,t)=>{const a=s.icon;return e.jsxs("button",{onClick:s.action,className:"flex flex-col items-center active:scale-95 transition-transform",children:[e.jsx("div",{className:`${s.color} w-14 h-14 rounded-2xl flex items-center justify-center mb-2 shadow-md`,children:e.jsx(a,{size:24,className:"text-white"})}),e.jsx("span",{className:"text-xs text-gray-700 text-center font-medium",children:s.label})]},t)})})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Your Activity"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(150px, 100%), 1fr))",gap:"clamp(0.75rem, 2vw, 1rem)",gridAutoRows:"1fr"},children:C.map((s,t)=>{const a=s.icon;return e.jsxs("button",{onClick:s.action,className:"bg-white rounded-xl p-4 shadow-sm active:scale-95 transition-transform",children:[e.jsx("div",{className:`${s.bgColor} w-10 h-10 rounded-lg flex items-center justify-center mb-3`,children:e.jsx(a,{size:20,className:s.color})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:s.value}),e.jsx("div",{className:"text-xs text-gray-600",children:s.label})]},t)})})]}),e.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[e.jsx("button",{onClick:()=>h("/customer-portal/orders"),className:"w-full bg-white rounded-xl p-4 shadow-sm active:scale-95 transition-transform",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(r,{size:24,className:"text-blue-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold text-gray-900",children:"Recent Orders"}),e.jsx("div",{className:"text-sm text-gray-600",children:"View your purchase history"})]})]}),e.jsx(n,{size:20,className:"text-gray-400"})]})}),e.jsx("button",{onClick:()=>h("/customer-portal/loyalty"),className:"w-full bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl p-4 shadow-sm active:scale-95 transition-transform text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(d,{size:24})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Loyalty Rewards"}),e.jsxs("div",{className:"text-sm opacity-90",children:[g.loyaltyPoints," points available"]})]})]}),e.jsx(n,{size:20})]})}),g.devicesInRepair>0&&e.jsx("button",{onClick:()=>h("/customer-portal/devices"),className:"w-full bg-white rounded-xl p-4 shadow-sm active:scale-95 transition-transform",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-orange-50 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(o,{size:24,className:"text-orange-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold text-gray-900",children:"Devices in Service"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[g.devicesInRepair," device(s) being serviced"]})]})]}),e.jsx(n,{size:20,className:"text-gray-400"})]})}),g.upcomingAppointments>0&&e.jsx("button",{onClick:()=>h("/customer-portal/appointments"),className:"w-full bg-white rounded-xl p-4 shadow-sm active:scale-95 transition-transform",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-50 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(m,{size:24,className:"text-green-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold text-gray-900",children:"Upcoming Appointments"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[g.upcomingAppointments," appointment(s) scheduled"]})]})]}),e.jsx(n,{size:20,className:"text-gray-400"})]})})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{size:32}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg",children:"Special Offers!"}),e.jsx("div",{className:"text-sm opacity-90",children:"Check out our latest deals"})]})]}),e.jsx("button",{onClick:()=>h("/customer-portal/products"),className:"mt-3 bg-white text-orange-600 font-bold py-2 px-4 rounded-lg w-full hover:bg-gray-50 active:scale-95 transition-all",children:"Shop Now"})]})})]})};export{h as default};
