import{j as e,d as s,G as t,u as a}from"./index-222cfb29.js";import{r}from"./vendor-a2ff445a.js";import{S as l}from"./SearchBar-2b6f451f.js";import{G as i}from"./GlassSelect-3b56e5f5.js";import{B as n}from"./BackButton-e41d1482.js";import{P as c}from"./PageErrorBoundary-d0d559c5.js";import{t as d,q as o,r as m,s as x,$ as p,X as u,N as h,n as g,bs as j,av as y,ah as v,Z as N,aP as b,bt as f,aB as w,aA as S,aC as C,x as T,p as _,ar as A,a6 as k,A as E,h as z,d as M,R as P,Q as D,ao as F,ax as B,v as L}from"./ui-551a39a6.js";import{_ as R}from"./supabase-7e851d02.js";import{a as O}from"./routing-a2f0f6d2.js";import"./utils-fb833cf6.js";import"./charts-66cc82bb.js";const U=({isActive:a,suppliers:l,loading:i,searchQuery:n,selectedCountry:c,showSupplierForm:j,editingSupplier:y,setShowSupplierForm:v,setEditingSupplier:N})=>{const[b,f]=r.useState(!1),w=e=>{const s=["bg-blue-100 text-blue-600","bg-green-100 text-green-600","bg-purple-100 text-purple-600","bg-orange-100 text-orange-600","bg-red-100 text-red-600","bg-yellow-100 text-yellow-600","bg-indigo-100 text-indigo-600","bg-pink-100 text-pink-600"];return s[e%s.length]},S=s=>{if(!s)return null;const t={mobile_money:"bg-green-100 text-green-700 border-green-200",bank_account:"bg-blue-100 text-blue-700 border-blue-200",other:"bg-gray-100 text-gray-700 border-gray-200"};return e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${t[s]||t.other}`,children:s.replace("_"," ").toUpperCase()})},C=()=>{v(!1),N(null)};return a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(s,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Suppliers"})]}),e.jsxs(s,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.filter(e=>"mobile_money"===e.payment_account_type).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Mobile Money"})]}),e.jsxs(s,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.filter(e=>"bank_account"===e.payment_account_type).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Bank Account"})]}),e.jsxs(s,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:new Set(l.map(e=>e.country).filter(Boolean)).size}),e.jsx("div",{className:"text-sm text-gray-600",children:"Countries"})]})]}),e.jsxs(s,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Suppliers Directory"}),e.jsx("div",{className:"space-y-4",children:0===l.length?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No suppliers found"})]}):l.map((s,a)=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center font-semibold ${w(a)}`,children:s.name.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),S(s.payment_account_type)]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Company:"}),e.jsx("p",{className:"font-medium",children:s.company_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("p",{className:"font-medium",children:s.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"City:"}),e.jsx("p",{className:"font-medium",children:s.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Country:"}),e.jsx("p",{className:"font-medium",children:s.country||"N/A"})]})]}),s.description&&e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"text-gray-600 text-sm",children:"Description:"}),e.jsx("p",{className:"text-sm",children:s.description})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsx(t,{size:"sm",variant:"secondary",icon:e.jsx(o,{size:14}),children:"View"}),e.jsx(t,{size:"sm",variant:"secondary",icon:e.jsx(m,{size:14}),onClick:()=>{N(s),v(!0)},children:"Edit"}),e.jsx(t,{size:"sm",variant:"secondary",icon:e.jsx(x,{size:14}),children:"Message"}),e.jsx(t,{size:"sm",variant:"secondary",icon:e.jsx(p,{size:14}),onClick:()=>(async e=>{if(window.confirm("⚠️ PERMANENT DELETE: Are you sure you want to permanently delete this supplier from the database? This action CANNOT be undone!"))try{const{deleteSupplier:s}=await R(()=>import("./index-222cfb29.js").then(e=>e.aR),["assets/index-222cfb29.js","assets/vendor-a2ff445a.js","assets/supabase-7e851d02.js","assets/routing-a2f0f6d2.js","assets/ui-551a39a6.js","assets/index-d3868143.css"]);await s(e),g.success("Supplier permanently deleted from database"),window.location.reload()}catch(s){g.error("Failed to delete supplier")}})(s.id),children:"Delete"})]})]})},s.id))})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&C()},children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:y?`Edit Supplier: ${y.name}`:"Add New Supplier"}),e.jsx("button",{onClick:C,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",disabled:b,children:e.jsx(u,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Name"}),e.jsx("input",{type:"text",defaultValue:(null==y?void 0:y.name)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter supplier name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",defaultValue:(null==y?void 0:y.company_name)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter company name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",defaultValue:(null==y?void 0:y.phone)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter phone number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),e.jsx("input",{type:"text",defaultValue:(null==y?void 0:y.city)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),e.jsxs("select",{defaultValue:(null==y?void 0:y.country)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select country"}),e.jsx("option",{value:"TZ",children:"Tanzania"}),e.jsx("option",{value:"CN",children:"China"}),e.jsx("option",{value:"AE",children:"Dubai (UAE)"}),e.jsx("option",{value:"US",children:"United States"}),e.jsx("option",{value:"KE",children:"Kenya"}),e.jsx("option",{value:"UG",children:"Uganda"}),e.jsx("option",{value:"RW",children:"Rwanda"}),e.jsx("option",{value:"BD",children:"Bangladesh"}),e.jsx("option",{value:"IN",children:"India"}),e.jsx("option",{value:"PK",children:"Pakistan"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{defaultValue:(null==y?void 0:y.description)||"",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter description"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(t,{onClick:async e=>{f(!0);try{y?g.success("Supplier updated successfully"):g.success("Supplier created successfully"),C()}catch(s){g.error(y?"Failed to update supplier":"Failed to create supplier")}finally{f(!1)}},icon:e.jsx(h,{size:16}),loading:b,disabled:b,className:"flex-1",children:y?"Update Supplier":"Create Supplier"}),e.jsx(t,{onClick:C,variant:"secondary",disabled:b,children:"Cancel"})]})]})]})})]}):null},q=({isActive:t,suppliers:a})=>{const[l,i]=r.useState(null),[n,c]=r.useState(!0),[o,m]=r.useState("30d");r.useEffect(()=>{t&&x()},[t,o,a]);const x=async()=>{c(!0);try{i({overview:{total:24,active:22,newThisMonth:3,growth:12.5},byCountry:[{country:"China",count:8,percentage:33.3,trend:15.2},{country:"Tanzania",count:6,percentage:25,trend:8.7},{country:"Dubai (UAE)",count:4,percentage:16.7,trend:12.3},{country:"Kenya",count:3,percentage:12.5,trend:-2.1},{country:"United States",count:2,percentage:8.3,trend:5.6},{country:"Other",count:1,percentage:4.2,trend:-1.5}],byPaymentType:[{type:"Mobile Money",count:12,percentage:50,trend:18.5},{type:"Bank Account",count:8,percentage:33.3,trend:12.3},{type:"Other",count:4,percentage:16.7,trend:-5.2}],byCategory:[{category:"Electronics",count:10,revenue:25e5,percentage:41.7},{category:"Mobile Phones",count:8,revenue:18e5,percentage:33.3},{category:"Accessories",count:4,revenue:8e5,percentage:16.7},{category:"Other",count:2,revenue:4e5,percentage:8.3}],trends:[{month:"Jan",suppliers:20,active:18,new:2},{month:"Feb",suppliers:22,active:20,new:2},{month:"Mar",suppliers:21,active:19,new:1},{month:"Apr",suppliers:23,active:21,new:2},{month:"May",suppliers:24,active:22,new:1},{month:"Jun",suppliers:24,active:22,new:3}]})}catch(e){g.error("Failed to load supplier analytics")}finally{c(!1)}};return t?n?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading supplier analytics..."})]}):l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Suppliers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(p=l.overview.total,p>=1e6?(p/1e6).toFixed(1)+"M":p>=1e3?(p/1e3).toFixed(1)+"K":p.toString())}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(j,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"text-sm text-green-600 ml-1",children:["+",l.overview.growth,"%"]})]})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(d,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Suppliers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.overview.active}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(l.overview.active/l.overview.total*100),"% active rate"]})})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(y,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"New This Month"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.overview.newThisMonth}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(j,{className:"w-4 h-4 text-green-500"}),e.jsxs("span",{className:"text-sm text-green-600 ml-1",children:["+",l.overview.newThisMonth]})]})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(v,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx(s,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Growth Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["+",l.overview.growth,"%"]}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:"text-sm text-gray-600",children:"vs last month"})})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx(N,{className:"w-6 h-6 text-orange-600"})})]})})]}),e.jsxs(s,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Suppliers by Country"}),e.jsx("div",{className:"space-y-3",children:l.byCountry.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(b,{className:"w-4 h-4 text-blue-500 mr-3"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.country}),e.jsxs("span",{className:"ml-3 text-sm text-gray-600",children:[s.count," suppliers"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.percentage,"%"]}),e.jsxs("div",{className:"flex items-center",children:[s.trend>0?e.jsx(j,{className:"w-3 h-3 text-green-500"}):e.jsx(f,{className:"w-3 h-3 text-red-500"}),e.jsxs("span",{className:"text-xs ml-1 "+(s.trend>0?"text-green-600":"text-red-600"),children:[s.trend>0?"+":"",s.trend,"%"]})]})]})]},t))})]}),e.jsxs(s,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Methods"}),e.jsx("div",{className:"space-y-3",children:l.byPaymentType.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:["Mobile Money"===s.type?e.jsx(w,{className:"w-4 h-4 text-green-500 mr-3"}):"Bank Account"===s.type?e.jsx(S,{className:"w-4 h-4 text-blue-500 mr-3"}):e.jsx(C,{className:"w-4 h-4 text-gray-500 mr-3"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.type}),e.jsxs("span",{className:"ml-3 text-sm text-gray-600",children:[s.count," suppliers"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.percentage,"%"]}),e.jsxs("div",{className:"flex items-center",children:[s.trend>0?e.jsx(j,{className:"w-3 h-3 text-green-500"}):e.jsx(f,{className:"w-3 h-3 text-red-500"}),e.jsxs("span",{className:"text-xs ml-1 "+(s.trend>0?"text-green-600":"text-red-600"),children:[s.trend>0?"+":"",s.trend,"%"]})]})]})]},t))})]}),e.jsxs(s,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Suppliers by Category"}),e.jsx("div",{className:"space-y-3",children:l.byCategory.map((s,t)=>{return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-4 h-4 text-purple-500 mr-3"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.category}),e.jsxs("span",{className:"ml-3 text-sm text-gray-600",children:[s.count," suppliers"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:(a=s.revenue,new Intl.NumberFormat("en-TZ",{style:"currency",currency:"TZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(a))}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.percentage,"%"]})]})]},t);var a})})]}),e.jsxs(s,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Trends"}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:l.trends.map((s,t)=>e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.month}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:s.suppliers}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("p",{className:"text-green-600",children:[s.active," active"]}),e.jsxs("p",{className:"text-purple-600",children:[s.new," new"]})]})]})},t))})]})]}):null:null;var p},K=({isActive:t,suppliers:a})=>{const[l,i]=r.useState(null),[n,c]=r.useState(!0),[d,o]=r.useState("30d");r.useEffect(()=>{t&&m()},[t,d,a]);const m=async()=>{c(!0);try{i({overview:{totalSuppliers:24,highPerformers:8,averagePerformers:12,lowPerformers:4,averageRating:4.2},topPerformers:[{id:"1",name:"Tech Solutions Ltd",rating:4.8,orders:156,revenue:25e5,onTimeDelivery:98,qualityScore:95,responseTime:2.5},{id:"2",name:"Global Electronics",rating:4.7,orders:142,revenue:22e5,onTimeDelivery:96,qualityScore:92,responseTime:3.2},{id:"3",name:"Dubai Trading Co",rating:4.6,orders:128,revenue:18e5,onTimeDelivery:94,qualityScore:90,responseTime:4.1},{id:"4",name:"Kenya Mobile Solutions",rating:4.5,orders:115,revenue:16e5,onTimeDelivery:92,qualityScore:88,responseTime:3.8},{id:"5",name:"China Electronics Hub",rating:4.4,orders:98,revenue:14e5,onTimeDelivery:90,qualityScore:85,responseTime:4.5}],performanceMetrics:[{metric:"On-Time Delivery",value:94.5,target:95,status:"good",trend:2.3},{metric:"Quality Score",value:91.2,target:90,status:"excellent",trend:1.8},{metric:"Response Time (hours)",value:3.8,target:4,status:"good",trend:-.5},{metric:"Customer Satisfaction",value:4.2,target:4.5,status:"average",trend:.3},{metric:"Order Accuracy",value:97.8,target:98,status:"good",trend:.8},{metric:"Cost Efficiency",value:88.5,target:90,status:"average",trend:-1.2}],recentActivity:[{id:"1",supplier:"Tech Solutions Ltd",action:"Delivered order 50% faster than expected",timestamp:"2 hours ago",impact:"positive"},{id:"2",supplier:"Global Electronics",action:"Improved quality score by 5%",timestamp:"4 hours ago",impact:"positive"},{id:"3",supplier:"Dubai Trading Co",action:"Delayed shipment by 2 days",timestamp:"6 hours ago",impact:"negative"},{id:"4",supplier:"Kenya Mobile Solutions",action:"Reduced response time by 30%",timestamp:"8 hours ago",impact:"positive"},{id:"5",supplier:"China Electronics Hub",action:"Quality issue reported",timestamp:"12 hours ago",impact:"negative"}]})}catch(e){g.error("Failed to load supplier performance data")}finally{c(!1)}},x=e=>{switch(e){case"excellent":return"text-green-600 bg-green-100";case"good":return"text-blue-600 bg-blue-100";case"average":return"text-yellow-600 bg-yellow-100";case"poor":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},p=s=>{switch(s){case"positive":return e.jsx(M,{className:"w-4 h-4 text-green-500"});case"negative":return e.jsx(z,{className:"w-4 h-4 text-red-500"});case"neutral":return e.jsx(E,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(y,{className:"w-4 h-4 text-gray-500"})}};return t?n?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading supplier performance..."})]}):l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs(s,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.overview.totalSuppliers}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Suppliers"})]}),e.jsxs(s,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.overview.highPerformers}),e.jsx("div",{className:"text-sm text-gray-600",children:"High Performers"})]}),e.jsxs(s,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.overview.averagePerformers}),e.jsx("div",{className:"text-sm text-gray-600",children:"Average Performers"})]}),e.jsxs(s,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.overview.lowPerformers}),e.jsx("div",{className:"text-sm text-gray-600",children:"Low Performers"})]}),e.jsxs(s,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.overview.averageRating.toFixed(1)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Rating"})]})]}),e.jsxs(s,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Suppliers"}),e.jsx("div",{className:"space-y-4",children:l.topPerformers.map((s,t)=>{return e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-purple-100 rounded-full",children:e.jsx("span",{className:"text-purple-600 font-semibold",children:t+1})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:"w-4 h-4 text-yellow-500 fill-current"}),e.jsx("span",{className:"ml-1 text-sm font-medium",children:s.rating})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Orders:"}),e.jsx("p",{className:"font-medium",children:s.orders})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Revenue:"}),e.jsx("p",{className:"font-medium",children:(a=s.revenue,new Intl.NumberFormat("en-TZ",{style:"currency",currency:"TZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(a))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"On-Time Delivery:"}),e.jsxs("p",{className:"font-medium",children:[s.onTimeDelivery,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Quality Score:"}),e.jsxs("p",{className:"font-medium",children:[s.qualityScore,"%"]})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Response Time"}),e.jsxs("div",{className:"font-semibold text-gray-900",children:[s.responseTime,"h"]})]})]})},s.id);var a})})]}),e.jsxs(s,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Metrics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.performanceMetrics.map((s,t)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.metric}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current:"}),e.jsx("span",{className:"font-medium",children:s.value})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target:"}),e.jsx("span",{className:"font-medium",children:s.target})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Trend:"}),e.jsxs("span",{className:"font-medium "+(s.trend>0?"text-green-600":"text-red-600"),children:[s.trend>0?"+":"",s.trend]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full "+("excellent"===s.status?"bg-green-500":"good"===s.status?"bg-blue-500":"average"===s.status?"bg-yellow-500":"bg-red-500"),style:{width:`${Math.min(s.value/s.target*100,100)}%`}})})})]},t))})]}),e.jsxs(s,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"space-y-3",children:l.recentActivity.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[p(s.impact),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.supplier}),e.jsx("p",{className:"text-sm text-gray-600",children:s.action})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:s.timestamp})})]},s.id))})]}),e.jsxs(s,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Insights"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-green-50 rounded-lg",children:[e.jsx(A,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Strong Performance"}),e.jsx("p",{className:"text-sm text-green-700",children:"8 suppliers are performing above target with excellent quality scores and on-time delivery rates."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 rounded-lg",children:[e.jsx(k,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-900",children:"Areas for Improvement"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"4 suppliers need attention in response time and cost efficiency metrics."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 rounded-lg",children:[e.jsx(v,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Positive Trends"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Overall supplier performance has improved by 12% this quarter compared to last quarter."})]})]})]})]})]}):null:null},G=()=>{const{currentUser:o}=a();O();const[m,x]=r.useState("list"),[p,u]=r.useState(!1),[h,j]=r.useState(""),[y,N]=r.useState("all"),[b,f]=r.useState(!1),[w,S]=r.useState(null),[C,T]=r.useState([]),[_,A]=r.useState([]),k=[{id:"list",label:"Supplier Directory",icon:e.jsx(d,{size:20}),description:"Manage suppliers and vendor relationships",color:"blue"},{id:"analytics",label:"Supplier Analytics",icon:e.jsx(B,{size:20}),description:"Analytics and insights for supplier performance",color:"green"},{id:"performance",label:"Performance Monitor",icon:e.jsx(v,{size:20}),description:"Monitor supplier performance and metrics",adminOnly:!0,color:"purple"}],E=k.filter(e=>!e.adminOnly||"admin"===(null==o?void 0:o.role)),z=k.find(e=>e.id===m),M=[{value:"all",label:"All Countries",icon:e.jsx(L,{size:16})},{value:"CN",label:"China",icon:e.jsx(L,{size:16})},{value:"TZ",label:"Tanzania",icon:e.jsx(L,{size:16})},{value:"AE",label:"Dubai (UAE)",icon:e.jsx(L,{size:16})},{value:"US",label:"United States",icon:e.jsx(L,{size:16})},{value:"KE",label:"Kenya",icon:e.jsx(L,{size:16})},{value:"UG",label:"Uganda",icon:e.jsx(L,{size:16})},{value:"RW",label:"Rwanda",icon:e.jsx(L,{size:16})},{value:"BD",label:"Bangladesh",icon:e.jsx(L,{size:16})},{value:"IN",label:"India",icon:e.jsx(L,{size:16})},{value:"PK",label:"Pakistan",icon:e.jsx(L,{size:16})},{value:"other",label:"Other",icon:e.jsx(L,{size:16})}];r.useEffect(()=>{R()},[]),r.useEffect(()=>{G()},[C,h,y]);const R=async()=>{u(!0);try{T([{id:"1",name:"Tech Solutions Ltd",company_name:"Tech Solutions Ltd",description:"Leading technology supplier",phone:"+254700123456",whatsapp:"+254700123456",city:"Nairobi",country:"KE",payment_account_type:"mobile_money",mobile_money_account:"+254700123456",created_at:"2024-01-01",updated_at:"2024-01-01"},{id:"2",name:"Global Electronics",company_name:"Global Electronics Co",description:"Electronics and components supplier",phone:"+86123456789",city:"Shenzhen",country:"CN",payment_account_type:"bank_account",bank_account_number:"1234567890",bank_name:"China Bank",created_at:"2024-01-02",updated_at:"2024-01-02"},{id:"3",name:"Dubai Trading Co",company_name:"Dubai Trading Company",description:"Trading and import/export services",phone:"+971501234567",city:"Dubai",country:"AE",payment_account_type:"bank_account",bank_account_number:"9876543210",bank_name:"Emirates Bank",created_at:"2024-01-03",updated_at:"2024-01-03"}])}catch(e){g.error("Failed to load suppliers")}finally{u(!1)}},G=r.useCallback(()=>{let e=C;h&&(e=e.filter(e=>{var s,t,a,r;return e.name.toLowerCase().includes(h.toLowerCase())||(null==(s=e.company_name)?void 0:s.toLowerCase().includes(h.toLowerCase()))||(null==(t=e.description)?void 0:t.toLowerCase().includes(h.toLowerCase()))||(null==(a=e.phone)?void 0:a.includes(h))||(null==(r=e.city)?void 0:r.toLowerCase().includes(h.toLowerCase()))})),"all"!==y&&(e=e.filter(e=>e.country===y)),A(e)},[C,h,y]),I={total:C.length,mobileMoney:C.filter(e=>"mobile_money"===e.payment_account_type).length,bankAccount:C.filter(e=>"bank_account"===e.payment_account_type).length,countries:new Set(C.map(e=>e.country).filter(Boolean)).size};return e.jsx(c,{pageName:"Unified Supplier Management",showDetails:!0,children:e.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{to:"/dashboard"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Supplier Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:(null==z?void 0:z.description)||"Comprehensive supplier management system"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(i,{options:M,value:y,onChange:e=>N(e),placeholder:"Filter by Country",className:"min-w-[150px]"}),e.jsx(l,{onSearch:j,placeholder:"Search suppliers...",className:"min-w-[200px]"}),e.jsx(t,{onClick:()=>{u(!0),R(),setTimeout(()=>{u(!1),g.success("Supplier data refreshed")},1e3)},icon:e.jsx(P,{size:18}),variant:"secondary",loading:p,disabled:p,children:"Refresh"}),e.jsx(t,{onClick:()=>{S(null),f(!0)},icon:e.jsx(D,{size:18}),className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:"Add Supplier"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs(s,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Supplier Categories"}),e.jsx("nav",{className:"space-y-2",children:E.map(s=>e.jsxs("button",{onClick:()=>{return e=s.id,void x(e);var e},className:"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-all duration-200 "+(m===s.id?`bg-${s.color}-500 text-white shadow-lg`:"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[e.jsx("div",{className:""+(m===s.id?"text-white":`text-${s.color}-500`),children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.label}),s.adminOnly&&e.jsx("div",{className:"text-xs opacity-75",children:"Admin Only"})]}),e.jsx(F,{size:16,className:""+(m===s.id?"text-white":"text-gray-400")})]},s.id))})]}),e.jsxs(s,{className:"p-4 mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Quick Stats"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Suppliers:"}),e.jsx("span",{className:"font-medium text-blue-600",children:I.total})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Mobile Money:"}),e.jsx("span",{className:"font-medium text-green-600",children:I.mobileMoney})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Bank Account:"}),e.jsx("span",{className:"font-medium text-purple-600",children:I.bankAccount})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Countries:"}),e.jsx("span",{className:"font-medium text-orange-600",children:I.countries})]})]})]})]}),e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(s,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:`text-${null==z?void 0:z.color}-500`,children:null==z?void 0:z.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:null==z?void 0:z.label}),e.jsx("p",{className:"text-sm text-gray-600",children:null==z?void 0:z.description})]})]}),p?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading suppliers..."})]}):e.jsx("div",{className:"space-y-6",children:(()=>{switch(m){case"list":default:return e.jsx(U,{isActive:!0,suppliers:_,loading:p,searchQuery:h,selectedCountry:y,showSupplierForm:b,editingSupplier:w,setShowSupplierForm:f,setEditingSupplier:S});case"analytics":return e.jsx(q,{isActive:!0,suppliers:C});case"performance":return e.jsx(K,{isActive:!0,suppliers:C})}})()})]})})]})]})})};export{G as default};
