import{j as e}from"./index-222cfb29.js";import{r as a}from"./vendor-a2ff445a.js";import{o as r,s,l as n,f as t,n as o,u as l,C as i}from"./forms-fd94c8fb.js";import{t as d}from"./zod-4c7d126c.js";import{ay as c,X as m,a1 as u,a as x,b as p}from"./ui-551a39a6.js";const h=r({name:s().min(1,"Supplier name is required").max(100,"Supplier name must be less than 100 characters"),company_name:s().max(100,"Company name must be less than 100 characters").optional(),description:s().max(500,"Description must be less than 500 characters").optional(),contact_person:s().max(100,"Contact person must be less than 100 characters").optional(),email:s().email("Invalid email format").max(100,"Email must be less than 100 characters").optional().or(n("")),phone:s().max(20,"Phone number must be less than 20 characters").optional(),whatsapp:s().max(20,"WhatsApp number must be less than 20 characters").optional(),wechat:s().max(50,"WeChat ID must be less than 50 characters").optional(),address:s().max(200,"Address must be less than 200 characters").optional(),city:s().max(50,"City must be less than 50 characters").optional(),country:s().max(50,"Country must be less than 50 characters").optional(),tax_id:s().max(50,"Tax ID must be less than 50 characters").optional(),payment_terms:s().max(200,"Payment terms must be less than 200 characters").optional(),preferred_currency:s().max(10,"Currency code must be less than 10 characters").optional(),exchange_rate:t([o().min(0,"Exchange rate must be positive"),s()]).optional().transform(e=>{if(""===e||null==e)return;const a="string"==typeof e?parseFloat(e):e;return isNaN(a)?void 0:a}),notes:s().max(1e3,"Notes must be less than 1000 characters").optional()}),b=({supplier:r,onSubmit:s,onCancel:n,onClose:t,loading:o=!1,className:b=""})=>{const[g,y]=a.useState(!1),{control:f,handleSubmit:j,formState:{errors:N,isDirty:v},watch:w,reset:S,setValue:E}=l({resolver:d(h),defaultValues:{name:(null==r?void 0:r.name)||"",company_name:(null==r?void 0:r.company_name)||"",description:(null==r?void 0:r.description)||"",contact_person:(null==r?void 0:r.contact_person)||"",email:(null==r?void 0:r.email)||"",phone:(null==r?void 0:r.phone)||"",whatsapp:(null==r?void 0:r.whatsapp)||"",wechat:(null==r?void 0:r.wechat)||"",address:(null==r?void 0:r.address)||"",city:(null==r?void 0:r.city)||"",country:(null==r?void 0:r.country)||"",tax_id:(null==r?void 0:r.tax_id)||"",payment_terms:(null==r?void 0:r.payment_terms)||"",preferred_currency:(null==r?void 0:r.preferred_currency)||"TZS",exchange_rate:(null==r?void 0:r.exchange_rate)||void 0,notes:(null==r?void 0:r.notes)||""}}),C=w("country"),D=w("preferred_currency");w("notes");const R={Tanzania:"TZS",UAE:"AED",China:"CNY","Hong Kong":"HKD",India:"INR",Kenya:"KES",USA:"USD",UK:"GBP",Germany:"EUR",France:"EUR",Japan:"JPY","South Korea":"KRW",Singapore:"SGD",Thailand:"THB",Vietnam:"VND",Malaysia:"MYR",Indonesia:"IDR",Philippines:"PHP",Turkey:"TRY",Egypt:"EGP","South Africa":"ZAR",Nigeria:"NGN",Ghana:"GHS",Uganda:"UGX",Rwanda:"RWF",Ethiopia:"ETB",Morocco:"MAD","Saudi Arabia":"SAR",Pakistan:"PKR"};a.useEffect(()=>{if(C&&!r){const e=R[C];e&&E("preferred_currency",e)}},[C,r,E]);const _=()=>{const e=n||t;e&&(v?confirm("Discard changes?")&&(S(),e()):e())},P=["Tanzania","UAE","China","Hong Kong","India","Kenya","USA","UK","Germany","France","Japan","South Korea","Singapore","Thailand","Vietnam","Malaysia","Indonesia","Philippines","Turkey","Egypt","South Africa","Nigeria","Ghana","Uganda","Rwanda","Ethiopia","Morocco","Saudi Arabia","Pakistan"],k=[{code:"TZS",name:"Tanzanian Shilling"},{code:"USD",name:"US Dollar"},{code:"EUR",name:"Euro"},{code:"GBP",name:"British Pound"},{code:"CNY",name:"Chinese Yuan"},{code:"AED",name:"UAE Dirham"},{code:"INR",name:"Indian Rupee"},{code:"KES",name:"Kenyan Shilling"},{code:"HKD",name:"Hong Kong Dollar"},{code:"JPY",name:"Japanese Yen"},{code:"KRW",name:"South Korean Won"},{code:"SGD",name:"Singapore Dollar"},{code:"THB",name:"Thai Baht"},{code:"VND",name:"Vietnamese Dong"},{code:"MYR",name:"Malaysian Ringgit"},{code:"IDR",name:"Indonesian Rupiah"},{code:"PHP",name:"Philippine Peso"},{code:"TRY",name:"Turkish Lira"},{code:"EGP",name:"Egyptian Pound"},{code:"ZAR",name:"South African Rand"},{code:"NGN",name:"Nigerian Naira"},{code:"GHS",name:"Ghanaian Cedi"},{code:"UGX",name:"Ugandan Shilling"},{code:"RWF",name:"Rwandan Franc"},{code:"ETB",name:"Ethiopian Birr"},{code:"MAD",name:"Moroccan Dirham"},{code:"SAR",name:"Saudi Riyal"},{code:"PKR",name:"Pakistani Rupee"}];return e.jsx("div",{className:`bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto ${b}`,children:e.jsxs("form",{onSubmit:j(async e=>{try{const a={...e,is_active:(null==r?void 0:r.is_active)??!0};await s(a),S(e)}catch(a){}}),className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(c,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:r?"Edit Supplier":"Add New Supplier"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Update supplier information"})]})]}),t&&e.jsx("button",{type:"button",onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(m,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Supplier Identity"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Supplier Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(i,{name:"name",control:f,render:({field:a})=>e.jsx("input",{type:"text",...a,placeholder:"Enter supplier name",className:"w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors text-gray-900 "+(N.name?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500")})}),N.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),e.jsx(i,{name:"company_name",control:f,render:({field:a})=>e.jsx("input",{type:"text",...a,placeholder:"Enter company name",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900"})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person"}),e.jsx(i,{name:"contact_person",control:f,render:({field:a})=>e.jsx("input",{type:"text",...a,placeholder:"Enter contact person name",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900"})})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Contact Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx(i,{name:"phone",control:f,render:({field:a})=>e.jsx("input",{type:"tel",...a,placeholder:"+255 123 456 789",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx(i,{name:"email",control:f,render:({field:a})=>e.jsx("input",{type:"email",...a,placeholder:"supplier@example.com",className:"w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors text-gray-900 "+(N.email?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500")})}),N.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{name:"whatsapp",control:f,render:({field:a})=>e.jsx("input",{type:"tel",...a,placeholder:"+255 123 456 789",className:"w-full px-4 py-3 pr-10 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900"})}),e.jsx(u,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WeChat ID"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{name:"wechat",control:f,render:({field:a})=>e.jsx("input",{type:"text",...a,placeholder:"Enter WeChat ID",className:"w-full px-4 py-3 pr-10 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900"})}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-green-600 rounded-sm flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"W"})})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsx(i,{name:"country",control:f,render:({field:a})=>e.jsxs("select",{...a,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900",children:[e.jsx("option",{value:"",children:"Select country"}),P.map(a=>e.jsx("option",{value:a,children:a},a))]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx(i,{name:"city",control:f,render:({field:a})=>e.jsx("input",{type:"text",...a,placeholder:"Enter city",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900"})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx(i,{name:"address",control:f,render:({field:a})=>e.jsx("textarea",{...a,rows:2,placeholder:"Enter full street address",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900 resize-none"})})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Financial Terms"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Currency"}),e.jsx(i,{name:"preferred_currency",control:f,render:({field:a})=>e.jsxs("select",{...a,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900",children:[e.jsx("option",{value:"",children:"Select currency"}),k.map(a=>e.jsxs("option",{value:a.code,children:[a.code," - ",a.name]},a.code))]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange Rate"}),e.jsx(i,{name:"exchange_rate",control:f,render:({field:a})=>{var r;return e.jsx("input",{type:"number",step:"0.01",min:"0",value:(null==(r=a.value)?void 0:r.toString())||"",onChange:e=>{const r=e.target.value;if(""===r)a.onChange(void 0);else{const e=parseFloat(r);a.onChange(isNaN(e)?void 0:e)}},placeholder:`1 ${D||"USD"} = ? TZS`,className:"w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors text-gray-900 "+(N.exchange_rate?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500")})}}),N.exchange_rate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.exchange_rate.message})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{type:"button",onClick:()=>y(!g),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors border-2 border-gray-200",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Advanced Options"}),g?e.jsx(x,{className:"w-5 h-5 text-gray-600"}):e.jsx(p,{className:"w-5 h-5 text-gray-600"})]}),g&&e.jsx("div",{className:"mt-4 p-4 border-2 border-gray-200 rounded-lg bg-gray-50/50",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax ID"}),e.jsx(i,{name:"tax_id",control:f,render:({field:a})=>e.jsx("input",{type:"text",...a,placeholder:"Enter tax identification number",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900 bg-white"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms"}),e.jsx(i,{name:"payment_terms",control:f,render:({field:a})=>e.jsx("input",{type:"text",...a,placeholder:"e.g., Net 30, Net 60, COD",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900 bg-white"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx(i,{name:"description",control:f,render:({field:a})=>e.jsx("textarea",{...a,rows:3,placeholder:"Brief description of the supplier",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900 resize-none bg-white"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx(i,{name:"notes",control:f,render:({field:a})=>e.jsx("textarea",{...a,rows:3,placeholder:"Any additional information about this supplier",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors text-gray-900 resize-none bg-white"})})]})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:_,disabled:o,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o||!v,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Saving...":r?"Update Supplier":"Create Supplier"})]})]})})};export{b as S};
