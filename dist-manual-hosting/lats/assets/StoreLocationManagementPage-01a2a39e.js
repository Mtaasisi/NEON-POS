import{j as e,G as s}from"./index-222cfb29.js";import{r as t}from"./vendor-a2ff445a.js";import{M as a}from"./Modal-ccfa5014.js";import{s as i}from"./storeLocationApi-de3f7bfa.js";import{e as l}from"./ui-551a39a6.js";import"./supabase-7e851d02.js";import"./routing-a2f0f6d2.js";import"./useBodyScrollLock-0216d39f.js";const n=()=>{const[n,r]=t.useState([]),[o,c]=t.useState(null),[d,u]=t.useState(!0);t.useState(!1),t.useState(null),t.useState(null);const[m,x]=t.useState(null);t.useState(!1);const[j,h]=t.useState([]),[p,f]=t.useState([]),[y,g]=t.useState({});t.useState(""),t.useState(!1),t.useEffect(()=>{S()},[]),t.useEffect(()=>{v()},[y]);const S=async()=>{try{u(!0);const[e,s,t,a]=await Promise.all([i.getAll(),i.getStats(),i.getCities(),i.getRegions()]);r(e),c(s),h(t),f(a)}catch(e){}finally{u(!1)}},v=async()=>{try{const e=await i.getAll(y);r(e)}catch(e){}};return n.filter(e=>{if(y.search){const s=y.search.toLowerCase();return e.name.toLowerCase().includes(s)||e.code.toLowerCase().includes(s)||e.city.toLowerCase().includes(s)||e.address.toLowerCase().includes(s)}return!0}),d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading store locations..."})]})}):e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsx(a,{isOpen:!!m,onClose:()=>x(null),title:"Delete Location",size:"md",children:m&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{className:"w-6 h-6 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Are you sure you want to delete this location?"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This action cannot be undone. All data associated with this location will be permanently removed."})]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:m.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[m.address,", ",m.city]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(s,{variant:"outline",onClick:()=>x(null),children:"Cancel"}),e.jsx(s,{variant:"destructive",onClick:()=>(async e=>{try{await i.delete(e.id),x(null),await S()}catch(s){alert(s instanceof Error?s.message:"Failed to delete location")}})(m),children:"Delete Location"})]})]})})})};export{n as StoreLocationManagementPage,n as default};
