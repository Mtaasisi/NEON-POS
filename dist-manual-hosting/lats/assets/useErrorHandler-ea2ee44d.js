import{r}from"./vendor-a2ff445a.js";const e=(e={})=>{const{maxRetries:o=3,showToast:t=!0,logToConsole:n=!0,onError:a,onRetry:s}=e,[i,u]=r.useState({hasError:!1,error:null,errorMessage:null,retryCount:0,isLoading:!1}),c=r.useCallback((r,e)=>{const o=r instanceof Error?r:new Error(r),t=`${o.message||"An unexpected error occurred"}${e?` (${e})`:""}`;u(r=>({...r,hasError:!0,error:o,errorMessage:t,isLoading:!1})),a&&a(o)},[n,t,a]),l=r.useCallback(()=>{u({hasError:!1,error:null,errorMessage:null,retryCount:0,isLoading:!1})},[]),g=r.useCallback(async r=>{const{retryCount:e}=i;if(e>=o)return c(new Error(`Maximum retry attempts (${o}) exceeded`)),!1;u(r=>({...r,isLoading:!0,retryCount:r.retryCount+1}));try{return await r(),l(),s&&s(),!0}catch(t){const r=t instanceof Error?t:new Error(String(t));return c(r,`Retry attempt ${e+1}`),!1}},[i.retryCount,o,c,l,t,s]),d=r.useCallback(async(r,e)=>{u(r=>({...r,isLoading:!0}));try{const e=await r();return u(r=>({...r,isLoading:!1})),e}catch(o){const r=o instanceof Error?o:new Error(String(o));return c(r,e),null}},[c]),y=r.useCallback(r=>{u(e=>({...e,isLoading:r}))},[]);return{errorState:i,handleError:c,clearError:l,retry:g,withErrorHandling:d,setLoading:y}};export{e as u};
