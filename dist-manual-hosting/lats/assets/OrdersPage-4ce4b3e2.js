import{j as e}from"./index-222cfb29.js";import{r as s}from"./vendor-a2ff445a.js";import{c as t,M as a}from"./customerPortalService-ebbdd244.js";import{z as r,x as l,u as i,Y as c,ao as d}from"./ui-551a39a6.js";import{a as n}from"./routing-a2f0f6d2.js";import"./supabase-7e851d02.js";const o=()=>{const o=n(),[m,x]=s.useState([]),[u,g]=s.useState(!0),[p,h]=s.useState("all");s.useEffect(()=>{j()},[]);const j=async()=>{try{g(!0);const e=localStorage.getItem("customer_id");if(e){const s=await t.getCustomerOrders(e);x(s)}else x([])}catch(e){r.error("Failed to load orders")}finally{g(!1)}},y=m.filter(e=>"all"===p||e.status===p),b=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return u?e.jsx(a,{title:"My Orders",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsxs(a,{title:"My Orders",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-14 z-40",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","pending","processing","completed","cancelled"].map(s=>e.jsx("button",{onClick:()=>h(s),className:"px-4 py-2 rounded-full font-medium whitespace-nowrap transition-colors "+(p===s?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:s.charAt(0).toUpperCase()+s.slice(1)},s))})}),0===y.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[e.jsx(l,{size:64,className:"text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-600 text-center mb-4",children:"all"===p?"You haven't placed any orders yet":`No ${p} orders`}),e.jsx("button",{onClick:()=>o("/customer-portal/products"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium",children:"Start Shopping"})]}):e.jsx("div",{className:"p-4 space-y-3",children:y.map(s=>{return e.jsxs("button",{onClick:()=>o(`/customer-portal/orders/${s.id}`),className:"w-full bg-white rounded-xl p-4 shadow-sm hover:shadow-md active:scale-98 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 mb-1",children:s.orderNumber}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(i,{size:14}),(t=s.date,new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${b(s.status)}`,children:s.status.toUpperCase()})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-3 mb-3",children:[s.items.slice(0,2).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.productName,className:"w-full h-full object-cover rounded-lg"}):e.jsx(l,{size:20,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:s.productName}),s.variantName&&e.jsx("div",{className:"text-xs text-gray-600",children:s.variantName}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Qty: ",s.quantity]})]})]},t)),s.items.length>2&&e.jsxs("div",{className:"text-xs text-blue-600 font-medium mt-2",children:["+",s.items.length-2," more items"]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 pt-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Amount"}),e.jsxs("div",{className:"font-bold text-gray-900",children:["Tsh ",s.totalAmount.toLocaleString()]})]}),s.deliveryStatus&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(c,{size:14,className:"text-gray-600"}),e.jsx("span",{className:"text-gray-600 capitalize",children:s.deliveryStatus})]})]}),e.jsx(d,{size:20,className:"text-gray-400"})]})]},s.id);var t})})]})};export{o as default};
