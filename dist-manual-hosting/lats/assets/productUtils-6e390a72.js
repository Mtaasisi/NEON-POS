const t=(t,e)=>{const s={product:t,variants:e,exportedAt:(new Date).toISOString(),version:"1.0"};return JSON.stringify(s,null,2)},e=t=>{var e,s;const i=[];(null==(e=t.name)?void 0:e.trim())||i.push("Product name is required"),(null==(s=t.sku)?void 0:s.trim())||i.push("SKU is required");t.categoryId||t.category_id||i.push("Category is required");const r=t.price??t.sellingPrice??t.selling_price??0,a=t.costPrice??t.cost_price??0,n=t.stockQuantity??t.stock_quantity??0;return r<0&&i.push("Price cannot be negative"),a<0&&i.push("Cost price cannot be negative"),n<0&&i.push("Stock quantity cannot be negative"),{isValid:0===i.length,errors:i}},s=t=>t.variants&&0!==t.variants.length?t.variants[0]:null,i=t=>t.variants&&t.variants.length>1,r=t=>t.variants&&0!==t.variants.length?t.variants.reduce((t,e)=>t+(e.stockQuantity??e.quantity??0),0):t.stockQuantity??t.totalQuantity??0,a=t=>{var e;if(r(t)<=0)return"out-of-stock";return(null==(e=t.variants)?void 0:e.some(t=>(t.stockQuantity??t.quantity??0)<=5))?"low":"normal"},n=t=>{var e,s,i;const r=[],a=[],n=[];(null==(e=t.name)?void 0:e.trim())||r.push("Product name"),(null==(s=t.sku)?void 0:s.trim())||r.push("SKU"),t.categoryId||t.category||r.push("Category"),t.supplierId||t.supplier||r.push("Supplier"),t.variants&&0!==t.variants.length?t.variants.forEach((t,e)=>{var s;(null==(s=t.sku)?void 0:s.trim())||a.push(`Variant ${e+1} missing SKU`),(!t.sellingPrice||t.sellingPrice<=0)&&a.push(`Variant ${e+1} missing or invalid selling price`),void 0!==t.quantity&&null!==t.quantity||a.push(`Variant ${e+1} missing stock quantity`)}):r.push("Product variants"),t.images&&0!==t.images.length||(a.push("No product images"),n.push("Add product images for better customer experience"));0===((null==(i=t.variants)?void 0:i.reduce((t,e)=>t+(e.quantity||0),0))||0)&&(a.push("No stock available"),n.push("Add stock quantities to make products available for sale")),r.includes("Category")&&n.push("Assign a category to help with product organization and filtering"),r.includes("Supplier")&&n.push("Add supplier information for purchase order management"),r.includes("Product variants")&&n.push("Create product variants with different sizes, colors, or specifications");const o=8-r.length-.5*a.length,u=Math.max(0,Math.round(o/8*100));return{isValid:0===r.length,missingFields:r,warnings:a,recommendations:n,completenessScore:u}},o=t=>{if(!t||0===t.length)return{totalProducts:0,validProducts:0,invalidProducts:0,averageCompleteness:0,commonMissingFields:{},recommendations:[]};const e=t.map(n),s=e.filter(t=>t.isValid).length,i=t.length-s,r=Math.round(e.reduce((t,e)=>t+e.completenessScore,0)/t.length),a={};e.forEach(t=>{t.missingFields.forEach(t=>{a[t]=(a[t]||0)+1})});const o=[];return Object.entries(a).sort(([,t],[,e])=>e-t).slice(0,3).forEach(([e,s])=>{const i=Math.round(s/t.length*100);if(i>30)switch(e){case"Category":o.push(`Add categories to ${s} products (${i}%) to improve organization`);break;case"Supplier":o.push(`Add supplier information to ${s} products (${i}%) for purchase management`);break;case"Product variants":o.push(`Create variants for ${s} products (${i}%) to enable different options`);break;case"SKU":o.push(`Add SKU codes to ${s} products (${i}%) for better tracking`);break;default:o.push(`Complete ${e} for ${s} products (${i}%)`)}}),{totalProducts:t.length,validProducts:s,invalidProducts:i,averageCompleteness:r,commonMissingFields:a,recommendations:o}};export{a,r as b,e as c,t as e,s as g,i,o as v};
