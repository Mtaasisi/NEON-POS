import{a as N,j as e}from"./index-61458a34.js";import{r}from"./vendor-36d2c7c1.js";import{c as v,M as m}from"./customerPortalService-0d37743c.js";import{z as w,u as x,r as S,Q as z,an as C}from"./ui-28e30067.js";import{a as L}from"./routing-eb8c310c.js";import"./supabase-cf010ec4.js";const A=()=>{const i=L(),{startLoading:g,completeLoading:c,failLoading:u}=N(),[p,n]=r.useState([]),[h,o]=r.useState(!0),[a,f]=r.useState("all");r.useEffect(()=>{y()},[]);const y=async()=>{const t=g("Loading orders...");try{o(!0);const s=localStorage.getItem("customer_id");if(s){const l=await v.getCustomerOrders(s);n(l),c(t)}else n([]),c(t)}catch(s){console.error("Error loading orders:",s),w.error("Failed to load orders"),u(t,"Failed to load orders")}finally{o(!1)}},d=p.filter(t=>a==="all"||t.status===a),b=t=>{switch(t){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"processing":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},j=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return h?e.jsx(m,{title:"My Orders",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsxs(m,{title:"My Orders",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-14 z-40",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:["all","pending","processing","completed","cancelled"].map(t=>e.jsx("button",{onClick:()=>f(t),className:`px-4 py-2 rounded-full font-medium whitespace-nowrap transition-colors ${a===t?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})}),d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[e.jsx(x,{size:64,className:"text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No orders found"}),e.jsx("p",{className:"text-gray-600 text-center mb-4",children:a==="all"?"You haven't placed any orders yet":`No ${a} orders`}),e.jsx("button",{onClick:()=>i("/customer-portal/products"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium",children:"Start Shopping"})]}):e.jsx("div",{className:"p-4 space-y-3",children:d.map(t=>e.jsxs("button",{onClick:()=>i(`/customer-portal/orders/${t.id}`),className:"w-full bg-white rounded-xl p-4 shadow-sm hover:shadow-md active:scale-98 transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900 mb-1",children:t.orderNumber}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(S,{size:14}),j(t.date)]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${b(t.status)}`,children:t.status.toUpperCase()})]}),e.jsxs("div",{className:"border-t border-gray-100 pt-3 mb-3",children:[t.items.slice(0,2).map((s,l)=>e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0",children:s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.productName,className:"w-full h-full object-cover rounded-lg"}):e.jsx(x,{size:20,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-1",children:s.productName}),s.variantName&&e.jsx("div",{className:"text-xs text-gray-600",children:s.variantName}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Qty: ",s.quantity]})]})]},l)),t.items.length>2&&e.jsxs("div",{className:"text-xs text-blue-600 font-medium mt-2",children:["+",t.items.length-2," more items"]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 pt-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Total Amount"}),e.jsxs("div",{className:"font-bold text-gray-900",children:["Tsh ",t.totalAmount.toLocaleString()]})]}),t.deliveryStatus&&e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(z,{size:14,className:"text-gray-600"}),e.jsx("span",{className:"text-gray-600 capitalize",children:t.deliveryStatus})]})]}),e.jsx(C,{size:20,className:"text-gray-400"})]})]},t.id))})]})};export{A as default};
