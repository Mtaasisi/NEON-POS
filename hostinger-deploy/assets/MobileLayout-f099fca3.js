import{j as e,s as I,u as H,y as F}from"./index-61458a34.js";import{r as d,b as q}from"./vendor-36d2c7c1.js";import{m as N}from"./mobileOfflineCache-ee6f7212.js";import{z as w,b2 as O,bA as D,W as L,e as T,R as A,d as E,u as $,p as _,X as B,v as z,O as Q,al as P,b_ as Y,U as R,a2 as K,a8 as U,bs as X,aK as G,b as J,ax as V,N as Z,H as ee,a7 as te,a3 as se}from"./ui-28e30067.js";import{u as M}from"./useMobileBranch-d96f1509.js";import{a as W,u as ae,O as re}from"./routing-eb8c310c.js";import"./supabase-cf010ec4.js";const ie=({children:g})=>{const[o,p]=d.useState(!1),[r,n]=d.useState(!0),[s,i]=d.useState({step:"Starting...",progress:0,total:7,error:!1,message:"Initializing mobile app..."}),[x,m]=d.useState(navigator.onLine),[c,u]=d.useState(!1);d.useEffect(()=>{l();const t=()=>m(!0),f=()=>m(!1);return window.addEventListener("online",t),window.addEventListener("offline",f),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",f)}},[]);const l=async()=>{console.log("ðŸš€ [MobileAppInitializer] Starting mobile app initialization...");try{i({step:"Database",progress:1,total:7,error:!1,message:"Initializing local database..."}),await new Promise(C=>setTimeout(C,500)),await N.init(),i({step:"Checking Cache",progress:2,total:7,error:!1,message:"Checking cached data..."});const t=await N.getCacheStats();console.log("ðŸ“Š [MobileAppInitializer] Cache stats:",t);const f=t.products.count>0,y=t.customers.count>0,h=t.branches.count>0,v=t.categories.count>0,k=f||y;u(k);const j=navigator.onLine;if(i({step:"Network",progress:3,total:7,error:!1,message:j?"Connected to internet":"No internet connection"}),j){i({step:"Products",progress:4,total:7,error:!1,message:`Syncing products...${f?` (${t.products.count} cached)`:""}`});try{await N.syncProducts()}catch(S){console.warn("âš ï¸ Failed to sync products:",S)}i({step:"Customers",progress:5,total:7,error:!1,message:`Syncing customers...${y?` (${t.customers.count} cached)`:""}`});try{await N.syncCustomers()}catch(S){console.warn("âš ï¸ Failed to sync customers:",S)}i({step:"Settings",progress:6,total:7,error:!1,message:"Syncing branches, categories, and settings..."});try{await Promise.all([N.syncBranches(),N.syncCategories(),N.syncPaymentAccounts(),N.syncRecentSales()])}catch(S){console.warn("âš ï¸ Failed to sync some data:",S)}i({step:"Complete",progress:7,total:7,error:!1,message:"All data synced successfully!"});const C=await N.getCacheStats();console.log("âœ… [MobileAppInitializer] Final cache stats:",C),w.success("Mobile app ready!",{duration:2e3})}else if(k)i({step:"Ready",progress:7,total:7,error:!1,message:"Working offline with cached data"}),w("Working offline with cached data",{icon:"ðŸ“µ",duration:3e3});else{i({step:"Error",progress:3,total:7,error:!0,message:"No internet connection and no cached data. Please connect to the internet for first-time setup."});return}await new Promise(C=>setTimeout(C,1e3)),p(!0),n(!1),console.log("âœ… [MobileAppInitializer] Mobile app initialized successfully")}catch(t){console.error("âŒ [MobileAppInitializer] Initialization failed:",t),i({step:"Error",progress:s.progress,total:7,error:!0,message:`Initialization failed: ${t instanceof Error?t.message:"Unknown error"}`})}},a=()=>{n(!0),i({step:"Retrying...",progress:0,total:7,error:!1,message:"Retrying initialization..."}),l()},b=()=>{c&&(p(!0),n(!1),w("Working offline with limited data",{icon:"ðŸ“µ",duration:3e3}))};return o?e.jsx(e.Fragment,{children:g}):e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-3xl mx-auto mb-4 flex items-center justify-center shadow-lg",children:e.jsx(O,{size:40,className:"text-white",strokeWidth:2})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"LATS POS Mobile"}),e.jsx("p",{className:"text-gray-600",children:"Setting up your mobile app..."})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-4",children:[e.jsx("div",{className:"flex items-center justify-center gap-3 mb-6 pb-4 border-b border-gray-100",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-xl flex items-center justify-center",children:e.jsx(D,{size:20,className:"text-green-600",strokeWidth:2.5})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Connected"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Syncing with server"})]}),e.jsx("div",{className:"ml-auto w-2 h-2 bg-green-500 rounded-full animate-pulse"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 h-10 bg-orange-50 rounded-xl flex items-center justify-center",children:e.jsx(L,{size:20,className:"text-orange-600",strokeWidth:2.5})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Offline"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Using cached data"})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.step}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.progress," / ",s.total]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:e.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${s.error?"bg-red-500":"bg-blue-500"}`,style:{width:`${s.progress/s.total*100}%`}})})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-xl",children:[s.error?e.jsx(T,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5",strokeWidth:2}):r?e.jsx(A,{size:20,className:"text-blue-500 flex-shrink-0 mt-0.5 animate-spin",strokeWidth:2}):e.jsx(E,{size:20,className:"text-green-500 flex-shrink-0 mt-0.5",strokeWidth:2}),e.jsx("p",{className:`text-sm ${s.error?"text-red-700":"text-gray-700"}`,children:s.message})]}),!s.error&&r&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{icon:O,label:"DB",step:1},{icon:$,label:"Products",step:4},{icon:_,label:"Customers",step:5},{icon:E,label:"Done",step:7}].map((t,f)=>{const y=t.icon,h=s.progress>=t.step,v=s.progress===t.step;return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`w-10 h-10 mx-auto rounded-lg flex items-center justify-center mb-1 transition-all ${h?"bg-blue-500 text-white":v?"bg-blue-100 text-blue-600 animate-pulse":"bg-gray-100 text-gray-400"}`,children:e.jsx(y,{size:18,strokeWidth:2.5})}),e.jsx("div",{className:`text-xs ${h?"text-gray-900 font-medium":"text-gray-400"}`,children:t.label})]},f)})})})]}),s.error&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:a,className:"w-full bg-blue-500 hover:bg-blue-600 active:bg-blue-700 text-white px-6 py-3.5 rounded-xl font-semibold transition-all shadow-lg flex items-center justify-center gap-2",children:[e.jsx(A,{size:20,strokeWidth:2.5}),"Retry"]}),c&&e.jsxs("button",{onClick:b,className:"w-full bg-gray-100 hover:bg-gray-200 active:bg-gray-300 text-gray-700 px-6 py-3.5 rounded-xl font-semibold transition-all flex items-center justify-center gap-2",children:[e.jsx(L,{size:20,strokeWidth:2.5}),"Continue Offline"]})]}),!s.error&&e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:x?"This may take a few moments on first launch":"Connect to the internet for full functionality"})]})})},le=({isOpen:g,onClose:o})=>{const p=W(),{currentBranch:r}=M(),[n,s]=d.useState(""),[i,x]=d.useState([]),[m,c]=d.useState(!1);d.useEffect(()=>{const b=setTimeout(async()=>{if(!n.trim()||n.length<2){x([]);return}c(!0);try{const t=n.toLowerCase(),f=[];let y=I.from("lats_products").select("id, name, sku").eq("is_active",!0).or(`name.ilike.%${t}%,sku.ilike.%${t}%`).limit(5);r&&(y=y.eq("branch_id",r.id));const{data:h}=await y;h&&h.forEach(j=>{f.push({id:j.id,type:"product",title:j.name,subtitle:`SKU: ${j.sku}`,path:`/mobile/inventory/${j.id}`})});let v=I.from("customers").select("id, name, phone").or(`name.ilike.%${t}%,phone.ilike.%${t}%`).limit(5);r&&(v=v.eq("branch_id",r.id));const{data:k}=await v;k&&k.forEach(j=>{f.push({id:j.id,type:"customer",title:j.name,subtitle:j.phone,path:`/mobile/clients/${j.id}`})}),x(f)}catch(t){console.error("Search error:",t)}finally{c(!1)}},300);return()=>clearTimeout(b)},[n,r]);const u=a=>{p(a.path),o(),s("")},l=a=>{switch(a){case"product":return $;case"customer":return _;case"sale":return Q;default:return $}};return g?e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onClick:o,children:e.jsxs("div",{className:"bg-white h-full flex flex-col",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 safe-area-inset-top",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:o,className:"p-2 -ml-2 active:bg-gray-100 rounded-full transition-all",children:e.jsx(B,{size:24,className:"text-gray-600",strokeWidth:2.5})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search products, customers...",value:n,onChange:a=>s(a.target.value),autoFocus:!0,className:"w-full pl-10 pr-4 py-2.5 bg-gray-100 rounded-xl border-0 focus:outline-none focus:ring-2 focus:ring-blue-500 text-[16px]"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[m&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),!m&&n.length>0&&i.length===0&&e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx(z,{size:48,className:"mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-[16px]",children:"No results found"}),e.jsx("p",{className:"text-gray-400 text-[14px] mt-1",children:"Try a different search term"})]}),!m&&i.length>0&&e.jsx("div",{className:"py-2",children:i.map(a=>{const b=l(a.type);return e.jsxs("button",{onClick:()=>u(a),className:"w-full px-4 py-3 flex items-center gap-3 hover:bg-gray-50 active:bg-gray-100 transition-colors border-b border-gray-100",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(b,{size:20,className:"text-blue-500",strokeWidth:2})}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsx("div",{className:"text-[16px] font-medium text-gray-900 truncate",children:a.title}),e.jsx("div",{className:"text-[14px] text-gray-500 truncate",children:a.subtitle})]}),e.jsx("div",{className:"px-2 py-1 bg-gray-100 rounded-md text-[11px] text-gray-600 font-medium uppercase",children:a.type})]},a.id)})}),!n&&e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx(z,{size:48,className:"mx-auto text-gray-300 mb-3"}),e.jsx("p",{className:"text-gray-500 text-[16px]",children:"Start typing to search"}),e.jsx("p",{className:"text-gray-400 text-[14px] mt-1",children:"Find products and customers quickly"})]})]})]})}):null},ne=({isOpen:g,onClose:o})=>{const p=W(),{currentBranch:r}=M(),[n,s]=d.useState([]),[i,x]=d.useState(!0);d.useEffect(()=>{g&&m()},[g,r]);const m=async()=>{x(!0);try{let t=I.from("lats_products").select("id, name, stock_quantity, min_stock_level").eq("is_active",!0);r&&(t=t.eq("branch_id",r.id));const{data:f}=await t,y=[];f&&f.forEach(h=>{h.stock_quantity===0?y.push({id:`out-${h.id}`,type:"out_of_stock",title:"Out of Stock",message:`${h.name} is out of stock`,time:"Now",read:!1,actionPath:`/mobile/inventory/${h.id}`}):h.stock_quantity<=(h.min_stock_level||5)&&y.push({id:`low-${h.id}`,type:"low_stock",title:"Low Stock Alert",message:`${h.name} is running low (${h.stock_quantity} left)`,time:"Now",read:!1,actionPath:`/mobile/inventory/${h.id}`})}),s(y)}catch(t){console.error("Error loading notifications:",t)}finally{x(!1)}},c=t=>{t.actionPath&&(p(t.actionPath),o())},u=()=>{s(n.map(t=>({...t,read:!0})))},l=t=>{switch(t){case"low_stock":return Y;case"out_of_stock":return T;case"sale":return $;default:return P}},a=t=>{switch(t){case"low_stock":return"bg-orange-50 text-orange-600";case"out_of_stock":return"bg-red-50 text-red-600";case"sale":return"bg-green-50 text-green-600";default:return"bg-blue-50 text-blue-600"}};if(!g)return null;const b=n.filter(t=>!t.read).length;return e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onClick:o,children:e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-sm bg-white shadow-2xl flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-4 safe-area-inset-top",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-[24px] font-bold text-gray-900",children:"Notifications"}),e.jsx("button",{onClick:o,className:"p-2 -mr-2 active:bg-gray-100 rounded-full transition-all",children:e.jsx(B,{size:24,className:"text-gray-600",strokeWidth:2.5})})]}),b>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-[14px] text-gray-500",children:[b," unread"]}),e.jsx("button",{onClick:u,className:"text-[14px] text-blue-500 font-medium active:text-blue-700",children:"Mark all as read"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[i&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),!i&&n.length===0&&e.jsxs("div",{className:"text-center py-12 px-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(P,{size:32,className:"text-gray-400",strokeWidth:1.5})}),e.jsx("p",{className:"text-gray-500 text-[16px] font-medium",children:"No notifications"}),e.jsx("p",{className:"text-gray-400 text-[14px] mt-1",children:"You're all caught up!"})]}),!i&&n.length>0&&e.jsx("div",{className:"py-2",children:n.map(t=>{const f=l(t.type),y=a(t.type);return e.jsxs("button",{onClick:()=>c(t),className:`w-full px-4 py-3 flex items-start gap-3 hover:bg-gray-50 active:bg-gray-100 transition-colors border-b border-gray-100 ${t.read?"":"bg-blue-50/30"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${y}`,children:e.jsx(f,{size:20,strokeWidth:2})}),e.jsxs("div",{className:"flex-1 text-left min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[15px] font-semibold text-gray-900",children:t.title}),!t.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),e.jsx("p",{className:"text-[14px] text-gray-600 mb-1",children:t.message}),e.jsx("span",{className:"text-[12px] text-gray-400",children:t.time})]})]},t.id)})})]})]})})},oe=({isOpen:g,onClose:o})=>{var m;const p=W(),{currentUser:r,logout:n}=H(),{currentBranch:s}=F(),i=async()=>{try{await n(),w.success("Logged out successfully"),p("/login"),o()}catch(c){console.error("Logout error:",c),w.error("Failed to logout")}};if(!g)return null;const x=[{icon:U,label:"Settings",onClick:()=>{p("/mobile/more"),o()}},{icon:X,label:"Help & Support",onClick:()=>{w("Help & Support coming soon!"),o()}},{icon:G,label:"Logout",onClick:i,destructive:!0}];return e.jsx("div",{className:"fixed inset-0 bg-black/40 z-50 flex items-end",onClick:o,children:e.jsxs("div",{className:"w-full bg-white rounded-t-3xl max-h-[70vh] flex flex-col animate-slide-up safe-area-inset-bottom",onClick:c=>c.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center pt-2 pb-1",children:e.jsx("div",{className:"w-10 h-1 bg-gray-300 rounded-full"})}),e.jsxs("div",{className:"px-6 py-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(R,{size:32,className:"text-white",strokeWidth:2})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-[20px] font-bold text-gray-900",children:((m=r==null?void 0:r.email)==null?void 0:m.split("@")[0])||"User"}),e.jsx("p",{className:"text-[14px] text-gray-500 mt-0.5",children:(r==null?void 0:r.email)||"user@example.com"}),(r==null?void 0:r.role)&&e.jsxs("div",{className:"inline-flex items-center gap-1.5 mt-2 px-2.5 py-1 bg-blue-50 rounded-full",children:[e.jsx(K,{size:12,className:"text-blue-600"}),e.jsx("span",{className:"text-[12px] font-medium text-blue-600 capitalize",children:r.role})]})]})]}),s&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-xl",children:[e.jsx("p",{className:"text-[12px] text-gray-500 mb-1",children:"Current Branch"}),e.jsx("p",{className:"text-[15px] font-semibold text-gray-900",children:s.name}),s.city&&e.jsx("p",{className:"text-[13px] text-gray-500",children:s.city})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto py-2",children:x.map((c,u)=>{const l=c.icon;return e.jsxs("button",{onClick:c.onClick,className:`w-full px-6 py-4 flex items-center gap-3 hover:bg-gray-50 active:bg-gray-100 transition-colors ${c.destructive?"text-red-500":"text-gray-900"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${c.destructive?"bg-red-50":"bg-gray-100"}`,children:e.jsx(l,{size:20,strokeWidth:2.5})}),e.jsx("span",{className:"text-[16px] font-medium",children:c.label})]},u)})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("button",{onClick:o,className:"w-full py-3 bg-gray-100 hover:bg-gray-200 active:bg-gray-300 rounded-xl text-[16px] font-semibold text-gray-900 transition-colors",children:"Close"})})]})})},ce=({className:g=""})=>{const{currentBranch:o,availableBranches:p,loading:r,switchBranch:n}=M(),[s,i]=d.useState(!1),x=d.useRef(null),[m,c]=d.useState({top:0,left:0,width:0});if(d.useEffect(()=>{if(s&&x.current){const l=x.current.getBoundingClientRect(),a=window.innerWidth,b=Math.max(l.width,280),t=Math.min(l.left,a-b-16);c({top:l.bottom,left:t,width:b})}},[s]),r||!o)return e.jsx("div",{className:`flex items-center gap-3 px-4 py-2.5 bg-white rounded-xl border border-gray-200 shadow-sm ${g}`,children:e.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded-md w-32"})});if(p.length<=1)return e.jsx("div",{className:`flex items-center px-4 py-2.5 bg-white rounded-xl border border-gray-200 shadow-sm ${g}`,children:e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"text-[15px] font-normal text-gray-900 truncate",children:o.name})})});const u=async l=>{await n(l),i(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{ref:x,onClick:()=>i(!s),className:`flex items-center justify-between px-4 py-2.5 bg-white border border-gray-200 shadow-sm active:bg-gray-50 transition-all ${s?"rounded-t-xl border-b-0":"rounded-xl"} ${g}`,style:{WebkitTapHighlightColor:"transparent"},children:[e.jsx("div",{className:"flex-1 min-w-0 text-left",children:e.jsx("div",{className:"text-[15px] font-normal text-gray-900 truncate",children:o.name})}),e.jsx(J,{size:16,className:`text-gray-400 flex-shrink-0 transition-transform duration-200 ${s?"rotate-180":""}`,strokeWidth:2})]}),s&&q.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>i(!1),style:{backgroundColor:"transparent"}}),e.jsx("div",{className:"fixed z-[9999] bg-white rounded-b-xl border border-gray-200 border-t-0 shadow-2xl overflow-hidden animate-dropdown",style:{top:`${m.top}px`,left:`${m.left}px`,width:`${m.width}px`,maxHeight:"320px"},children:e.jsx("div",{className:"overflow-y-auto max-h-[320px]",children:p.map((l,a)=>{const b=l.id===o.id,t=a===p.length-1;return e.jsxs("button",{onClick:()=>u(l.id),className:`w-full flex items-center justify-between px-4 py-3 active:bg-gray-50 transition-colors ${t?"":"border-b border-gray-100"} ${b?"bg-blue-50/50":"bg-white"}`,style:{WebkitTapHighlightColor:"transparent"},children:[e.jsxs("div",{className:"flex-1 text-left pr-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`text-[15px] ${b?"font-medium text-gray-900":"font-normal text-gray-900"}`,children:l.name}),l.is_main&&e.jsx("span",{className:"flex-shrink-0 px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold uppercase rounded",children:"MAIN"})]}),l.city&&e.jsxs("div",{className:"text-[13px] text-gray-500 mt-0.5",children:[l.city,l.code&&` â€¢ ${l.code}`]})]}),b&&e.jsx(V,{size:18,className:"text-blue-500 flex-shrink-0",strokeWidth:2.5})]},l.id)})})})]}),document.body),e.jsx("style",{children:`
        @keyframes dropdown {
          from {
            opacity: 0;
            transform: scaleY(0.95);
            transform-origin: top;
          }
          to {
            opacity: 1;
            transform: scaleY(1);
            transform-origin: top;
          }
        }
        .animate-dropdown {
          animation: dropdown 0.15s ease-out;
        }
      `})]})},pe=()=>{const g=W(),o=ae(),[p,r]=d.useState(!1),[n,s]=d.useState(!1),[i,x]=d.useState(!1),m=[{id:"home",label:"Home",icon:ee,path:"/mobile/dashboard"},{id:"clients",label:"Clients",icon:_,path:"/mobile/clients"},{id:"pos",label:"POS",icon:te,path:"/mobile/pos"},{id:"inventory",label:"Inventory",icon:se,path:"/mobile/inventory"},{id:"more",label:"More",icon:null,path:"/mobile/more"}],c=u=>o.pathname===u;return e.jsx(ie,{children:e.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 overflow-hidden",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200/50 px-5 pt-3 pb-4 shadow-sm",children:e.jsxs("div",{className:"flex justify-between items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ce,{})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 active:bg-gray-200 transition-colors",onClick:()=>r(!0),style:{WebkitTapHighlightColor:"transparent"},"aria-label":"Search",children:e.jsx(z,{size:22,className:"text-gray-600",strokeWidth:2})}),e.jsxs("button",{className:"p-2 rounded-full hover:bg-gray-100 active:bg-gray-200 relative transition-colors",onClick:()=>s(!0),style:{WebkitTapHighlightColor:"transparent"},"aria-label":"Notifications",children:[e.jsx(P,{size:22,className:"text-gray-600",strokeWidth:2}),e.jsx("span",{className:"absolute top-1.5 right-1.5 bg-red-500 text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center shadow-sm",children:"3"})]}),e.jsx("button",{className:"p-2 rounded-full hover:bg-gray-100 active:bg-gray-200 transition-colors",onClick:()=>x(!0),style:{WebkitTapHighlightColor:"transparent"},"aria-label":"Profile",children:e.jsx(R,{size:22,className:"text-gray-600",strokeWidth:2})})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch"},children:e.jsx(re,{})}),e.jsx("button",{className:"fixed bottom-28 right-6 bg-gradient-to-br from-blue-500 to-blue-600 text-white rounded-[20px] w-14 h-14 flex items-center justify-center shadow-2xl shadow-blue-500/40 z-50 transition-all active:scale-95 hover:shadow-blue-500/60",onClick:()=>g("/mobile/inventory/add"),style:{WebkitTapHighlightColor:"transparent"},children:e.jsx(Z,{size:28,strokeWidth:2.5})}),e.jsx("nav",{className:"bg-white/95 backdrop-blur-xl border-t border-gray-200/50 px-1 pt-2 pb-6 shadow-lg safe-area-inset-bottom",children:e.jsx("div",{className:"flex justify-around items-center",children:m.map(u=>{const l=u.icon,a=c(u.path);return e.jsxs("button",{onClick:()=>g(u.path),className:`flex flex-col items-center justify-center py-1.5 px-4 min-w-[64px] transition-all duration-200 ${a?"text-blue-600":"text-gray-500"}`,style:{WebkitTapHighlightColor:"transparent"},children:[e.jsx("div",{className:`transition-transform duration-200 ${a?"scale-110":"scale-100"}`,children:l?e.jsx(l,{size:24,className:"mb-1",strokeWidth:a?2.5:2,fill:a?"currentColor":"none"}):e.jsxs("div",{className:"mb-1 flex gap-1",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full transition-all ${a?"bg-blue-600":"bg-gray-400"}`}),e.jsx("span",{className:`w-1.5 h-1.5 rounded-full transition-all ${a?"bg-blue-600":"bg-gray-400"}`}),e.jsx("span",{className:`w-1.5 h-1.5 rounded-full transition-all ${a?"bg-blue-600":"bg-gray-400"}`})]})}),e.jsx("span",{className:`text-[11px] font-medium transition-all ${a?"font-semibold":"font-normal"}`,children:u.label})]},u.id)})})}),e.jsx(le,{isOpen:p,onClose:()=>r(!1)}),e.jsx(ne,{isOpen:n,onClose:()=>s(!1)}),e.jsx(oe,{isOpen:i,onClose:()=>x(!1)})]})})};export{pe as default};
