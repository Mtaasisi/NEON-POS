import{s as I,al as Ne,j as e,e as v,u as we,a as Ce,at as Se,au as _e}from"./index-61458a34.js";import{r as d}from"./vendor-36d2c7c1.js";import{S as Ee}from"./SearchBar-c613e419.js";import{B as Ae}from"./BackButton-02a80e74.js";import{D as Te,ag as De,cG as le,X as ce,d as ke,e as L,n as f,p as F,R as ie,N as Y,af as Pe,k,r as Re,u as G,a9 as Fe,aA as Le,P as Ie,aO as $e,l as ze,Y as ne}from"./ui-28e30067.js";import{e as Me,g as Be,S as Ve}from"./SupplierDetailModal-41a61e96.js";import{E as Oe}from"./EnhancedAddSupplierModal-988446e5.js";import{a as Ue}from"./routing-eb8c310c.js";import"./supabase-cf010ec4.js";import"./GlassTabs-05c8a392.js";import"./utils-95f4031a.js";import"./charts-d592fbd1.js";import"./useBodyScrollLock-341c8b9f.js";const We=async()=>{try{const{data:s,error:a}=await I.from("lats_supplier_categories").select("*").eq("is_active",!0).order("name");if(a)throw a;return s||[]}catch(s){throw console.error("Error fetching supplier categories:",s),s}},Ye=async()=>{try{const{data:s,error:a}=await I.from("lats_supplier_tags").select("*").order("name");if(a)throw a;return s||[]}catch(s){throw console.error("Error fetching supplier tags:",s),s}},Ge=async()=>{try{const{data:s,error:a}=await I.from("supplier_documents_expiring").select("*");if(a)throw a;return s||[]}catch(s){throw console.error("Error fetching expiring documents:",s),s}},qe=async()=>{try{const{data:s,error:a}=await I.from("supplier_contracts_expiring").select("*");if(a)throw a;return s||[]}catch(s){throw console.error("Error fetching expiring contracts:",s),s}},Qe=s=>{const a=["Name","Company Name","Contact Person","Email","Phone","WhatsApp","Address","City","Country","Tax ID","Payment Terms","Currency","Exchange Rate","Credit Limit","Website","Business Type","Priority Level","Notes","Active"],g=s.map(r=>{var o,c;return[r.name||"",r.company_name||"",r.contact_person||"",r.email||"",r.phone||"",r.whatsapp||"",r.address||"",r.city||"",r.country||"",r.tax_id||"",r.payment_terms||"",r.preferred_currency||"",((o=r.exchange_rate)==null?void 0:o.toString())||"",((c=r.credit_limit)==null?void 0:c.toString())||"",r.website_url||"",r.business_type||"",r.priority_level||"",r.notes||"",r.is_active?"Yes":"No"]});return[a.join(","),...g.map(r=>r.map(o=>`"${o}"`).join(","))].join(`
`)},de=(s,a="suppliers.csv")=>{const g=new Blob([s],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),r=URL.createObjectURL(g);m.setAttribute("href",r),m.setAttribute("download",a),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m)},Je=s=>{const a=Qe(s),g=new Date().toISOString().split("T")[0];de(a,`suppliers_export_${g}.csv`)},Xe=s=>{const a=s.split(`
`).filter(r=>r.trim());if(a.length<2)return[];const g=a[0].split(",").map(r=>r.replace(/"/g,"").trim());return a.slice(1).map(r=>{const o=[];let c="",p=!1;for(let x=0;x<r.length;x++){const h=r[x];h==='"'?p=!p:h===","&&!p?(o.push(c.trim()),c=""):c+=h}o.push(c.trim());const i={};return g.forEach((x,h)=>{i[x]=o[h]||""}),i})},Ze=async(s,a=!1)=>new Promise((g,m)=>{const r=new FileReader;r.onload=async o=>{var c;try{const p=(c=o.target)==null?void 0:c.result,i=Xe(p),x={success:0,failed:0,errors:[]};for(let h=0;h<i.length;h++){const l=i[h];try{if(!l.Name||!l.Name.trim())throw new Error("Name is required");const b={name:l.Name,company_name:l["Company Name"]||void 0,contact_person:l["Contact Person"]||void 0,email:l.Email||void 0,phone:l.Phone||void 0,whatsapp:l.WhatsApp||void 0,address:l.Address||void 0,city:l.City||void 0,country:l.Country||void 0,tax_id:l["Tax ID"]||void 0,payment_terms:l["Payment Terms"]||void 0,preferred_currency:l.Currency||void 0,exchange_rate:l["Exchange Rate"]?parseFloat(l["Exchange Rate"]):void 0,notes:l.Notes||void 0,is_active:l.Active!=="No"};l["Credit Limit"]&&(b.credit_limit=parseFloat(l["Credit Limit"])),l.Website&&(b.website_url=l.Website),l["Business Type"]&&(b.business_type=l["Business Type"]),l["Priority Level"]&&(b.priority_level=l["Priority Level"]),await Ne(b),x.success++}catch(b){x.failed++,x.errors.push({row:h+2,error:b instanceof Error?b.message:"Unknown error",data:l})}}g(x)}catch(p){m(p)}},r.onerror=()=>{m(new Error("Failed to read file"))},r.readAsText(s)}),He=()=>{const s=["Name","Company Name","Contact Person","Email","Phone","WhatsApp","Address","City","Country","Tax ID","Payment Terms","Currency","Exchange Rate","Credit Limit","Website","Business Type","Priority Level","Notes","Active"],a=["Example Supplier Ltd","Example Company Ltd","John Doe","john@example.com","+255123456789","+255123456789","123 Main Street","Dar es Salaam","Tanzania","TIN123456","Net 30","TZS","1","5000000","https://example.com","distributor","standard","Sample notes here","Yes"],g=[s.join(","),a.map(m=>`"${m}"`).join(",")].join(`
`);de(g,"supplier_import_template.csv")},Ke=s=>{const a={total:s.length,active:s.filter(i=>i.is_active).length,inactive:s.filter(i=>!i.is_active).length,byCountry:{},byPaymentTerms:{},byCurrency:{}};s.forEach(i=>{i.country&&(a.byCountry[i.country]=(a.byCountry[i.country]||0)+1),i.payment_terms&&(a.byPaymentTerms[i.payment_terms]=(a.byPaymentTerms[i.payment_terms]||0)+1),i.preferred_currency&&(a.byCurrency[i.preferred_currency]=(a.byCurrency[i.preferred_currency]||0)+1)});const m=["SUPPLIER STATISTICS REPORT",`Generated: ${new Date().toLocaleString()}`,"","OVERVIEW",`Total Suppliers: ${a.total}`,`Active: ${a.active}`,`Inactive: ${a.inactive}`,"","BY COUNTRY",...Object.entries(a.byCountry).map(([i,x])=>`${i}: ${x}`),"","BY PAYMENT TERMS",...Object.entries(a.byPaymentTerms).map(([i,x])=>`${i}: ${x}`),"","BY CURRENCY",...Object.entries(a.byCurrency).map(([i,x])=>`${i}: ${x}`)].join(`
`),r=new Date().toISOString().split("T")[0],o=new Blob([m],{type:"text/plain;charset=utf-8;"}),c=document.createElement("a"),p=URL.createObjectURL(o);c.setAttribute("href",p),c.setAttribute("download",`supplier_statistics_${r}.txt`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c)},oe=({suppliers:s,onImportComplete:a})=>{const[g,m]=d.useState(!1),[r,o]=d.useState(!1),[c,p]=d.useState(null),i=d.useRef(null),x=()=>{try{Je(s),f.success(`Exported ${s.length} suppliers`)}catch(y){console.error("Export error:",y),f.error("Failed to export suppliers")}},h=()=>{try{Ke(s),f.success("Statistics report exported")}catch(y){console.error("Export stats error:",y),f.error("Failed to export statistics")}},l=()=>{try{He(),f.success("Template downloaded")}catch(y){console.error("Download template error:",y),f.error("Failed to download template")}},b=async y=>{var C;const w=(C=y.target.files)==null?void 0:C[0];if(w){if(!w.name.endsWith(".csv")){f.error("Please select a CSV file");return}try{o(!0),p(null);const j=await Ze(w);p(j),j.success>0&&(f.success(`Successfully imported ${j.success} suppliers`),a==null||a()),j.failed>0&&f.error(`Failed to import ${j.failed} suppliers`)}catch(j){console.error("Import error:",j),f.error("Failed to import suppliers")}finally{o(!1),i.current&&(i.current.value="")}}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:x,disabled:s.length===0,title:"Export suppliers to CSV",className:"px-3 py-2 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors inline-flex items-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Te,{size:16}),"Export"]}),e.jsxs("button",{onClick:()=>m(!0),title:"Import suppliers from CSV",className:"px-3 py-2 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors inline-flex items-center gap-2 text-sm",children:[e.jsx(De,{size:16}),"Import"]}),e.jsxs("button",{onClick:h,disabled:s.length===0,title:"Export statistics report",className:"px-3 py-2 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors inline-flex items-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(le,{size:16}),"Stats"]})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bg-black/50",onClick:()=>{r||(m(!1),p(null))},style:{left:"var(--sidebar-width, 0px)",top:"var(--topbar-height, 64px)",right:0,bottom:0,zIndex:55}}),e.jsx("div",{className:"fixed flex items-center justify-center p-4",style:{left:"var(--sidebar-width, 0px)",top:"var(--topbar-height, 64px)",right:0,bottom:0,zIndex:60,pointerEvents:"none"},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full",style:{pointerEvents:"auto"},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Import Suppliers"}),e.jsx("button",{onClick:()=>{m(!1),p(null)},disabled:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{children:e.jsxs("button",{onClick:l,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors inline-flex items-center justify-center gap-2",children:[e.jsx(le,{size:16}),"Download Template CSV"]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select CSV File to Import"}),e.jsx("input",{ref:i,type:"file",accept:".csv",onChange:b,disabled:r,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r&&e.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),e.jsx("span",{className:"text-gray-600",children:"Importing suppliers..."})]}),c&&!r&&e.jsxs(v,{className:"p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Import Results"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Successfully imported:"}),e.jsxs("span",{className:"flex items-center gap-1 text-green-600 font-medium",children:[e.jsx(ke,{size:16}),c.success]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Failed:"}),e.jsxs("span",{className:"flex items-center gap-1 text-red-600 font-medium",children:[e.jsx(L,{size:16}),c.failed]})]})]}),c.errors.length>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Errors:"}),e.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2",children:[c.errors.slice(0,10).map((y,w)=>e.jsxs("div",{className:"text-xs bg-red-50 text-red-700 p-2 rounded",children:[e.jsxs("div",{className:"font-medium",children:["Row ",y.row,": ",y.error]}),y.data.Name&&e.jsxs("div",{className:"text-red-600 mt-1",children:["Supplier: ",y.data.Name]})]},w)),c.errors.length>10&&e.jsxs("div",{className:"text-xs text-gray-600 text-center",children:["... and ",c.errors.length-10," more errors"]})]})]})]})]}),e.jsx("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>{m(!1),p(null)},disabled:r,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Close":"Cancel"})})]})})]})]})},gt=({embedded:s=!1})=>{we();const a=Ue(),{startLoading:g,completeLoading:m,failLoading:r}=Ce(),[o,c]=d.useState([]),[p,i]=d.useState([]),[x,h]=d.useState([]),[l,b]=d.useState([]),[y,w]=d.useState(!0),[C,j]=d.useState(""),[_,q]=d.useState("all"),[Q,me]=d.useState("all"),[J,xe]=d.useState("all"),[E,X]=d.useState("all"),[A,Z]=d.useState(0),[$,ge]=d.useState(!1),[z,H]=d.useState("grid"),[K,T]=d.useState(!1),[pe,M]=d.useState(!1),[ee,te]=d.useState(null),[ue,B]=d.useState(null),[se,he]=d.useState([]),[re,ye]=d.useState([]),[V,O]=d.useState(!1);d.useEffect(()=>{S()},[]),d.useEffect(()=>{fe()},[o,C,_,Q,J,E,A]);const S=async()=>{const t=g("Loading suppliers...");try{w(!0);const[n,N,D,P,R]=await Promise.all([Se(),We(),Ye(),qe().catch(()=>[]),Ge().catch(()=>[])]);c(n),i(N),h(D),he(P),ye(R),m(t)}catch(n){console.error("Error loading data:",n),r(t,"Failed to load suppliers"),f.error("Failed to load suppliers")}finally{w(!1)}},fe=d.useCallback(()=>{let t=o;if(C){const n=C.toLowerCase();t=t.filter(N=>{var D,P,R;return N.name.toLowerCase().includes(n)||((D=N.company_name)==null?void 0:D.toLowerCase().includes(n))||((P=N.contact_person)==null?void 0:P.toLowerCase().includes(n))||((R=N.email)==null?void 0:R.toLowerCase().includes(n))})}_!=="all"&&(t=t.filter(n=>n.country===_)),E!=="all"&&(t=t.filter(n=>n.priority_level===E)),A>0&&(t=t.filter(n=>n.average_rating>=A)),b(t)},[o,C,_,E,A]),ae=async t=>{if(confirm("âš ï¸ Are you sure you want to delete this supplier? This action cannot be undone."))try{await _e(t),f.success("Supplier deleted successfully"),S()}catch(n){console.error("Error deleting supplier:",n),f.error(n.message||"Failed to delete supplier")}},U=t=>{te(t),M(!0)},be=t=>{B(t),M(!1),T(!0)},je=()=>{j(""),q("all"),me("all"),xe("all"),X("all"),Z(0)},W=()=>{let t=0;return C&&t++,_!=="all"&&t++,Q!=="all"&&t++,J!=="all"&&t++,E!=="all"&&t++,A>0&&t++,t},u={total:o.length,active:o.filter(t=>t.is_active).length,premium:o.filter(t=>t.priority_level==="premium").length,avgRating:o.length>0?o.reduce((t,n)=>t+(n.average_rating||0),0)/o.length:0,expiringContracts:se.length,expiringDocuments:re.length},ve=Array.from(new Set(o.map(t=>t.country).filter(Boolean)));return y?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading suppliers..."})]})}):e.jsxs("div",{className:s?"":"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[!s&&e.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ae,{onClick:()=>a("/dashboard")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(F,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Enhanced Supplier Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive supplier relationship management"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[(u.expiringContracts>0||u.expiringDocuments>0)&&e.jsxs("button",{onClick:()=>O(!V),className:"relative p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Expiring items",children:[e.jsx(L,{size:20}),e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:u.expiringContracts+u.expiringDocuments})]}),e.jsx(oe,{suppliers:o,onImportComplete:S}),e.jsxs("button",{onClick:S,className:"px-4 py-2 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors inline-flex items-center gap-2 text-sm",children:[e.jsx(ie,{size:18}),"Refresh"]}),e.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors inline-flex items-center gap-2 text-sm",children:[e.jsx(Y,{size:18}),"Add Supplier"]})]})]})})}),e.jsxs("div",{className:s?"space-y-6":"max-w-7xl mx-auto p-4 sm:p-6 space-y-6",children:[s&&e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:(u.expiringContracts>0||u.expiringDocuments>0)&&e.jsxs("button",{onClick:()=>O(!V),className:"relative p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Expiring items",children:[e.jsx(L,{size:20}),e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:u.expiringContracts+u.expiringDocuments})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oe,{suppliers:o,onImportComplete:S}),e.jsxs("button",{onClick:S,className:"px-4 py-2 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors inline-flex items-center gap-2 text-sm",children:[e.jsx(ie,{size:18}),"Refresh"]}),e.jsxs("button",{onClick:()=>T(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors inline-flex items-center gap-2 text-sm",children:[e.jsx(Y,{size:18}),"Add Supplier"]})]})]}),V&&(u.expiringContracts.length>0||u.expiringDocuments.length>0)&&e.jsxs(v,{className:"p-4 bg-orange-50 border-orange-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"font-semibold text-orange-900",children:"Expiring Items"})]}),e.jsx("button",{onClick:()=>O(!1),className:"text-orange-600 hover:text-orange-800",children:e.jsx(ce,{size:20})})]}),e.jsxs("div",{className:"space-y-2",children:[se.slice(0,3).map(t=>e.jsxs("div",{className:"text-sm text-orange-800",children:["ðŸ“„ Contract with ",t.supplier_name," expires in ",t.days_until_expiry," days"]},t.contract_id)),re.slice(0,3).map(t=>e.jsxs("div",{className:"text-sm text-orange-800",children:["ðŸ“‹ ",t.document_type," for ",t.supplier_name," expires in ",t.days_until_expiry," days"]},t.document_id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(F,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:u.total})]})]})}),e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:e.jsx(Pe,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:u.active})]})]})}),e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:e.jsx(k,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Premium"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:u.premium})]})]})}),e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg",children:e.jsx(k,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Rating"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:u.avgRating.toFixed(1)})]})]})}),e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-50 rounded-lg",children:e.jsx(Re,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Contracts"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:u.expiringContracts})]})]})}),e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:e.jsx(G,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Documents"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:u.expiringDocuments})]})]})})]}),e.jsxs(v,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between mb-4",children:[e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(Ee,{onSearch:j,placeholder:"Search suppliers...",className:"w-full"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>ge(!$),className:`flex items-center gap-2 px-3 py-2 rounded-lg transition-colors ${$?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(Fe,{className:"w-4 h-4"}),"Filters",W()>0&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:W()})]}),e.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>H("grid"),className:`p-2 rounded-md transition-colors ${z==="grid"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>H("list"),className:`p-2 rounded-md transition-colors ${z==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-600"}`,children:e.jsx(F,{className:"w-4 h-4"})})]})]})]}),$&&e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsxs("select",{value:_,onChange:t=>q(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Countries"}),ve.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),e.jsxs("select",{value:E,onChange:t=>X(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"budget",children:"Budget"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Rating"}),e.jsxs("select",{value:A,onChange:t=>Z(Number(t.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"0",children:"All Ratings"}),e.jsx("option",{value:"4",children:"4+ Stars"}),e.jsx("option",{value:"3",children:"3+ Stars"}),e.jsx("option",{value:"2",children:"2+ Stars"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:je,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Clear Filters"})})]})})]}),e.jsx(v,{className:"overflow-hidden",children:l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No suppliers found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:W()>0?"No suppliers match your current filters":"Add your first supplier to get started"}),e.jsxs("button",{onClick:()=>T(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors inline-flex items-center gap-2",children:[e.jsx(Y,{size:20}),"Add Supplier"]})]}):z==="grid"?e.jsx("div",{className:"p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-6 bg-white hover:shadow-lg transition-all duration-200 cursor-pointer",onClick:()=>U(t),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),t.company_name&&e.jsx("p",{className:"text-sm text-gray-600",children:t.company_name})]})]}),t.is_favorite&&e.jsx(k,{className:"w-5 h-5 text-yellow-500 fill-current"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[t.contact_person&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Le,{className:"w-4 h-4"}),t.contact_person]}),t.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ie,{className:"w-4 h-4"}),t.phone]}),t.country&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx($e,{className:"w-4 h-4"}),t.country]})]}),(()=>{const n=Me(t.notes);return n.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(G,{className:"w-3.5 h-3.5 text-gray-500"}),e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Products:"})]}),e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[n.slice(0,3).map((N,D)=>e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-md border ${Be(N)}`,children:N},D)),n.length>3&&e.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500 bg-gray-100 rounded-md border border-gray-200",children:["+",n.length-3]})]})]})})(),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.average_rating>0&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-yellow-50 text-yellow-700 text-xs rounded-full",children:[e.jsx(k,{className:"w-3 h-3 fill-current"}),t.average_rating.toFixed(1)]}),t.priority_level&&e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${t.priority_level==="premium"?"bg-purple-100 text-purple-700":t.priority_level==="standard"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:t.priority_level})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),U(t)},className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"View details",children:e.jsx(ze,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),ae(t.id)},className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(ne,{className:"w-4 h-4"})})]})]})]},t.id))}):e.jsx("div",{children:e.jsx("div",{className:"divide-y divide-gray-200",children:l.map(t=>e.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>U(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-bold",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.name}),t.company_name&&e.jsx("div",{className:"text-sm text-gray-600",children:t.company_name})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[t.country&&e.jsx("span",{className:"text-sm text-gray-600",children:t.country}),t.average_rating>0&&e.jsxs("span",{className:"flex items-center gap-1 text-sm",children:[e.jsx(k,{className:"w-4 h-4 text-yellow-500 fill-current"}),t.average_rating.toFixed(1)]}),e.jsx("button",{onClick:n=>{n.stopPropagation(),ae(t.id)},className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded",children:e.jsx(ne,{className:"w-4 h-4"})})]})]})},t.id))})})})]}),K&&e.jsx(Oe,{isOpen:K,supplier:ue,onClose:()=>{T(!1),B(null)},onSupplierCreated:()=>{T(!1),B(null),S()}}),pe&&ee&&e.jsx(Ve,{supplier:ee,onClose:()=>{M(!1),te(null)},onUpdate:S,onEdit:be})]})};export{gt as default};
