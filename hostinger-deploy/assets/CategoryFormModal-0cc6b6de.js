import{j as e,e as L,aV as i,G as g}from"./index-61458a34.js";import{r as C}from"./vendor-36d2c7c1.js";import{o as G,s as v,b as A,n as O,r as z,u as $,C as u}from"./forms-ebbdb905.js";import{t as T}from"./zod-78f78e6c.js";import{G as f}from"./GlassInput-0475021a.js";import{G as y}from"./GlassSelect-e243562f.js";import{G as P}from"./GlassBadge-9ae09fa8.js";import{bU as _}from"./ui-28e30067.js";import{u as D}from"./useBodyScrollLock-341c8b9f.js";const M=({onEmojiSelect:a,trigger:c})=>{const[m,o]=C.useState(!1),[h,d]=C.useState("smileys"),p={smileys:{name:"Smileys & People",emojis:["ðŸ˜€","ðŸ˜ƒ","ðŸ˜„","ðŸ˜","ðŸ˜†","ðŸ˜…","ðŸ¤£","ðŸ˜‚","ðŸ™‚","ðŸ™ƒ","ðŸ˜‰","ðŸ˜Š","ðŸ˜‡","ðŸ¥°","ðŸ˜","ðŸ¤©","ðŸ˜˜","ðŸ˜—","ðŸ˜š","ðŸ˜™","ðŸ¥²","ðŸ˜‹","ðŸ˜›","ðŸ˜œ","ðŸ¤ª","ðŸ˜","ðŸ¤‘","ðŸ¤—","ðŸ¤­","ðŸ¤«","ðŸ¤”","ðŸ¤","ðŸ¤¨","ðŸ˜","ðŸ˜‘","ðŸ˜¶","ðŸ˜","ðŸ˜’","ðŸ™„","ðŸ˜¬","ðŸ¤¥","ðŸ˜”","ðŸ˜ª","ðŸ¤¤","ðŸ˜´","ðŸ˜·","ðŸ¤’","ðŸ¤•","ðŸ¤¢","ðŸ¤®"]},gestures:{name:"Hand Gestures",emojis:["ðŸ‘‹","ðŸ¤š","ðŸ–ï¸","âœ‹","ðŸ––","ðŸ‘Œ","ðŸ¤Œ","ðŸ¤","âœŒï¸","ðŸ¤ž","ðŸ¤Ÿ","ðŸ¤˜","ðŸ¤™","ðŸ‘ˆ","ðŸ‘‰","ðŸ‘†","ðŸ–•","ðŸ‘‡","â˜ï¸","ðŸ‘","ðŸ‘Ž","ðŸ‘Š","âœŠ","ðŸ¤›","ðŸ¤œ","ðŸ‘","ðŸ™Œ","ðŸ‘","ðŸ¤²","ðŸ¤","ðŸ™","âœï¸","ðŸ’…","ðŸ¤³","ðŸ’ª","ðŸ¦¾","ðŸ¦¿","ðŸ¦µ","ðŸ¦¶","ðŸ‘‚"]},hearts:{name:"Hearts & Love",emojis:["â¤ï¸","ðŸ§¡","ðŸ’›","ðŸ’š","ðŸ’™","ðŸ’œ","ðŸ–¤","ðŸ¤","ðŸ¤Ž","ðŸ’”","â£ï¸","ðŸ’•","ðŸ’ž","ðŸ’“","ðŸ’—","ðŸ’–","ðŸ’˜","ðŸ’","ðŸ’Ÿ","â˜®ï¸","âœï¸","â˜ªï¸","ðŸ•‰ï¸","â˜¸ï¸","âœ¡ï¸","ðŸ”¯","ðŸ•Ž","â˜¯ï¸","â˜¦ï¸","ðŸ›"]},objects:{name:"Objects",emojis:["ðŸ“±","ðŸ’»","âŒš","ðŸ“·","ðŸ“¹","ðŸŽ¥","ðŸ“º","ðŸ“»","ðŸŽµ","ðŸŽ¶","ðŸŽ¼","ðŸŽ¹","ðŸ¥","ðŸŽ·","ðŸŽº","ðŸŽ¸","ðŸª•","ðŸŽ»","ðŸŽ¤","ðŸŽ§","ðŸ“¢","ðŸ“£","ðŸ“¯","ðŸ””","ðŸ”•","ðŸŽª","ðŸŽ­","ðŸ©°","ðŸŽ¨","ðŸŽ¬"]},nature:{name:"Nature",emojis:["ðŸŒ±","ðŸŒ¿","ðŸ€","ðŸŽ","ðŸŽ‹","ðŸƒ","ðŸ‚","ðŸ","ðŸŒ¾","ðŸŒ²","ðŸŒ³","ðŸŒ´","ðŸŒµ","ðŸŒ¶ï¸","ðŸ„","ðŸŒ°","ðŸŽƒ","ðŸŒ»","ðŸŒº","ðŸŒ¸","ðŸŒ·","ðŸŒ¹","ðŸ¥€","ðŸŒ¼","ðŸŒ»","ðŸŒž","ðŸŒ","ðŸŒ›","ðŸŒœ","ðŸŒš"]},food:{name:"Food & Drink",emojis:["ðŸŽ","ðŸŠ","ðŸ‹","ðŸŒ","ðŸ‰","ðŸ‡","ðŸ“","ðŸ«","ðŸˆ","ðŸ’","ðŸ‘","ðŸ¥­","ðŸ","ðŸ¥¥","ðŸ¥","ðŸ…","ðŸ†","ðŸ¥‘","ðŸ¥¦","ðŸ¥¬","ðŸ¥’","ðŸŒ¶ï¸","ðŸ«‘","ðŸŒ½","ðŸ¥•","ðŸ«’","ðŸ§„","ðŸ§…","ðŸ¥”","ðŸ "]}},b=t=>{a(t),o(!1)};return e.jsxs("div",{className:"relative",children:[c?e.jsx("div",{onClick:()=>o(!m),className:"inline-block cursor-pointer",children:c}):e.jsx("button",{onClick:()=>o(!m),className:"p-2 rounded-lg bg-gray-100 text-gray-600 hover:bg-gray-200 transition-colors",type:"button",children:e.jsx(_,{size:20})}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)}),e.jsxs("div",{className:"absolute bottom-12 left-0 bg-white border border-gray-200 rounded-lg shadow-lg z-50 w-80 h-96",children:[e.jsx("div",{className:"flex border-b border-gray-200",children:Object.entries(p).map(([t,l])=>e.jsx("button",{onClick:()=>d(t),className:`flex-1 px-2 py-3 text-xs font-medium transition-colors ${h===t?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900"}`,children:l.name.split(" ")[0]},t))}),e.jsx("div",{className:"p-4 h-80 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-8 gap-2",children:p[h].emojis.map((t,l)=>e.jsx("button",{onClick:()=>b(t),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-gray-100 rounded transition-colors",title:t,children:t},l))})})]})]})]})},H=G({name:v().min(1,"Category name is required").max(100,"Category name must be less than 100 characters"),description:v().max(500,"Description must be less than 500 characters").optional(),parentId:v().optional(),color:v().regex(/^#[0-9A-F]{6}$/i,"Invalid color format").optional(),icon:v().max(50,"Icon name must be less than 50 characters").optional(),isActive:A().default(!0),sortOrder:O().min(0,"Sort order must be 0 or greater").default(0),metadata:z(v()).optional()}),k=({category:a,parentCategories:c=[],onSubmit:m,onCancel:o,onClose:h,loading:d=!1,className:p=""})=>{const[b,t]=C.useState(!1),{control:l,handleSubmit:S,formState:{errors:x,isDirty:N},watch:B,reset:w}=$({resolver:T(H),defaultValues:{name:(a==null?void 0:a.name)||"",description:(a==null?void 0:a.description)||"",parentId:(a==null?void 0:a.parent_id)||"",color:(a==null?void 0:a.color)||"#3B82F6",icon:(a==null?void 0:a.icon)||"",isActive:(a==null?void 0:a.is_active)??!0,sortOrder:(a==null?void 0:a.sort_order)||0,metadata:(a==null?void 0:a.metadata)||{}}}),j=B().isActive,F=async s=>{try{const r={name:s.name,description:s.description,parent_id:s.parentId,color:s.color,icon:s.icon,is_active:s.isActive,sort_order:s.sortOrder,metadata:s.metadata};await m(r),w(s)}catch(r){console.error("Category form submission error:",r)}},E=()=>{const s=o||h;if(!s){console.warn("CategoryForm: No cancel handler provided");return}N?confirm(i("common.confirmDiscard"))&&(w(),s()):s()},I=[{value:"#3B82F6",label:"Blue",color:"#3B82F6"},{value:"#10B981",label:"Green",color:"#10B981"},{value:"#F59E0B",label:"Yellow",color:"#F59E0B"},{value:"#EF4444",label:"Red",color:"#EF4444"},{value:"#8B5CF6",label:"Purple",color:"#8B5CF6"},{value:"#EC4899",label:"Pink",color:"#EC4899"},{value:"#6B7280",label:"Gray",color:"#6B7280"},{value:"#000000",label:"Black",color:"#000000"}];return e.jsx(L,{className:`max-w-2xl mx-auto ${p}`,children:e.jsxs("form",{onSubmit:S(F),className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold text-lats-text",children:[a?i("common.edit"):i("common.add")," ",i("common.category")]}),e.jsx("p",{className:"text-sm text-lats-text-secondary mt-1",children:a?"Update category information":"Create a new product category"})]}),e.jsx(P,{variant:j?"success":"error",icon:e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:j?"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z":"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"})}),children:j?i("common.active"):i("common.inactive")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-lats-text",children:"Basic Information"}),e.jsx(u,{name:"name",control:l,render:({field:s})=>{var r;return e.jsx(f,{label:i("common.name"),placeholder:"Enter category name",value:s.value,onChange:s.onChange,error:(r=x.name)==null?void 0:r.message,required:!0,maxLength:100})}}),e.jsx(u,{name:"description",control:l,render:({field:s})=>{var r,n;return e.jsx(f,{label:i("common.description"),placeholder:"Enter category description (optional)",value:s.value,onChange:s.onChange,error:(r=x.description)==null?void 0:r.message,multiline:!0,rows:3,maxLength:500,helperText:`${((n=s.value)==null?void 0:n.length)||0}/500 characters`})}}),c.length>0&&e.jsx(u,{name:"parentId",control:l,render:({field:s})=>{var r;return e.jsx(y,{label:"Parent Category",placeholder:"Select parent category (optional)",value:s.value,onChange:s.onChange,error:(r=x.parentId)==null?void 0:r.message,options:[{value:"",label:"No parent (root category)"},...c.map(n=>({value:n.id,label:n.name}))],clearable:!0})}})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-lats-text",children:"Appearance"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{name:"color",control:l,render:({field:s})=>{var r;return e.jsx(y,{label:"Category Color",placeholder:"Select color",value:s.value,onChange:s.onChange,error:(r=x.color)==null?void 0:r.message,options:I})}}),e.jsx(u,{name:"icon",control:l,render:({field:s})=>{var r;return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-lats-text mb-2",children:"Category Icon"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",placeholder:"Select an emoji icon",value:s.value,onChange:s.onChange,className:"w-full py-3 px-4 bg-white/30 backdrop-blur-md border-2 border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",maxLength:10})}),e.jsx(M,{onEmojiSelect:n=>s.onChange(n),trigger:e.jsx("button",{type:"button",className:"p-3 bg-white/30 backdrop-blur-md border-2 border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"ðŸ˜Š"})}),s.value&&e.jsx("button",{type:"button",onClick:()=>s.onChange(""),className:"p-3 bg-red-50 border-2 border-red-200 rounded-lg hover:bg-red-100 transition-colors text-red-600",children:"Clear"})]}),((r=x.icon)==null?void 0:r.message)&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.icon.message}),s.value&&e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Preview: ",e.jsx("span",{className:"text-lg",children:s.value})]})]})}})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-lats-text",children:"Advanced Settings"}),e.jsxs(g,{variant:"ghost",size:"sm",onClick:()=>t(!b),icon:e.jsx("svg",{className:`w-4 h-4 transition-transform ${b?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),children:[b?"Hide":"Show"," Advanced"]})]}),b&&e.jsxs("div",{className:"space-y-4 p-4 bg-lats-surface/30 rounded-lats-radius-md border border-lats-glass-border",children:[e.jsx(u,{name:"sortOrder",control:l,render:({field:s})=>{var r;return e.jsx(f,{label:"Sort Order",placeholder:"0",type:"number",value:s.value,onChange:n=>s.onChange(parseInt(n.target.value)||0),error:(r=x.sortOrder)==null?void 0:r.message,min:0,helperText:"Lower numbers appear first"})}}),e.jsx(u,{name:"isActive",control:l,render:({field:s})=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-lats-surface/50 rounded-lats-radius-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-lats-text",children:"Active Status"}),e.jsx("p",{className:"text-xs text-lats-text-secondary",children:"Inactive categories won't appear in product selection"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:s.value,onChange:s.onChange}),e.jsx("div",{className:`w-11 h-6 rounded-full transition-colors ${s.value?"bg-lats-primary":"bg-lats-surface/50"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full shadow transform transition-transform ${s.value?"translate-x-5":"translate-x-0"}`})})]})]})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-lats-glass-border",children:[e.jsx(g,{type:"submit",variant:"primary",loading:d,disabled:!N,className:"flex-1 sm:flex-none",children:d?"Saving...":a?"Update Category":"Create Category"}),e.jsx(g,{type:"button",variant:"secondary",onClick:E,disabled:d,className:"flex-1 sm:flex-none",children:"Cancel"})]})]})})};k.displayName="CategoryForm";const Z=({isOpen:a,onClose:c,onSubmit:m,parentCategories:o=[],loading:h=!1,editingCategory:d=null})=>{const p=()=>{c()};return D(a),a?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsx(k,{category:d,parentCategories:o,onSubmit:m,onCancel:p,loading:h})})}):null};export{k as C,Z as a};
