const l=n=>{if(!n||n.trim()==="")return[];try{const r=JSON.parse(n);if(Array.isArray(r))return r.map(t=>({phone:typeof t=="string"?t:t.phone||"",whatsapp:typeof t=="object"&&t!==null?t.whatsapp===!0:!1})).filter(t=>t.phone&&t.phone.trim().length>0)}catch{return n.split(",").map(t=>t.trim()).filter(t=>t.length>0).map(t=>({phone:t,whatsapp:!1}))}return[]};function u(n,r="255"){const t={original:n,cleaned:"",isValid:!1};if(!n||typeof n!="string")return t.error="Phone number is empty or invalid type",t;let e=n.replace(/[^\d+]/g,"");if(e=e.replace(/^\+/,""),e.length<9)return t.error=`Phone number too short (${e.length} digits). Minimum 9 digits required.`,t;if(e.startsWith("0")&&(e=r+e.substring(1)),e.match(/^[1-9]\d{10,14}$/)||e.length>=9&&e.length<=10&&(e=r+e),e.length<10)return t.error=`Phone number too short after cleaning (${e.length} digits). Expected 10-15 digits.`,t;if(e.length>15)return t.error=`Phone number too long (${e.length} digits). Maximum 15 digits allowed.`,t;if(!e.match(/^[1-9]\d{9,14}$/))return t.error=`Phone number doesn't match international format: ${e}`,t;const s=e.match(/^(\d{1,3})/);return s&&(t.countryCode=s[1],t.localNumber=e.substring(s[1].length)),t.cleaned=e,t.isValid=!0,t}function a(n){if(!n)return"";let r=n.replace(/\D/g,"");if(!r||r.length===0)return n;if(r.startsWith("0")&&r.length===10)return r="255"+r.substring(1),`+${r}`;if(r.startsWith("255")&&r.length===12)return`+${r}`;if(n.startsWith("+")){const t=n.substring(1).replace(/\D/g,"");return t.startsWith("255")&&t.length===12?n:t.startsWith("0")&&t.length===10?`+255${t.substring(1)}`:n}if(r.length===9)return`+255${r}`;try{const t=u(n,"255");if(t.isValid&&t.cleaned)return`+${t.cleaned}`}catch{}return r.length>=9&&r.length<=15?!r.startsWith("255")&&!r.startsWith("0")&&r.length===9?`+255${r}`:(r.startsWith("0")&&(r="255"+r.substring(1)),`+${r}`):n.startsWith("+")?n:`+${r}`}function o(n){if(!n||n.trim()==="")return"";try{const r=JSON.parse(n);if(Array.isArray(r)&&r.length>0)return r.map(e=>{const s=typeof e=="string"?e:(e==null?void 0:e.phone)||"";if(!s)return null;const i=a(s);return typeof e=="object"&&e!==null&&e.whatsapp===!0?`${i} ðŸ“±`:i}).filter(e=>e!==null).join(", ")}catch{}try{const r=l(n);if(r.length>0)return r.map(e=>{const s=a(e.phone);return e.whatsapp?`${s} ðŸ“±`:s}).join(", ")}catch{}return n.includes(",")?n.split(",").map(t=>t.trim()).filter(t=>t.length>0).map(a).join(", "):a(n)}function h(n){return o(n).replace(/ ðŸ“±/g,"")}const c=Object.freeze(Object.defineProperty({__proto__:null,formatContactForInvoice:o,formatContactForMessage:h},Symbol.toStringTag,{value:"Module"}));export{h as a,c as b,o as f,l as p};
