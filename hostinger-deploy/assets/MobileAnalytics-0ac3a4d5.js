import{u as f,ax as k,j as e}from"./index-61458a34.js";import{r as o}from"./vendor-36d2c7c1.js";import{d as w}from"./dashboardService-a4d4a6f3.js";import{a as S}from"./routing-eb8c310c.js";import{q as C,O as D,u as T,p as P,af as R,b_ as W,an as c}from"./ui-28e30067.js";import"./supabase-cf010ec4.js";const $=()=>{const i=S(),{currentUser:r}=f(),{dateRange:h,setDateRange:n,getDateRangeForQuery:d}=k(),[x,m]=o.useState(!0),[s,p]=o.useState(null),[u,y]=o.useState("today"),j=[{id:"today",label:"Today"},{id:"week",label:"Week"},{id:"month",label:"Month"},{id:"custom",label:"Custom"}];o.useEffect(()=>{(async()=>{if(r!=null&&r.id){m(!0);try{const a=d(),l=await w.getDashboardStats(r.id,a.startDate,a.endDate);p(l)}catch(a){console.error("Error loading dashboard data:",a)}finally{m(!1)}}})()},[r==null?void 0:r.id,h,d]);const v=t=>{switch(y(t),t){case"today":n("today");break;case"week":n("thisWeek");break;case"month":n("thisMonth");break}},N=[{label:"Revenue",value:s!=null&&s.totalRevenue?`TSh ${(s.totalRevenue/1e6).toFixed(1)}M`:"TSh 0",change:"+12%",trend:"up",icon:C,color:"green"},{label:"Sales",value:(s==null?void 0:s.totalSales)||"0",change:"+8%",trend:"up",icon:D,color:"blue"},{label:"Products",value:(s==null?void 0:s.totalProducts)||"0",change:"+5",trend:"up",icon:T,color:"purple"},{label:"Clients",value:(s==null?void 0:s.totalCustomers)||"0",change:"+3",trend:"up",icon:P,color:"orange"}],b=[{name:"iPhone 13 Pro",sales:45,revenue:"TSh 112.5M"},{name:"Samsung Galaxy S21",sales:32,revenue:"TSh 57.6M"},{name:"MacBook Pro M2",sales:18,revenue:"TSh 81M"}],g=[{id:"1",customer:"John Doe",amount:"TSh 2,500,000",time:"2 min ago"},{id:"2",customer:"Jane Smith",amount:"TSh 450,000",time:"15 min ago"},{id:"3",customer:"Mike Johnson",amount:"TSh 1,200,000",time:"1 hour ago"}];return e.jsxs("div",{className:"flex flex-col h-full bg-white",children:[e.jsx("div",{className:"px-4 pt-3 pb-2",children:e.jsx("h1",{className:"text-[32px] font-bold text-black tracking-tight",children:"Analytics"})}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("div",{className:"flex gap-2",children:j.map(t=>e.jsx("button",{onClick:()=>v(t.id),className:`px-4 py-2 rounded-lg text-[14px] font-medium transition-colors ${u===t.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t.label},t.id))})}),x&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 text-[15px]",children:"Loading analytics..."})]})}),!x&&e.jsxs("div",{className:"flex-1 overflow-y-auto pb-20",children:[e.jsx("div",{className:"px-4 py-4",children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:N.map((t,a)=>{const l=t.icon;return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:`p-2 rounded-lg ${t.color==="green"?"bg-green-100":t.color==="blue"?"bg-blue-100":t.color==="purple"?"bg-purple-100":"bg-orange-100"}`,children:e.jsx(l,{size:18,className:`${t.color==="green"?"text-green-600":t.color==="blue"?"text-blue-600":t.color==="purple"?"text-purple-600":"text-orange-600"}`,strokeWidth:2})}),e.jsxs("div",{className:`flex items-center gap-0.5 text-[11px] font-bold ${t.trend==="up"?"text-green-600":"text-red-600"}`,children:[t.trend==="up"?e.jsx(R,{size:11,strokeWidth:3}):e.jsx(W,{size:11,strokeWidth:3}),e.jsx("span",{children:t.change})]})]}),e.jsx("div",{className:"text-[22px] font-bold text-gray-900 mb-1",children:t.value}),e.jsx("div",{className:"text-[12px] text-gray-500",children:t.label})]},a)})})}),e.jsxs("div",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-[13px] text-gray-500 mb-3 uppercase tracking-wide font-semibold",children:"TOP PRODUCTS"}),e.jsx("div",{className:"border-t border-b border-gray-200",children:b.map((t,a)=>{const l=a===b.length-1;return e.jsxs("div",{className:"px-0 py-3 flex items-center justify-between border-b border-gray-200",style:{borderBottomWidth:l?"0":"0.5px"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[16px] text-gray-900 font-medium",children:t.name}),e.jsxs("div",{className:"text-[14px] text-gray-500",children:[t.sales," sales"]})]}),e.jsx("div",{className:"text-[15px] font-semibold text-green-600",children:t.revenue})]},a)})})]}),e.jsxs("div",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-[13px] text-gray-500 uppercase tracking-wide font-semibold",children:"RECENT SALES"}),e.jsx("button",{onClick:()=>i("/mobile/pos"),className:"text-blue-500 text-[15px] font-medium",children:"View All"})]}),e.jsx("div",{className:"border-t border-b border-gray-200",children:g.map((t,a)=>{const l=a===g.length-1;return e.jsxs("div",{className:"px-0 py-3 flex items-center justify-between border-b border-gray-200",style:{borderBottomWidth:l?"0":"0.5px"},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[16px] text-gray-900",children:t.customer}),e.jsx("div",{className:"text-[14px] text-gray-500",children:t.time})]}),e.jsx("div",{className:"text-[15px] font-semibold text-gray-900",children:t.amount})]},t.id)})})]}),e.jsxs("div",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-[13px] text-gray-500 mb-3 uppercase tracking-wide font-semibold",children:"QUICK ACTIONS"}),e.jsxs("div",{className:"border-t border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>i("/mobile/pos"),className:"w-full px-0 py-3 flex items-center justify-between hover:bg-gray-50 active:bg-gray-100 transition-colors border-b border-gray-200",style:{borderBottomWidth:"0.5px"},children:[e.jsx("span",{className:"text-[16px] text-black",children:"New Sale"}),e.jsx(c,{size:18,className:"text-gray-400",strokeWidth:2})]}),e.jsxs("button",{onClick:()=>i("/mobile/inventory/add"),className:"w-full px-0 py-3 flex items-center justify-between hover:bg-gray-50 active:bg-gray-100 transition-colors border-b border-gray-200",style:{borderBottomWidth:"0.5px"},children:[e.jsx("span",{className:"text-[16px] text-black",children:"Add Product"}),e.jsx(c,{size:18,className:"text-gray-400",strokeWidth:2})]}),e.jsxs("button",{onClick:()=>i("/mobile/clients"),className:"w-full px-0 py-3 flex items-center justify-between hover:bg-gray-50 active:bg-gray-100 transition-colors",children:[e.jsx("span",{className:"text-[16px] text-black",children:"Add Client"}),e.jsx(c,{size:18,className:"text-gray-400",strokeWidth:2})]})]})]})]})]})};export{$ as default};
