import{b3 as te,ah as Ve,aY as et,j as e,G as B,e as I,a9 as tt,a7 as st,a8 as rt,s as F,u as at}from"./index-61458a34.js";import{r as c}from"./vendor-36d2c7c1.js";import{a as it,c as ot}from"./routing-eb8c310c.js";import{G as nt}from"./GlassTabs-05c8a392.js";import{P as lt}from"./PageErrorBoundary-3d3e48b8.js";import{P as ct}from"./PageHeader-f4a9cf63.js";import{bJ as Te,b as dt,an as ut,bQ as ht,N as D,m as O,Y as q,T as J,aa as xt,ab as pt,u as De,d as ze,f as Re,n as p,s as K,bE as gt,p as mt,P as ft,M as yt,i as Ie,a8 as $,X as Z,aZ as Q,a3 as G,ax as Y,Z as X,cw as se,cA as re,aV as ae,by as ie,cj as oe,ck as ne,cf as le,bA as ce,ce as de,aW as ue,cm as he,x as xe,cp as pe,cq as ge,b0 as me,cx as fe,cu as ye,ct as je,cr as be,cs as ve,a2 as Ne,cz as we,cy as Ce,cv as Se,cP as _e,cl as Ee,l as ke,aX as Fe,aR as Pe,bc as Me,cn as Be,cQ as Ae,az as jt,Q as bt,aA as vt}from"./ui-28e30067.js";import{S as He}from"./SearchBar-c613e419.js";import{a as Nt}from"./CategoryFormModal-0cc6b6de.js";import wt from"./EnhancedSupplierManagementPage-2cfbfd01.js";import Ct from"./StorageRoomManagementPage-6a067649.js";import{A as St}from"./AddProductModal-144ca68a.js";import"./supabase-cf010ec4.js";import"./utils-95f4031a.js";import"./charts-d592fbd1.js";import"./forms-ebbdb905.js";import"./zod-78f78e6c.js";import"./GlassInput-0475021a.js";import"./GlassSelect-e243562f.js";import"./GlassBadge-9ae09fa8.js";import"./useBodyScrollLock-341c8b9f.js";import"./BackButton-02a80e74.js";import"./SupplierDetailModal-41a61e96.js";import"./EnhancedAddSupplierModal-988446e5.js";import"./storeLocationApi-1725ef86.js";import"./skuUtils-60e0a165.js";import"./CategoryInput-e47eba98.js";import"./specificationUtils-0c00478d.js";const _t=(n={})=>{const{activeOnly:i=!0,searchQuery:s="",autoFetch:r=!0}=n,[u,g]=c.useState([]),[m,v]=c.useState(!1),[y,d]=c.useState(null),j=async()=>{try{v(!0),d(null);let x;s?x=await te(s):i?x=await Ve():x=await et(),g(x)}catch(x){d(x instanceof Error?x.message:"Failed to fetch categories"),console.error("Error fetching categories:",x)}finally{v(!1)}},f=async()=>{await j()},w=async x=>{try{v(!0),d(null);const N=await te(x);g(N)}catch(N){d(N instanceof Error?N.message:"Failed to search categories"),console.error("Error searching categories:",N)}finally{v(!1)}};return c.useEffect(()=>{r&&j()},[i,s,r]),{categories:u,loading:m,error:y,refetch:f,search:w}},Ue=({category:n,level:i,onEditCategory:s,onDeleteCategory:r,onAddSubcategory:u,selectedCategoryId:g,onSelectCategory:m})=>{const[v,y]=c.useState(!1),d=n.children&&n.children.length>0,j=g===n.id,f=()=>{d&&y(!v)},w=()=>{m==null||m(n)};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:`
          flex items-center gap-2 p-2 rounded-md transition-colors cursor-pointer group
          ${j?"bg-blue-50 border border-blue-200":"hover:bg-gray-50 border border-transparent"}
        `,style:{paddingLeft:`${i*20+12}px`},children:[d?e.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-200 rounded transition-colors",children:v?e.jsx(dt,{size:16,className:"text-gray-600"}):e.jsx(ut,{size:16,className:"text-gray-600"})}):e.jsx("div",{className:"w-6"}),e.jsx("div",{className:"w-6 h-6 rounded flex items-center justify-center",style:{backgroundColor:n.color||"#3B82F6"},children:v?e.jsx(ht,{size:14,className:"text-white"}):e.jsx(Te,{size:14,className:"text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:w,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 truncate",children:n.name}),!n.is_active&&e.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded",children:"Inactive"})]}),n.description&&e.jsx("p",{className:"text-sm text-gray-600 truncate",children:n.description})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>u(n.id),className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Add subcategory",children:e.jsx(D,{size:14})}),e.jsx("button",{onClick:()=>s(n),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit category",children:e.jsx(O,{size:14})}),e.jsx("button",{onClick:()=>r(n.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete category",children:e.jsx(q,{size:14})})]})]}),v&&d&&e.jsx("div",{className:"w-full",children:n.children.map(x=>e.jsx(Ue,{category:x,level:i+1,onEditCategory:s,onDeleteCategory:r,onAddSubcategory:u,selectedCategoryId:g,onSelectCategory:m},x.id))})]})},Et=({categories:n,onEditCategory:i,onDeleteCategory:s,onAddSubcategory:r,selectedCategoryId:u,onSelectCategory:g})=>{const v=(y=>{const d=new Map,j=[];return y.forEach(f=>{d.set(f.id,{...f,children:[]})}),y.forEach(f=>{if(f.parent_id){const w=d.get(f.parent_id);w&&(w.children=w.children||[],w.children.push(d.get(f.id)))}else j.push(d.get(f.id))}),j})(n);return v.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Te,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No categories found"}),e.jsx("p",{className:"text-gray-600",children:"Get started by adding your first category"})]}):e.jsx("div",{className:"w-full space-y-1",children:v.map(y=>e.jsx(Ue,{category:y,level:0,onEditCategory:i,onDeleteCategory:s,onAddSubcategory:r,selectedCategoryId:u,onSelectCategory:g},y.id))})},Le=()=>{const{categories:n,loading:i,refreshCategories:s}=_t(),[r,u]=c.useState([]),[g,m]=c.useState(""),[v,y]=c.useState(!1),[d,j]=c.useState(null),[f,w]=c.useState(!1),[x,N]=c.useState("tree"),[A,H]=c.useState();c.useEffect(()=>{let o=n||[];g&&(o=o.filter(h=>{var C;return h.name.toLowerCase().includes(g.toLowerCase())||((C=h.description)==null?void 0:C.toLowerCase().includes(g.toLowerCase()))})),u(o)},[n,g]);const L=()=>{j(null),y(!0)},P=o=>{const h={...o,parentId:o.parent_id,isActive:o.is_active,sortOrder:o.sort_order,createdAt:o.created_at,updatedAt:o.updated_at};j(h),y(!0)},E=async o=>{if(confirm("Are you sure you want to delete this category?"))try{await tt(o),p.success("Category deleted successfully"),s()}catch(h){p.error(h.message||"Failed to delete category")}},b=async o=>{try{w(!0),d&&d.id?(await st(d.id,o),p.success("Category updated successfully")):(await rt(o),p.success("Category created successfully")),y(!1),s()}catch(h){p.error(h.message||(d?"Failed to update category":"Failed to create category"))}finally{w(!1)}},k=()=>(n==null?void 0:n.filter(o=>!o.parent_id))||[],M=o=>{n==null||n.find(C=>C.id===o),j(null),j({id:void 0,name:"",description:"",parent_id:o,color:"#3B82F6",icon:"",is_active:!0,sort_order:0,created_at:"",updated_at:"",parentId:o,isActive:!0,sortOrder:0,createdAt:"",updatedAt:""}),y(!0)},a=o=>{H(o.id)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(J,{className:"w-6 h-6 text-green-600"}),"Category Management"]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Organize products into categories (",r.length," categories)"]})]}),e.jsx(B,{onClick:L,icon:e.jsx(D,{size:18}),className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:"Add Category"})]}),e.jsx(I,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsx(He,{placeholder:"Search categories...",onSearch:m})}),e.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>N("tree"),className:`p-2 rounded-md transition-colors ${x==="tree"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"}`,title:"Tree view",children:e.jsx(xt,{size:18})}),e.jsx("button",{onClick:()=>N("grid"),className:`p-2 rounded-md transition-colors ${x==="grid"?"bg-white shadow-sm text-blue-600":"text-gray-600 hover:text-gray-900"}`,title:"Grid view",children:e.jsx(pt,{size:18})})]})]})}),e.jsx(I,{className:"p-6",children:i?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"})}):r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(De,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No categories found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:g?"Try adjusting your search":"Get started by adding your first category"}),!g&&e.jsx(B,{onClick:L,icon:e.jsx(D,{size:18}),className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:"Add First Category"})]}):x==="tree"?e.jsx(Et,{categories:r,onEditCategory:P,onDeleteCategory:E,onAddSubcategory:M,selectedCategoryId:A,onSelectCategory:a}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(o=>{var h;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:o.color||"#3B82F6"},children:e.jsx(J,{className:"w-4 h-4 text-white"})}),e.jsx("h3",{className:"font-medium text-gray-900",children:o.name}),o.is_active?e.jsx(ze,{className:"w-4 h-4 text-green-500"}):e.jsx(Re,{className:"w-4 h-4 text-red-500"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>P(o),className:"p-1 text-gray-400 hover:text-green-600 transition-colors",title:"Edit category",children:e.jsx(O,{size:16})}),e.jsx("button",{onClick:()=>E(o.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete category",children:e.jsx(q,{size:16})})]})]}),o.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:o.description}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[o.product_count!==void 0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Products:"}),e.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:o.product_count})]}),o.parent_id&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium",children:"Parent:"}),e.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded",children:((h=n==null?void 0:n.find(C=>C.id===o.parent_id))==null?void 0:h.name)||"Unknown"})]})]})]},o.id)})})}),e.jsx(Nt,{isOpen:v,onClose:()=>y(!1),onSubmit:b,parentCategories:k(),loading:f,editingCategory:d})]})},kt=()=>{const[n,i]=c.useState([]),[s,r]=c.useState([]),[u,g]=c.useState(!1),[m,v]=c.useState(""),[y,d]=c.useState(!1),[j,f]=c.useState(null),[w,x]=c.useState(!1),[N,A]=c.useState({name:"",description:"",address:"",city:"",country:"",phone:"",email:"",manager:"",opening_hours:"",is_main_branch:!1}),H=[{value:"Kenya",label:"Kenya"},{value:"Tanzania",label:"Tanzania"},{value:"Uganda",label:"Uganda"},{value:"Other",label:"Other"}],L=[{value:"Nairobi",label:"Nairobi"},{value:"Mombasa",label:"Mombasa"},{value:"Kisumu",label:"Kisumu"},{value:"Other",label:"Other"}];c.useEffect(()=>{g(!0),setTimeout(()=>{i([{id:"1",name:"Main Branch - Nairobi",description:"Primary store location in Nairobi CBD",address:"123 Kimathi Street",city:"Nairobi",country:"Kenya",phone:"+254700123456",email:"nairobi@store.com",manager:"Jane Smith",opening_hours:"Mon-Fri: 8AM-6PM, Sat: 9AM-4PM",is_active:!0,is_main_branch:!0,created_at:"2024-01-01",updated_at:"2024-01-01"}]),g(!1)},1e3)},[]),c.useEffect(()=>{let a=n;m&&(a=a.filter(o=>{var h;return o.name.toLowerCase().includes(m.toLowerCase())||((h=o.description)==null?void 0:h.toLowerCase().includes(m.toLowerCase()))||o.city.toLowerCase().includes(m.toLowerCase())})),r(a)},[n,m]);const P=()=>{f(null),A({name:"",description:"",address:"",city:"",country:"",phone:"",email:"",manager:"",opening_hours:"",is_main_branch:!1}),d(!0)},E=a=>{f(a),A({name:a.name,description:a.description||"",address:a.address,city:a.city,country:a.country,phone:a.phone||"",email:a.email||"",manager:a.manager||"",opening_hours:a.opening_hours||"",is_main_branch:a.is_main_branch}),d(!0)},b=async a=>{if(confirm("Are you sure you want to delete this store location?"))try{i(o=>o.filter(h=>h.id!==a)),p.success("Store location deleted successfully")}catch{p.error("Failed to delete store location")}},k=async a=>{a.preventDefault(),x(!0);try{if(j)i(o=>o.map(h=>h.id===j.id?{...h,...N}:h)),p.success("Store location updated successfully");else{const o={id:Date.now().toString(),...N,is_active:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};i(h=>[...h,o]),p.success("Store location created successfully")}d(!1)}catch{p.error(j?"Failed to update store location":"Failed to create store location")}finally{x(!1)}},M=(a,o)=>{A(h=>({...h,[a]:o}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(K,{className:"w-6 h-6 text-orange-600"}),"Store Locations"]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage store locations and branches (",s.length," locations)"]})]}),e.jsx(B,{onClick:P,icon:e.jsx(D,{size:18}),className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:"Add Location"})]}),e.jsx(I,{className:"p-4",children:e.jsx(He,{placeholder:"Search store locations...",onSearch:v})}),e.jsx(I,{className:"p-6",children:u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"})}):s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(gt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No store locations found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:m?"Try adjusting your search":"Get started by adding your first store location"}),!m&&e.jsx(B,{onClick:P,icon:e.jsx(D,{size:18}),className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:"Add First Location"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(a=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"font-medium text-gray-900",children:a.name}),a.is_active?e.jsx(ze,{className:"w-4 h-4 text-green-500"}):e.jsx(Re,{className:"w-4 h-4 text-red-500"}),a.is_main_branch&&e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:"Main"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>E(a),className:"p-1 text-gray-400 hover:text-orange-600 transition-colors",title:"Edit location",children:e.jsx(O,{size:16})}),e.jsx("button",{onClick:()=>b(a.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete location",children:e.jsx(q,{size:16})})]})]}),a.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"}),e.jsxs("span",{children:[a.address,", ",a.city,", ",a.country]})]}),a.manager&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"w-3 h-3"}),e.jsx("span",{className:"font-medium",children:"Manager:"}),e.jsx("span",{children:a.manager})]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ft,{className:"w-3 h-3"}),e.jsx("a",{href:`tel:${a.phone}`,className:"text-blue-600 hover:underline",children:a.phone})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(yt,{className:"w-3 h-3"}),e.jsx("a",{href:`mailto:${a.email}`,className:"text-blue-600 hover:underline",children:a.email})]})]})]},a.id))})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:j?"Edit Store Location":"Add New Store Location"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Name *"}),e.jsx("input",{type:"text",value:N.name,onChange:a=>M("name",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),e.jsx("input",{type:"text",value:N.address,onChange:a=>M("address",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),e.jsxs("select",{value:N.city,onChange:a=>M("city",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select city"}),L.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),e.jsxs("select",{value:N.country,onChange:a=>M("country",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select country"}),H.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_main_branch",checked:N.is_main_branch,onChange:a=>M("is_main_branch",a.target.checked),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("label",{htmlFor:"is_main_branch",className:"text-sm font-medium text-gray-700",children:"Main Branch"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(B,{type:"submit",disabled:w,className:"flex-1 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:w?"Saving...":j?"Update Location":"Add Location"}),e.jsx(B,{type:"button",onClick:()=>d(!1),variant:"secondary",className:"flex-1",children:"Cancel"})]})]})]})})})]})};class Ft{async getCategories(){try{const{data:i,error:s}=await F.from("lats_specification_categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(s)throw console.error("Error fetching categories:",s),new Error(`Failed to fetch categories: ${s.message}`);return i||[]}catch(i){throw console.error("Error in getCategories:",i),i}}async getCategoryById(i){try{const{data:s,error:r}=await F.from("lats_specification_categories").select("*").eq("id",i).single();return r?(console.error("Error fetching category:",r),null):s}catch(s){return console.error("Error in getCategoryById:",s),null}}async getCategoryByCategoryId(i){try{const{data:s,error:r}=await F.from("lats_specification_categories").select("*").eq("category_id",i).single();return r?(console.error("Error fetching category by category_id:",r),null):s}catch(s){return console.error("Error in getCategoryByCategoryId:",s),null}}async createCategory(i){try{const{data:s,error:r}=await F.from("lats_specification_categories").insert([i]).select().single();if(r)throw console.error("Error creating category:",r),new Error(`Failed to create category: ${r.message}`);return p.success("Category created successfully!"),s}catch(s){throw console.error("Error in createCategory:",s),p.error("Failed to create category"),s}}async updateCategory(i,s){try{const{data:r,error:u}=await F.from("lats_specification_categories").update(s).eq("id",i).select().single();if(u)throw console.error("Error updating category:",u),new Error(`Failed to update category: ${u.message}`);return p.success("Category updated successfully!"),r}catch(r){throw console.error("Error in updateCategory:",r),p.error("Failed to update category"),r}}async deleteCategory(i){try{const{error:s}=await F.from("lats_specification_categories").delete().eq("id",i);if(s)throw console.error("Error deleting category:",s),new Error(`Failed to delete category: ${s.message}`);p.success("Category deleted successfully!")}catch(s){throw console.error("Error in deleteCategory:",s),p.error("Failed to delete category"),s}}async getSpecificationsByCategory(i){try{const{data:s,error:r}=await F.from("lats_specifications").select("*").eq("category_id",i).eq("is_active",!0).order("sort_order",{ascending:!0});if(r)throw console.error("Error fetching specifications:",r),new Error(`Failed to fetch specifications: ${r.message}`);return s||[]}catch(s){throw console.error("Error in getSpecificationsByCategory:",s),s}}async getSpecificationById(i){try{const{data:s,error:r}=await F.from("lats_specifications").select("*").eq("id",i).single();return r?(console.error("Error fetching specification:",r),null):s}catch(s){return console.error("Error in getSpecificationById:",s),null}}async createSpecification(i){try{const{data:s,error:r}=await F.from("lats_specifications").insert([i]).select().single();if(r)throw console.error("Error creating specification:",r),new Error(`Failed to create specification: ${r.message}`);return p.success("Specification created successfully!"),s}catch(s){throw console.error("Error in createSpecification:",s),p.error("Failed to create specification"),s}}async updateSpecification(i,s){try{const{data:r,error:u}=await F.from("lats_specifications").update(s).eq("id",i).select().single();if(u)throw console.error("Error updating specification:",u),new Error(`Failed to update specification: ${u.message}`);return p.success("Specification updated successfully!"),r}catch(r){throw console.error("Error in updateSpecification:",r),p.error("Failed to update specification"),r}}async deleteSpecification(i){try{const{error:s}=await F.from("lats_specifications").delete().eq("id",i);if(s)throw console.error("Error deleting specification:",s),new Error(`Failed to delete specification: ${s.message}`);p.success("Specification deleted successfully!")}catch(s){throw console.error("Error in deleteSpecification:",s),p.error("Failed to delete specification"),s}}async getProductSpecifications(i){try{const{data:s,error:r}=await F.from("lats_product_specifications").select("*").eq("product_id",i);if(r)throw console.error("Error fetching product specifications:",r),new Error(`Failed to fetch product specifications: ${r.message}`);return s||[]}catch(s){throw console.error("Error in getProductSpecifications:",s),s}}async setProductSpecification(i,s,r){try{const{data:u,error:g}=await F.from("lats_product_specifications").upsert([{product_id:i,specification_id:s,value:r}]).select().single();if(g)throw console.error("Error setting product specification:",g),new Error(`Failed to set product specification: ${g.message}`);return u}catch(u){throw console.error("Error in setProductSpecification:",u),u}}async deleteProductSpecification(i,s){try{const{error:r}=await F.from("lats_product_specifications").delete().eq("product_id",i).eq("specification_id",s);if(r)throw console.error("Error deleting product specification:",r),new Error(`Failed to delete product specification: ${r.message}`)}catch(r){throw console.error("Error in deleteProductSpecification:",r),r}}async getSpecificationsByType(i){try{const s=await this.getSpecificationsByCategory(i),r={text:[],number:[],select:[],boolean:[]};return s.forEach(u=>{r[u.type]&&r[u.type].push(u)}),r}catch(s){throw console.error("Error in getSpecificationsByType:",s),s}}async getCategoryWithSpecifications(i){try{const[s,r]=await Promise.all([this.getCategoryByCategoryId(i),this.getSpecificationsByCategory(i)]);return{category:s,specifications:r}}catch(s){throw console.error("Error in getCategoryWithSpecifications:",s),s}}}const T=new Ft,Pt=()=>{const[n,i]=c.useState(""),[s,r]=c.useState(null),[u,g]=c.useState([]),[m,v]=c.useState([]),[y,d]=c.useState(!1),[j,f]=c.useState(!1),[w,x]=c.useState(!1),[N,A]=c.useState(!1),[H,L]=c.useState(null),[P,E]=c.useState(!1),[b,k]=c.useState({spec_key:"",name:"",type:"text",options:[],unit:"",placeholder:"",icon:"Settings"}),[M,a]=c.useState("");c.useEffect(()=>{o()},[]),c.useEffect(()=>{n&&u.length>0&&h(n)},[n,u]);const o=async()=>{try{E(!0);const t=await T.getCategories();g(t),t.length>0&&!n&&i(t[0].category_id)}catch(t){console.error("Error loading categories:",t),p.error("Failed to load categories")}finally{E(!1)}},h=async t=>{try{E(!0);const l=u.find(S=>S.category_id===t);if(l){const S=await T.getSpecificationsByCategory(l.id);v(S)}else{const S=await T.getSpecificationsByCategory(t);v(S)}}catch(l){console.error("Error loading specifications:",l),p.error("Failed to load specifications")}finally{E(!1)}},[C,z]=c.useState({category_id:"",name:"",color:"blue",icon:"Monitor",description:""}),$e=()=>{k({spec_key:"",name:"",type:"text",options:[],unit:"",placeholder:"",icon:"Settings"}),d(!0)},Oe=t=>{k({spec_key:t.spec_key,name:t.name,type:t.type,options:t.options||[],unit:t.unit||"",placeholder:t.placeholder||"",icon:t.icon}),r(t),f(!0)},qe=async()=>{if(!b.spec_key||!b.name){p.error("Key and name are required");return}E(!0);try{const t=u.find(S=>S.category_id===n);if(!t){p.error("Active category not found");return}const l={category_id:t.id,spec_key:b.spec_key,name:b.name,type:b.type,icon:b.icon,options:b.options,unit:b.unit||void 0,placeholder:b.placeholder||void 0};s?await T.updateSpecification(s.id,l):await T.createSpecification(l),d(!1),f(!1),r(null),h(n)}catch(t){console.error("Error saving specification:",t)}finally{E(!1)}},We=async t=>{if(confirm("Are you sure you want to delete this specification?")){E(!0);try{await T.deleteSpecification(t),h(n)}catch(l){console.error("Error deleting specification:",l)}finally{E(!1)}}},V=()=>{M.trim()&&!b.options.includes(M.trim())&&(k(t=>({...t,options:[...t.options,M.trim()]})),a(""))},Ge=t=>{k(l=>({...l,options:l.options.filter(S=>S!==t)}))},Ke=()=>{z({category_id:"",name:"",color:"blue",icon:"Monitor",description:""}),x(!0)},Ze=t=>{z({category_id:t.category_id,name:t.name,color:t.color,icon:t.icon,description:t.description||""}),L(t),A(!0)},Qe=async()=>{if(!C.category_id||!C.name){p.error("Category ID and name are required");return}E(!0);try{const t={category_id:C.category_id,name:C.name,icon:C.icon,color:C.color,description:C.description||void 0};H?await T.updateCategory(H.id,t):await T.createCategory(t),x(!1),A(!1),L(null),o()}catch(t){console.error("Error saving category:",t)}finally{E(!1)}},Ye=async t=>{if(confirm("Are you sure you want to delete this category? This will also delete all specifications in this category.")){E(!0);try{const l=u.find(S=>S.category_id===t);if(l&&(await T.deleteCategory(l.id),o(),n===t)){const S=u.filter(R=>R.category_id!==t);S.length>0&&i(S[0].category_id)}}catch(l){console.error("Error deleting category:",l)}finally{E(!1)}}},Xe=t=>{switch(t){case"text":return G;case"number":return X;case"boolean":return Y;case"select":return $;default:return G}},Je=t=>{switch(t){case"text":return"blue";case"number":return"green";case"boolean":return"purple";case"select":return"orange";default:return"gray"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(Ie,{className:"w-8 h-8 text-blue-600"}),"Specification Management"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage product specifications and attributes"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(B,{onClick:Ke,icon:e.jsx(D,{size:16}),className:"bg-green-600 text-white hover:bg-green-700",children:"Add Category"}),e.jsx(B,{onClick:$e,icon:e.jsx(D,{size:16}),className:"bg-blue-600 text-white hover:bg-blue-700",children:"Add Specification"})]})]}),P&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading specifications..."})]}),e.jsx(I,{className:"p-6",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:u.map(t=>{const S=(U=>({Monitor:Q,PhoneCall:se,Cable:re,Settings:$,HardDrive:ae,Camera:ie,Speaker:oe,Headphones:ne,Battery:le,Wifi:ce,Cpu:de,Palette:ue,Zap:X,FileText:G,Check:Y,Hand:he,Lightbulb:xe,Fingerprint:pe,ScanFace:ge,RotateCcw:me,PenTool:fe,FastForward:ye,BatteryCharging:je,Droplets:be,Wind:ve,Shield:Ne,Usb:we,Bluetooth:Ce,Expand:Se,Radio:_e,Mic:Ee,Eye:ke,Sun:Fe,Power:Pe,Ruler:Me,Unplug:Be,Navigation:Ae})[U]||Q)(t.icon),R=n===t.category_id,_=m;return e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:()=>i(t.category_id),className:`flex items-center gap-2 px-4 py-3 rounded-lg text-sm font-medium whitespace-nowrap transition-all ${R?`bg-${t.color}-100 text-${t.color}-700 border-2 border-${t.color}-300`:"bg-white text-gray-600 border border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(S,{size:16}),t.name,e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-xs",children:_.length})]}),e.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:U=>{U.stopPropagation(),Ze(t)},className:"p-1 text-gray-400 hover:text-blue-600 transition-colors bg-white rounded shadow-sm",title:"Edit category",children:e.jsx(O,{size:12})}),e.jsx("button",{onClick:U=>{U.stopPropagation(),Ye(t.category_id)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors bg-white rounded shadow-sm",title:"Delete category",children:e.jsx(q,{size:12})})]})})]},t.id)})})}),e.jsxs("div",{className:"space-y-6",children:[Object.entries(m.reduce((t,l)=>(t[l.type]||(t[l.type]=[]),t[l.type].push(l),t),{})).map(([t,l])=>{if(l.length===0)return null;const S=Xe(t),R=Je(t);return e.jsxs(I,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(S,{className:`w-5 h-5 text-${R}-600`}),t==="text"?"Text Fields":t==="number"?"Number Fields":t==="select"?"Dropdown Selections":t==="boolean"?"Yes/No Features":t,e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded-full text-sm",children:[l.length," fields"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(_=>{const ee=(W=>({Monitor:Q,PhoneCall:se,Cable:re,Settings:$,HardDrive:ae,Camera:ie,Speaker:oe,Headphones:ne,Battery:le,Wifi:ce,Cpu:de,Palette:ue,Zap:X,FileText:G,Check:Y,Hand:he,Lightbulb:xe,Fingerprint:pe,ScanFace:ge,RotateCcw:me,PenTool:fe,FastForward:ye,BatteryCharging:je,Droplets:be,Wind:ve,Shield:Ne,Usb:we,Bluetooth:Ce,Expand:Se,Radio:_e,Mic:Ee,Eye:ke,Sun:Fe,Power:Pe,Ruler:Me,Unplug:Be,Navigation:Ae})[W]||$)(_.icon);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{size:16,className:"text-gray-500"}),e.jsx("h4",{className:"font-medium text-gray-900",children:_.name})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Oe(_),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Edit specification",children:e.jsx(O,{size:14})}),e.jsx("button",{onClick:()=>We(_.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete specification",children:e.jsx(q,{size:14})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Key:"}),e.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:_.spec_key})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Type:"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs bg-${R}-100 text-${R}-700`,children:_.type})]}),_.unit&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Unit:"}),e.jsx("span",{className:"text-gray-500",children:_.unit})]}),_.placeholder&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Placeholder:"}),e.jsxs("span",{className:"text-gray-500 italic",children:['"',_.placeholder,'"']})]}),_.options&&_.options.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Options:"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[_.options.slice(0,3).map(W=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs",children:W},W)),_.options.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",_.options.length-3," more"]})]})]})]})]},_.id)})})]},t)}),!P&&m.length===0&&e.jsx(I,{className:"p-8 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx($,{className:"w-12 h-12 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No specifications found"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Get started by adding your first specification to the ",n," category."]}),e.jsx(B,{onClick:()=>d(!0),icon:e.jsx(D,{size:16}),className:"bg-blue-600 text-white hover:bg-blue-700",children:"Add Specification"})]})]})})]}),(y||j)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:y?"Add New Specification":"Edit Specification"}),e.jsx("button",{onClick:()=>{d(!1),f(!1),r(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Z,{size:20})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Key *"}),e.jsx("input",{type:"text",value:b.spec_key,onChange:t=>k(l=>({...l,spec_key:t.target.value})),placeholder:"e.g., screen_size",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:b.name,onChange:t=>k(l=>({...l,name:t.target.value})),placeholder:"e.g., Screen Size",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),e.jsxs("select",{value:b.type,onChange:t=>k(l=>({...l,type:t.target.value})),className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"boolean",children:"Boolean (Yes/No)"}),e.jsx("option",{value:"select",children:"Select (Dropdown)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),e.jsxs("select",{value:b.icon,onChange:t=>k(l=>({...l,icon:t.target.value})),className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"Settings",children:"Settings"}),e.jsx("option",{value:"Monitor",children:"Monitor"}),e.jsx("option",{value:"PhoneCall",children:"Phone"}),e.jsx("option",{value:"Cable",children:"Cable"}),e.jsx("option",{value:"HardDrive",children:"Hard Drive"}),e.jsx("option",{value:"Camera",children:"Camera"}),e.jsx("option",{value:"Speaker",children:"Speaker"}),e.jsx("option",{value:"Headphones",children:"Headphones"}),e.jsx("option",{value:"Battery",children:"Battery"}),e.jsx("option",{value:"Wifi",children:"WiFi"}),e.jsx("option",{value:"Cpu",children:"CPU"}),e.jsx("option",{value:"Palette",children:"Palette"}),e.jsx("option",{value:"Zap",children:"Zap"}),e.jsx("option",{value:"FileText",children:"File Text"}),e.jsx("option",{value:"Check",children:"Check"}),e.jsx("option",{value:"Hand",children:"Hand"}),e.jsx("option",{value:"Lightbulb",children:"Lightbulb"}),e.jsx("option",{value:"Fingerprint",children:"Fingerprint"}),e.jsx("option",{value:"ScanFace",children:"Face Scan"}),e.jsx("option",{value:"RotateCcw",children:"Rotate"}),e.jsx("option",{value:"PenTool",children:"Pen Tool"}),e.jsx("option",{value:"FastForward",children:"Fast Forward"}),e.jsx("option",{value:"BatteryCharging",children:"Battery Charging"}),e.jsx("option",{value:"Droplets",children:"Droplets"}),e.jsx("option",{value:"Wind",children:"Wind"}),e.jsx("option",{value:"Shield",children:"Shield"}),e.jsx("option",{value:"Usb",children:"USB"}),e.jsx("option",{value:"Bluetooth",children:"Bluetooth"}),e.jsx("option",{value:"Expand",children:"Expand"}),e.jsx("option",{value:"Radio",children:"Radio"}),e.jsx("option",{value:"Mic",children:"Microphone"}),e.jsx("option",{value:"Eye",children:"Eye"}),e.jsx("option",{value:"Sun",children:"Sun"}),e.jsx("option",{value:"Power",children:"Power"}),e.jsx("option",{value:"Ruler",children:"Ruler"}),e.jsx("option",{value:"Unplug",children:"Unplug"}),e.jsx("option",{value:"Navigation",children:"Navigation"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),e.jsx("input",{type:"text",value:b.unit,onChange:t=>k(l=>({...l,unit:t.target.value})),placeholder:"e.g., inch, kg, GB",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Placeholder"}),e.jsx("input",{type:"text",value:b.placeholder,onChange:t=>k(l=>({...l,placeholder:t.target.value})),placeholder:"e.g., Enter screen size",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),b.type==="select"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:M,onChange:t=>a(t.target.value),placeholder:"Add option",className:"flex-1 py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",onKeyPress:t=>{t.key==="Enter"&&(t.preventDefault(),V())}}),e.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.options.map(t=>e.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm",children:[t,e.jsx("button",{type:"button",onClick:()=>Ge(t),className:"text-blue-500 hover:text-blue-700",children:e.jsx(Z,{size:14})})]},t))})]})]})]})}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{d(!1),f(!1),r(null)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:qe,disabled:P,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:P?"Saving...":"Save"})]})})]})}),(w||N)&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"border-b border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:w?"Add New Category":"Edit Category"}),e.jsx("button",{onClick:()=>{x(!1),A(!1),L(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Z,{size:20})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category ID *"}),e.jsx("input",{type:"text",value:C.category_id,onChange:t=>z(l=>({...l,category_id:t.target.value})),placeholder:"e.g., desktop, printer",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),e.jsx("input",{type:"text",value:C.name,onChange:t=>z(l=>({...l,name:t.target.value})),placeholder:"e.g., Desktop Computer",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("input",{type:"text",value:C.description,onChange:t=>z(l=>({...l,description:t.target.value})),placeholder:"e.g., Desktop computers and workstations",className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsxs("select",{value:C.color,onChange:t=>z(l=>({...l,color:t.target.value})),className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"blue",children:"Blue"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"purple",children:"Purple"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"red",children:"Red"}),e.jsx("option",{value:"yellow",children:"Yellow"}),e.jsx("option",{value:"indigo",children:"Indigo"}),e.jsx("option",{value:"pink",children:"Pink"}),e.jsx("option",{value:"gray",children:"Gray"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),e.jsxs("select",{value:C.icon,onChange:t=>z(l=>({...l,icon:t.target.value})),className:"w-full py-2 px-3 border border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none",children:[e.jsx("option",{value:"Monitor",children:"Monitor"}),e.jsx("option",{value:"PhoneCall",children:"Phone"}),e.jsx("option",{value:"Cable",children:"Cable"}),e.jsx("option",{value:"Settings",children:"Settings"}),e.jsx("option",{value:"HardDrive",children:"Hard Drive"}),e.jsx("option",{value:"Camera",children:"Camera"}),e.jsx("option",{value:"Speaker",children:"Speaker"}),e.jsx("option",{value:"Headphones",children:"Headphones"}),e.jsx("option",{value:"Battery",children:"Battery"}),e.jsx("option",{value:"Wifi",children:"WiFi"}),e.jsx("option",{value:"Cpu",children:"CPU"}),e.jsx("option",{value:"Palette",children:"Palette"}),e.jsx("option",{value:"Zap",children:"Zap"}),e.jsx("option",{value:"FileText",children:"File Text"}),e.jsx("option",{value:"Check",children:"Check"}),e.jsx("option",{value:"Hand",children:"Hand"}),e.jsx("option",{value:"Lightbulb",children:"Lightbulb"}),e.jsx("option",{value:"Fingerprint",children:"Fingerprint"}),e.jsx("option",{value:"ScanFace",children:"Face Scan"}),e.jsx("option",{value:"RotateCcw",children:"Rotate"}),e.jsx("option",{value:"PenTool",children:"Pen Tool"}),e.jsx("option",{value:"FastForward",children:"Fast Forward"}),e.jsx("option",{value:"BatteryCharging",children:"Battery Charging"}),e.jsx("option",{value:"Droplets",children:"Droplets"}),e.jsx("option",{value:"Wind",children:"Wind"}),e.jsx("option",{value:"Shield",children:"Shield"}),e.jsx("option",{value:"Usb",children:"USB"}),e.jsx("option",{value:"Bluetooth",children:"Bluetooth"}),e.jsx("option",{value:"Expand",children:"Expand"}),e.jsx("option",{value:"Radio",children:"Radio"}),e.jsx("option",{value:"Mic",children:"Microphone"}),e.jsx("option",{value:"Eye",children:"Eye"}),e.jsx("option",{value:"Sun",children:"Sun"}),e.jsx("option",{value:"Power",children:"Power"}),e.jsx("option",{value:"Ruler",children:"Ruler"}),e.jsx("option",{value:"Unplug",children:"Unplug"}),e.jsx("option",{value:"Navigation",children:"Navigation"})]})]})]})]})}),e.jsx("div",{className:"border-t border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{x(!1),A(!1),L(null)},className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Qe,disabled:P,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:P?"Saving...":"Save Category"})]})})]})})]})},Mt=[{id:"categories",label:"Categories",icon:J,color:"green",description:"Organize products into categories"},{id:"suppliers",label:"Suppliers",icon:bt,color:"purple",description:"Manage suppliers and vendor relationships"},{id:"store-locations",label:"Store Locations",icon:K,color:"orange",description:"Manage store locations and branches"},{id:"storage-room",label:"Storage Room",icon:vt,color:"indigo",description:"Manage storage rooms and capacity"},{id:"specifications",label:"Specifications",icon:Ie,color:"blue",description:"Manage product specifications and attributes"}],ns=()=>{const{currentUser:n}=at(),i=it(),[s]=ot(),[r,u]=c.useState("categories");c.useState(!1);const[g,m]=c.useState(!1);c.useEffect(()=>{var w,x,N;if(!n){i("/login");return}if(!(((w=n.permissions)==null?void 0:w.includes("all"))||((x=n.permissions)==null?void 0:x.includes("view_inventory"))||((N=n.permissions)==null?void 0:N.includes("edit_settings"))||["admin","customer-care"].includes(n.role))){i("/dashboard");return}const j=s.get("storage-room"),f=s.get("shelves");(j||f)&&u("storage-room")},[n,i,s]);const v=d=>{u(d)},y=()=>{switch(r){case"categories":return e.jsx(Le,{});case"suppliers":return e.jsx(wt,{embedded:!0});case"store-locations":return e.jsx(kt,{});case"storage-room":return e.jsx(Ct,{});case"specifications":return e.jsx(Pt,{});default:return e.jsx(Le,{})}};return n?e.jsxs(lt,{pageName:"Inventory Management",showDetails:!0,children:[e.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6",children:[e.jsx(ct,{title:"Inventory Management",subtitle:"Manage brands, categories, suppliers, and system settings",actions:e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(B,{onClick:()=>i("/lats/unified-inventory"),variant:"secondary",icon:e.jsx(De,{size:18}),children:"Back to Inventory"}),e.jsx(B,{onClick:()=>i("/lats/stock-transfers"),variant:"secondary",icon:e.jsx(jt,{size:18}),className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700",children:"Stock Transfers"}),e.jsx(B,{onClick:()=>m(!0),icon:e.jsx(D,{size:18}),className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:"Add Product"})]})}),e.jsx(nt,{tabs:Mt.map(d=>({id:d.id,label:d.label,icon:e.jsx(d.icon,{size:20}),description:d.description})),activeTab:r,onTabChange:d=>v(d),variant:"modern",size:"md"}),e.jsx("div",{className:"min-h-[600px]",children:y()})]}),e.jsx(St,{isOpen:g,onClose:()=>m(!1),onProductCreated:()=>{m(!1),p.success("Product created successfully")}})]}):null};export{ns as default};
