import{j as e,aD as Y,s as U,M as J}from"./index-61458a34.js";import{r as g,b as O}from"./vendor-36d2c7c1.js";import{n as N,X as ee,q as te,N as se,Y as oe,u as ne}from"./ui-28e30067.js";const re=["Shipping Cost","Customs Duty","Import Tax","Handling Fee","Insurance","Transportation","Packaging","Other"],de=({isOpen:p,onClose:F,purchaseOrder:n,onConfirm:q,isLoading:S=!1,initialPricingData:C,selectedQuantities:k})=>{var $,W,z;const[h,j]=g.useState(new Map),[M,V]=g.useState(new Map),[L,T]=g.useState(!1);g.useState(new Set);const[ae,y]=g.useState(!1),[Z,A]=g.useState(n.items.length>0?n.items[0].id:null),[b,B]=g.useState(""),E=Y(),u=t=>{const s=typeof t=="string"?parseFloat(t):t;return s%1===0?s.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}):s.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})};g.useEffect(()=>(p?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[p]);const R=g.useCallback(t=>{const s=n.currency,o=n.exchangeRate;return!s||s==="TZS"?t:o&&o>0?t*o:t},[n.currency,n.exchangeRate]);g.useEffect(()=>{p&&n.items.length>0&&A(n.items[0].id)},[p,n.items]);const D=g.useCallback(async()=>{T(!0);try{const t=new Map;for(const s of n.items)if(s.productId)try{const o=await E.getProduct(s.productId);if(o.ok&&o.data){const i=parseFloat(String(o.data.price||0))||0;t.set(s.id,i)}}catch{}V(t)}catch{N.error("Error loading product prices")}finally{T(!1)}},[n.items,E]);g.useEffect(()=>{p&&n.items.length>0&&D()},[p,D]),g.useEffect(()=>{if(p&&n.items.length>0){if(C&&C.size>0){j(C);return}const t=new Map;n.items.forEach(s=>{const o=parseFloat(String(s.costPrice||0))||0,i=R(o),r=M.get(s.id)||0,a=30,l=[],c=i,d=r>0?r:c*(1+a/100),x=d-c,m=c>0?x/c*100:a;t.set(s.id,{cost_price:parseFloat(i.toFixed(2)),additional_costs:l,total_cost:parseFloat(c.toFixed(2)),selling_price:parseFloat(d.toFixed(2)),markup_percentage:parseFloat(m.toFixed(2)),profit_per_unit:parseFloat(x.toFixed(2))})}),j(t)}},[p,n.items,n.currency,n.exchangeRate,M,C,R,k]);const _=t=>k&&k.has(t.id)?k.get(t.id)||0:t.quantity-(t.receivedQuantity||0),P=t=>{let s=0,o=0;n.items.forEach(a=>{const l=t.get(a.id);if(l){const c=_(a);o+=c,a===n.items[0]&&(s=l.additional_costs.reduce((d,x)=>d+x.amount,0))}});const i=o>0?s/o:0,r=new Map(t);return n.items.forEach(a=>{const l=r.get(a.id);if(l){const c=l.cost_price+i,d=l.selling_price-c,x=c>0?d/c*100:0;r.set(a.id,{...l,total_cost:parseFloat(c.toFixed(2)),markup_percentage:parseFloat(x.toFixed(2)),profit_per_unit:parseFloat(d.toFixed(2))})}}),r},v=(t,s)=>{j(o=>{const i=new Map(o),r=i.get(t);if(!r)return o;const a=r.total_cost,l=s-a,c=a>0?l/a*100:0;return i.set(t,{...r,selling_price:s,markup_percentage:parseFloat(c.toFixed(2)),profit_per_unit:parseFloat(l.toFixed(2))}),y(!0),setTimeout(()=>y(!1),600),i})},K=(t,s)=>{j(o=>{const i=new Map(o),r=i.get(t);if(!r)return o;const a=r.total_cost,l=a*(1+s/100),c=l-a;return i.set(t,{...r,selling_price:parseFloat(l.toFixed(2)),markup_percentage:s,profit_per_unit:parseFloat(c.toFixed(2))}),y(!0),setTimeout(()=>y(!1),600),i})},H=t=>{j(s=>{const o=new Map(s),i=o.get(t);if(!i)return s;const r={id:`cost-${Date.now()}-${Math.random()}`,category:"Shipping Cost",amount:0,description:""},a=[...i.additional_costs,r];return o.set(t,{...i,additional_costs:a}),P(o)})},Q=(t,s)=>{j(o=>{const i=new Map(o),r=i.get(t);if(!r)return o;const a=r.additional_costs.filter(l=>l.id!==s);return i.set(t,{...r,additional_costs:a}),P(i)})},I=(t,s,o,i)=>{j(r=>{const a=new Map(r),l=a.get(t);if(!l)return r;const c=l.additional_costs.map(d=>d.id===s?{...d,[o]:i}:d);return a.set(t,{...l,additional_costs:c}),o==="amount"&&(y(!0),setTimeout(()=>y(!1),600)),P(a)})},G=async()=>{const t=Array.from(h.entries()).filter(([s,o])=>o.selling_price>0);if(t.length===0){N.error("Please set prices for at least one product");return}try{const s=n.items[0],o=s?h.get(s.id):null,i=(o==null?void 0:o.additional_costs)||[];if(i.length>0){const{data:{user:r}}=await U.auth.getUser(),a=r==null?void 0:r.id,l=J();for(const c of i)if(c.amount>0)try{await U.from("expenses").insert({category:c.category,amount:c.amount,description:`${c.description||c.category} for entire order - PO ${n.id}`,date:new Date().toISOString().split("T")[0],created_by:a,purchase_order_id:n.id,branch_id:l,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})}catch{}N.success(`Recorded ${i.length} expense entries`)}await q(h),N.success(`Prices updated for ${t.length} products`),F()}catch{N.error("Failed to save pricing")}},X=()=>{let t=0,s=0,o=0,i=0,r=0,a=0,l=0,c=0;const d=n.items[0];if(d){const x=h.get(d.id);x&&(s=x.additional_costs.reduce((m,w)=>m+w.amount,0))}return n.items.forEach(x=>{const m=h.get(x.id);if(m)if(m.selling_price>0){l++;const w=_(x);a++,t+=m.cost_price*w,o+=m.total_cost*w,i+=m.selling_price*w,r+=m.profit_per_unit*w}else c++}),{totalBaseCost:t.toFixed(2),totalAdditionalCosts:s.toFixed(2),totalCost:o.toFixed(2),totalSelling:i.toFixed(2),totalProfit:r.toFixed(2),averageMarkup:o>0?((i-o)/o*100).toFixed(2):"0",itemCount:a,completedCount:l,pendingCount:c}};if(!p)return null;const f=X();return O.createPortal(e.jsx("div",{className:"fixed bg-black/60 flex items-center justify-center p-4 z-[99999]",style:{top:0,left:0,right:0,bottom:0},role:"dialog","aria-modal":"true","aria-labelledby":"pricing-modal-title",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] flex flex-col overflow-hidden relative",children:[e.jsx("button",{onClick:F,className:"absolute top-4 right-4 w-9 h-9 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-full transition-colors shadow-lg z-50",children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsx("div",{className:"p-8 bg-white border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"grid grid-cols-[auto,1fr] gap-6 items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(te,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{id:"pricing-modal-title",className:"text-2xl font-bold text-gray-900 mb-3",children:"Set Product Prices"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),e.jsxs("span",{className:"text-sm font-bold text-green-700",children:[f.completedCount," Done"]})]}),f.pendingCount>0&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-orange-50 border border-orange-200 rounded-lg animate-pulse",children:[e.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("span",{className:"text-sm font-bold text-orange-700",children:[f.pendingCount," Pending"]})]})]})]})]})}),e.jsx("div",{className:"p-6 pb-0 flex-shrink-0",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{children:n.items.length>0&&(($=h.get(n.items[0].id))==null?void 0:$.additional_costs.length)===0&&e.jsx("p",{className:"text-sm text-gray-600",children:"No additional costs"})}),e.jsxs("button",{type:"button",onClick:()=>{n.items.length>0&&H(n.items[0].id)},className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white text-sm rounded-xl transition-colors font-semibold shadow-lg",children:[e.jsx(se,{className:"w-4 h-4"}),"Add Cost"]})]}),n.items.length>0&&((W=h.get(n.items[0].id))==null?void 0:W.additional_costs.length)>0&&e.jsx("div",{className:"space-y-3",children:(z=h.get(n.items[0].id))==null?void 0:z.additional_costs.map((t,s)=>{const o=n.items.reduce((r,a)=>r+(a.quantity-(a.receivedQuantity||0)),0),i=o>0?t.amount/o:0;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("select",{value:t.category,onChange:r=>{I(n.items[0].id,t.id,"category",r.target.value)},className:"flex-1 px-3 py-2 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 font-medium",children:re.map(r=>e.jsx("option",{value:r,children:r},r))}),e.jsx("input",{type:"text",value:u(t.amount),onChange:r=>{const a=r.target.value.replace(/,/g,""),l=parseFloat(a)||0;I(n.items[0].id,t.id,"amount",l)},placeholder:"Amount",className:"w-40 px-3 py-2 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 font-bold text-lg"}),e.jsxs("span",{className:"text-xs text-gray-500 w-32",children:["â‰ˆ ",u(i)," / unit"]}),e.jsx("button",{type:"button",onClick:()=>{Q(n.items[0].id,t.id)},className:"p-2 text-red-600 hover:bg-red-100 rounded-xl transition-colors",children:e.jsx(oe,{className:"w-5 h-5"})})]},t.id)})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 border-t border-gray-100",children:L?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):n.items.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(ne,{className:"w-16 h-16 text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"No items in purchase order"})]}):e.jsx("div",{className:"space-y-4 py-4",children:n.items.map(t=>{var l,c;const s=h.get(t.id);if(!s)return null;const o=_(t);s.profit_per_unit*o;const i=s.profit_per_unit>0,r=Z===t.id,a=s.selling_price>0;return e.jsxs("div",{className:`border-2 rounded-2xl bg-white shadow-sm transition-all duration-300 ${r?"border-blue-500 shadow-xl":a?"border-green-200 hover:border-green-300 hover:shadow-md":"border-orange-300 hover:border-orange-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex items-start justify-between p-6 cursor-pointer",onClick:()=>A(r?null:t.id),children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-6 h-6 rounded-lg flex items-center justify-center transition-colors ${r?"bg-blue-500":"bg-gray-200"}`,children:e.jsx("svg",{className:`w-4 h-4 text-white transition-transform duration-200 ${r?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900",children:((l=t.product)==null?void 0:l.name)||t.name||"Unknown Product"}),a?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold bg-green-500 text-white shadow-sm",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}),"Done"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold bg-orange-500 text-white shadow-sm animate-pulse",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Pending"]})]}),((c=t.variant)==null?void 0:c.name)&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Variant: ",t.variant.name]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Quantity: ",o," units"]})]})]})}),e.jsx("div",{className:"flex flex-col items-end gap-2",children:a&&e.jsx("div",{className:`px-4 py-2 rounded-xl text-base font-bold shadow-sm ${i?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-700 border border-red-200"}`,children:i?`+${u(s.profit_per_unit)} TZS per unit`:"Loss"})})]}),r&&e.jsxs("div",{className:"px-6 pb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-3.5 mb-3 border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2.5 flex-1 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-orange-500 flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-0.5",children:"Base Cost"}),e.jsx("p",{className:"text-base font-bold text-orange-600 truncate",children:u(s.cost_price*o)}),e.jsxs("p",{className:"text-xs text-orange-400",children:[u(s.cost_price),"/unit"]})]})]}),e.jsx("div",{className:"h-14 w-px bg-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2.5 flex-1 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-red-500 flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-0.5",children:"Total Cost"}),e.jsx("p",{className:"text-base font-bold text-red-600 truncate",children:u(s.total_cost*o)}),e.jsxs("p",{className:"text-xs text-red-400",children:[u(s.total_cost),"/unit"]})]})]}),e.jsx("div",{className:"h-14 w-px bg-gray-300"}),e.jsxs("div",{className:"flex items-center gap-2.5 flex-1 min-w-0",children:[e.jsx("div",{className:"w-9 h-9 rounded-lg bg-emerald-500 flex items-center justify-center flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 8h6m-5 0a3 3 0 110 6H9l3 3m-3-6h6m6 1a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-0.5",children:"Selling Price"}),e.jsx("p",{className:"text-base font-bold text-emerald-600 truncate",children:u(s.selling_price*o)}),e.jsxs("p",{className:"text-xs text-emerald-500",children:[u(s.selling_price),"/unit"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-2 rounded-lg bg-blue-50 border border-blue-200 flex-shrink-0",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs font-bold text-blue-600 leading-none",children:["+",u((s.selling_price-s.total_cost)*o)]}),e.jsx("p",{className:"text-xs text-blue-500 leading-none mt-0.5",children:"Profit"})]})]})]}),(n.currency&&n.currency!=="TZS"&&n.exchangeRate||s.total_cost>s.cost_price)&&e.jsxs("div",{className:"flex items-center gap-3 mt-3 pt-3 border-t border-gray-100",children:[n.currency&&n.currency!=="TZS"&&n.exchangeRate&&e.jsx("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-blue-50 border border-blue-100",children:e.jsxs("span",{className:"text-xs font-semibold text-blue-600",children:["ðŸ’± ",u(t.costPrice)," ",n.currency," Ã— ",n.exchangeRate]})}),s.total_cost>s.cost_price&&e.jsx("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-orange-50 border border-orange-100",children:e.jsxs("span",{className:"text-xs font-semibold text-orange-600",children:["+",u((s.total_cost-s.cost_price)*o)," additional costs"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Selling Price *"}),e.jsx("input",{type:"text",value:u(s.selling_price),onChange:d=>{const x=d.target.value.replace(/,/g,""),m=parseFloat(x)||0;v(t.id,m)},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-gray-900 text-xl font-bold bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Markup %"}),e.jsx("input",{type:"text",value:s.markup_percentage%1===0?s.markup_percentage:s.markup_percentage.toFixed(2),onChange:d=>{const x=d.target.value.replace(/,/g,""),m=parseFloat(x)||0;K(t.id,m)},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 text-gray-900 text-xl font-bold bg-white"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Quick Add Profit:"}),e.jsx("button",{type:"button",onClick:()=>{const x=s.total_cost+1e4;v(t.id,x)},className:"px-4 py-2 text-sm bg-white text-gray-700 border border-gray-300 hover:bg-blue-500 hover:text-white hover:border-blue-500 rounded-lg transition-all font-semibold shadow-sm",children:"+10K"}),e.jsx("button",{type:"button",onClick:()=>{const x=s.total_cost+5e4;v(t.id,x)},className:"px-4 py-2 text-sm bg-white text-gray-700 border border-gray-300 hover:bg-blue-500 hover:text-white hover:border-blue-500 rounded-lg transition-all font-semibold shadow-sm",children:"+50K"}),e.jsx("button",{type:"button",onClick:()=>{const x=s.total_cost+1e5;v(t.id,x)},className:"px-4 py-2 text-sm bg-white text-gray-700 border border-gray-300 hover:bg-blue-500 hover:text-white hover:border-blue-500 rounded-lg transition-all font-semibold shadow-sm",children:"+100K"}),e.jsx("button",{type:"button",onClick:()=>{const x=s.total_cost+2e5;v(t.id,x)},className:"px-4 py-2 text-sm bg-white text-gray-700 border border-gray-300 hover:bg-blue-500 hover:text-white hover:border-blue-500 rounded-lg transition-all font-semibold shadow-sm",children:"+200K"}),e.jsx("button",{type:"button",onClick:()=>{const x=s.total_cost+5e5;v(t.id,x)},className:"px-4 py-2 text-sm bg-white text-gray-700 border border-gray-300 hover:bg-blue-500 hover:text-white hover:border-blue-500 rounded-lg transition-all font-semibold shadow-sm",children:"+500K"}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx("input",{type:"text",value:b?parseFloat(b.replace(/,/g,"")).toLocaleString("en-US"):"",onChange:d=>{const x=d.target.value.replace(/[^0-9]/g,"");B(x)},placeholder:"Custom",style:{width:b?`${Math.max(96,Math.min(240,(b.length+Math.floor(b.length/3))*9+24))}px`:"96px"},className:"min-w-[96px] px-3 py-2 text-sm border-2 border-purple-300 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-200 text-gray-900 font-semibold transition-all duration-200"}),e.jsx("button",{type:"button",onClick:()=>{const d=parseFloat(b)||0;if(d>0){const m=s.total_cost+d;v(t.id,m),B(""),N.success(`Added ${u(d)} TZS profit`)}},disabled:!b||parseFloat(b)<=0,className:"px-3 py-2 text-sm bg-purple-600 text-white hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed rounded-lg transition-all font-semibold shadow-sm",children:"+"})]})]})]})]},t.id)})})}),e.jsxs("div",{className:"p-6 pt-4 border-t border-gray-200 bg-white flex-shrink-0",children:[f.pendingCount>0&&e.jsxs("div",{className:"mb-3 p-3 bg-orange-50 border border-orange-200 rounded-lg flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-orange-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("span",{className:"text-sm font-semibold text-orange-700",children:[f.pendingCount," product",f.pendingCount>1?"s":""," still need",f.pendingCount===1?"s":""," pricing. Please set prices for all items before confirming."]})]}),e.jsx("button",{type:"button",onClick:G,disabled:S||L||f.pendingCount>0,className:"w-full px-6 py-3.5 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl text-lg",children:S?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):f.pendingCount>0?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Complete All Pricing First"]}):"Confirm & Continue"})]})]})}),document.body)};export{de as S};
