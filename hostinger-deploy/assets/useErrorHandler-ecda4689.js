import{r as n}from"./vendor-36d2c7c1.js";const p=(y={})=>{const{maxRetries:l=3,showToast:c=!0,logToConsole:d=!0,onError:u,onRetry:i}=y,[g,t]=n.useState({hasError:!1,error:null,errorMessage:null,retryCount:0,isLoading:!1}),a=n.useCallback((o,e)=>{const r=o instanceof Error?o:new Error(o),s=r.message||"An unexpected error occurred",h=e?` (${e})`:"",E=`${s}${h}`;d&&console.error("ðŸš¨ Error occurred:",{error:r,context:e,message:E,stack:r.stack}),c&&console.log("Toast:",E),t(w=>({...w,hasError:!0,error:r,errorMessage:E,isLoading:!1})),u&&u(r)},[d,c,u]),f=n.useCallback(()=>{t({hasError:!1,error:null,errorMessage:null,retryCount:0,isLoading:!1})},[]),C=n.useCallback(async o=>{const{retryCount:e}=g;if(e>=l)return a(new Error(`Maximum retry attempts (${l}) exceeded`)),!1;t(r=>({...r,isLoading:!0,retryCount:r.retryCount+1}));try{return await o(),f(),c&&console.log("Toast: Operation completed successfully"),i&&i(),!0}catch(r){const s=r instanceof Error?r:new Error(String(r));return a(s,`Retry attempt ${e+1}`),!1}},[g.retryCount,l,a,f,c,i]),m=n.useCallback(async(o,e)=>{t(r=>({...r,isLoading:!0}));try{const r=await o();return t(s=>({...s,isLoading:!1})),r}catch(r){const s=r instanceof Error?r:new Error(String(r));return a(s,e),null}},[a]),b=n.useCallback(o=>{t(e=>({...e,isLoading:o}))},[]);return{errorState:g,handleError:a,clearError:f,retry:C,withErrorHandling:m,setLoading:b}};export{p as u};
