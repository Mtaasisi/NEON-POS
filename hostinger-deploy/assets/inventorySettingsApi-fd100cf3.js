import{s as _}from"./index-61458a34.js";const c={low_stock_threshold:10,critical_stock_threshold:5,auto_reorder_enabled:!1,reorder_point_percentage:20,minimum_order_quantity:1,maximum_stock_level:1e3,safety_stock_level:5,stock_counting_frequency:"weekly",default_markup_percentage:30,enable_dynamic_pricing:!1,price_rounding_method:"nearest",cost_calculation_method:"average",auto_price_update:!1,enable_bulk_discount:!0,enable_seasonal_pricing:!1,price_history_days:365,low_stock_alerts:!0,out_of_stock_alerts:!0,price_change_alerts:!1,email_notifications:!0,sms_notifications:!1,whatsapp_notifications:!1,expiry_alert_days:30,overstock_alerts:!0,slow_moving_alert_days:90,stock_discrepancy_alerts:!0,enable_barcode_tracking:!0,enable_serial_tracking:!1,enable_batch_tracking:!1,enable_expiry_tracking:!0,enable_location_tracking:!1,enable_sku_auto_generation:!0,barcode_format:"EAN-13",enable_qr_code:!0,enable_branch_isolation:!0,allow_inter_branch_transfer:!0,transfer_approval_required:!1,default_source_branch:"",stock_visibility_mode:"own_branch",auto_stock_sync:!1,sync_frequency:"hourly",require_approval_stock_adjustment:!1,require_approval_price_change:!1,enable_audit_logging:!0,require_manager_pin:!1,approval_threshold_amount:1e4,lock_historical_inventory:!1,max_adjustment_percentage:50,auto_backup_enabled:!0,backup_frequency:"daily",backup_retention_days:90,export_format:"excel",enable_data_archiving:!0,archive_after_months:12,cache_inventory_data:!0,auto_refresh_interval:300,enable_analytics:!0,enable_lazy_loading:!0,pagination_size:50,enable_search_indexing:!0,enable_image_optimization:!0,auto_assign_categories:!1,enable_subcategories:!0,max_category_depth:3,default_category_id:"",enable_tags:!0,enable_product_bundles:!0,enable_product_variants:!0,enable_supplier_tracking:!0,default_lead_time_days:7,preferred_supplier_auto_select:!1,track_supplier_performance:!0,enable_purchase_orders:!0,auto_create_po_at_reorder:!1,stock_valuation_report_frequency:"weekly",enable_inventory_turnover:!0,enable_abc_analysis:!0,dead_stock_threshold_days:180,enable_realtime_reporting:!0,dashboard_refresh_rate:60,enable_pos_integration:!0,enable_ecommerce_sync:!1,enable_accounting_integration:!1,enable_api_access:!0,webhook_stock_changes:"",allow_returns_to_inventory:!0,return_inspection_required:!0,damaged_stock_handling:"separate_bin",adjustment_reason_required:!0,max_return_period_days:30,enable_multiple_uom:!0,default_uom:"piece",enable_uom_conversion:!0,quantity_decimal_places:2},g=async()=>{try{const{data:e,error:t}=await _.from("admin_settings").select("setting_key, setting_value, setting_type").eq("category","inventory").eq("is_active",!0);if(t)throw console.error("Error fetching inventory settings:",t),t;if(!e||e.length===0)return c;const o={...c};return e.forEach(r=>{const n=r.setting_key,a=r.setting_value,s=r.setting_type;s==="boolean"?o[n]=a==="true"||a===!0:s==="number"?o[n]=parseFloat(a)||0:o[n]=a}),o}catch(e){return console.error("Error in getInventorySettings:",e),c}},y=async(e,t,o)=>{try{const r=typeof t=="boolean"||typeof t=="number"?t.toString():String(t),n=typeof t=="boolean"?"boolean":typeof t=="number"?"number":"string",{error:a}=await _.from("admin_settings").update({setting_value:r,setting_type:n,updated_at:new Date().toISOString()}).eq("category","inventory").eq("setting_key",e);if(a)throw console.error(`Error updating inventory setting ${e}:`,a),a;return console.log(`✅ Updated inventory setting: ${e} = ${r}`),!0}catch(r){throw console.error(`Error in updateInventorySetting for ${e}:`,r),r}},l=async(e,t)=>{try{const o=Object.entries(e).map(async([r,n])=>{const a=typeof n=="boolean"||typeof n=="number"?n.toString():String(n),s=typeof n=="boolean"?"boolean":typeof n=="number"?"number":"string",{data:u}=await _.from("admin_settings").select("id").eq("category","inventory").eq("setting_key",r).single();if(u){const{error:i}=await _.from("admin_settings").update({setting_value:a,setting_type:s,updated_at:new Date().toISOString()}).eq("category","inventory").eq("setting_key",r);if(i)throw i}else{const{error:i}=await _.from("admin_settings").insert({category:"inventory",setting_key:r,setting_value:a,setting_type:s,updated_at:new Date().toISOString()});if(i)throw i}});return await Promise.all(o),console.log(`✅ Updated ${Object.keys(e).length} inventory settings`),!0}catch(o){throw console.error("Error in updateInventorySettings:",o),o}},d=async()=>{try{return await l(c,"Reset to defaults")}catch(e){throw console.error("Error resetting inventory settings:",e),e}},f=async()=>{try{const e=await g();return JSON.stringify(e,null,2)}catch(e){throw console.error("Error exporting inventory settings:",e),e}},b=async e=>{try{const t=JSON.parse(e);return await l(t,"Imported settings")}catch(t){throw console.error("Error importing inventory settings:",t),t}};export{y as a,f as e,g,b as i,d as r,l as u};
