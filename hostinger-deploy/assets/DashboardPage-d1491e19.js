import{a as C,j as e}from"./index-61458a34.js";import{r as o}from"./vendor-36d2c7c1.js";import{c as S,M as x}from"./customerPortalService-0d37743c.js";import{a as k}from"./routing-eb8c310c.js";import{k as A,u as n,S as p,r as u,an as i,aq as R,y as z,af as I,br as M,ae as L}from"./ui-28e30067.js";import"./supabase-cf010ec4.js";const q=()=>{const t=k(),{startLoading:h,completeLoading:g,failLoading:b}=C(),[a,d]=o.useState({loyaltyPoints:0,activeOrders:0,devicesInRepair:0,upcomingAppointments:0,totalPurchases:0}),[f,m]=o.useState(!0),[j,v]=o.useState("Guest");o.useEffect(()=>{y()},[]);const y=async()=>{const s=h("Loading dashboard...");try{m(!0);const r=localStorage.getItem("customer_id");if(r){const l=await S.getCustomerById(r);l&&(v(l.name),d(c=>({...c,loyaltyPoints:l.points||0}))),d(c=>({...c,activeOrders:Math.floor(Math.random()*5),devicesInRepair:Math.floor(Math.random()*3),upcomingAppointments:Math.floor(Math.random()*2),totalPurchases:Math.floor(Math.random()*50)}))}g(s)}catch(r){console.error("Error loading dashboard:",r),b(s,"Failed to load dashboard")}finally{m(!1)}},N=[{icon:M,label:"Shop Now",color:"bg-blue-500",action:()=>t("/customer-portal/products")},{icon:n,label:"My Orders",color:"bg-green-500",action:()=>t("/customer-portal/orders")},{icon:L,label:"Rewards",color:"bg-purple-500",action:()=>t("/customer-portal/loyalty")},{icon:u,label:"Book Service",color:"bg-orange-500",action:()=>t("/customer-portal/appointments")}],w=[{icon:A,label:"Loyalty Points",value:a.loyaltyPoints.toLocaleString(),color:"text-yellow-600",bgColor:"bg-yellow-50",action:()=>t("/customer-portal/loyalty")},{icon:n,label:"Active Orders",value:a.activeOrders.toString(),color:"text-blue-600",bgColor:"bg-blue-50",action:()=>t("/customer-portal/orders")},{icon:p,label:"Devices in Repair",value:a.devicesInRepair.toString(),color:"text-green-600",bgColor:"bg-green-50",action:()=>t("/customer-portal/devices")},{icon:u,label:"Appointments",value:a.upcomingAppointments.toString(),color:"text-purple-600",bgColor:"bg-purple-50",action:()=>t("/customer-portal/appointments")}];return f?e.jsx(x,{title:"Dashboard",children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.jsxs(x,{title:"Dashboard",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-700 p-6 text-white",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Welcome back, ",j,"! ðŸ‘‹"]}),e.jsx("p",{className:"text-blue-100",children:"Ready to continue shopping?"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Quick Actions"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(80px, 100%), 1fr))",gap:"clamp(0.5rem, 1.5vw, 0.75rem)",gridAutoRows:"1fr"},children:N.map((s,r)=>{const l=s.icon;return e.jsxs("button",{onClick:s.action,className:"flex flex-col items-center active:scale-95 transition-transform",children:[e.jsx("div",{className:`${s.color} w-14 h-14 rounded-2xl flex items-center justify-center mb-2 shadow-md`,children:e.jsx(l,{size:24,className:"text-white"})}),e.jsx("span",{className:"text-xs text-gray-700 text-center font-medium",children:s.label})]},r)})})]}),e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Your Activity"}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(150px, 100%), 1fr))",gap:"clamp(0.75rem, 2vw, 1rem)",gridAutoRows:"1fr"},children:w.map((s,r)=>{const l=s.icon;return e.jsxs("button",{onClick:s.action,className:"bg-white rounded-xl p-4 shadow-sm active:scale-95 transition-transform",children:[e.jsx("div",{className:`${s.bgColor} w-10 h-10 rounded-lg flex items-center justify-center mb-3`,children:e.jsx(l,{size:20,className:s.color})}),e.jsx("div",{className:"text-2xl font-bold text-gray-900 mb-1",children:s.value}),e.jsx("div",{className:"text-xs text-gray-600",children:s.label})]},r)})})]}),e.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[e.jsx("button",{onClick:()=>t("/customer-portal/orders"),className:"w-full bg-white rounded-xl p-4 shadow-sm active:scale-95 transition-transform",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-50 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(n,{size:24,className:"text-blue-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold text-gray-900",children:"Recent Orders"}),e.jsx("div",{className:"text-sm text-gray-600",children:"View your purchase history"})]})]}),e.jsx(i,{size:20,className:"text-gray-400"})]})}),e.jsx("button",{onClick:()=>t("/customer-portal/loyalty"),className:"w-full bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl p-4 shadow-sm active:scale-95 transition-transform text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white bg-opacity-20 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(R,{size:24})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold",children:"Loyalty Rewards"}),e.jsxs("div",{className:"text-sm opacity-90",children:[a.loyaltyPoints," points available"]})]})]}),e.jsx(i,{size:20})]})}),a.devicesInRepair>0&&e.jsx("button",{onClick:()=>t("/customer-portal/devices"),className:"w-full bg-white rounded-xl p-4 shadow-sm active:scale-95 transition-transform",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-orange-50 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(p,{size:24,className:"text-orange-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold text-gray-900",children:"Devices in Service"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[a.devicesInRepair," device(s) being serviced"]})]})]}),e.jsx(i,{size:20,className:"text-gray-400"})]})}),a.upcomingAppointments>0&&e.jsx("button",{onClick:()=>t("/customer-portal/appointments"),className:"w-full bg-white rounded-xl p-4 shadow-sm active:scale-95 transition-transform",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-50 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(z,{size:24,className:"text-green-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-bold text-gray-900",children:"Upcoming Appointments"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[a.upcomingAppointments," appointment(s) scheduled"]})]})]}),e.jsx(i,{size:20,className:"text-gray-400"})]})})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 rounded-xl p-4 text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{size:32}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg",children:"Special Offers!"}),e.jsx("div",{className:"text-sm opacity-90",children:"Check out our latest deals"})]})]}),e.jsx("button",{onClick:()=>t("/customer-portal/products"),className:"mt-3 bg-white text-orange-600 font-bold py-2 px-4 rounded-lg w-full hover:bg-gray-50 active:scale-95 transition-all",children:"Shop Now"})]})})]})};export{q as default};
