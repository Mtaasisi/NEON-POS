import{j as e,ak as he,al as be}from"./index-61458a34.js";import{r as m,R as O,b as fe}from"./vendor-36d2c7c1.js";import{X as y,aA as ye,o as ve,U as je,N as G,s as Ne,ag as L,aP as K,b as we,n as u}from"./ui-28e30067.js";import{u as Ce}from"./useBodyScrollLock-341c8b9f.js";const Ae=({isOpen:v,onClose:j,onSupplierCreated:H,supplier:i})=>{const x=!!i,[o,U]=m.useState(!1),[_,Z]=m.useState(!1),[p,k]=m.useState([]),[V,X]=m.useState(!1),[ee,D]=m.useState([]),[I,$]=m.useState(!1),[h,E]=m.useState([]),[f,T]=m.useState(""),[te,F]=m.useState(!1),[N,w]=m.useState(null),[C,S]=m.useState(null),[A,P]=m.useState(""),Q=O.useRef(null),B=O.useRef(null),[a,b]=m.useState({name:"",company_name:"",phone:"",email:"",whatsapp:"",wechat:"",country:"",city:"",address:"",preferred_currency:"",tax_id:"",payment_terms:"",notes:""});m.useEffect(()=>{if(i&&(b({name:i.name||"",company_name:i.company_name||"",phone:i.phone||"",email:i.email||"",whatsapp:i.whatsapp||"",wechat:i.wechat||"",country:i.country||"",city:i.city||"",address:i.address||"",preferred_currency:i.preferred_currency||"",tax_id:i.tax_id||"",payment_terms:i.payment_terms||"",notes:i.notes||""}),w(i.wechat_qr_code||null),S(i.alipay_qr_code||null),P(i.bank_account_details||""),i.notes)){const t=i.notes.match(/Product Categories:(.*?)(?:\n\n|$)/s);if(t){const s=t[1].split(",").map(r=>r.trim()).filter(Boolean);E(s)}}},[i]);const se={Tanzania:"TZS",UAE:"AED",China:"CNY","Hong Kong":"CNY",USA:"USD",UK:"EUR",Germany:"EUR",France:"EUR",Japan:"CNY","South Korea":"CNY",Singapore:"USD",Thailand:"CNY",Vietnam:"CNY",Malaysia:"CNY",Indonesia:"CNY",Philippines:"CNY",Turkey:"EUR",Egypt:"EUR","South Africa":"USD",Nigeria:"USD",Ghana:"USD",Uganda:"TZS",Rwanda:"TZS",Ethiopia:"TZS",Morocco:"EUR","Saudi Arabia":"AED",Pakistan:"CNY",India:"CNY",Kenya:"TZS"},re=t=>{if(!t){D([]);return}try{const s=localStorage.getItem("supplier_city_suggestions");if(s){const r=JSON.parse(s);D(r[t]||[])}}catch(s){console.error("Error loading city suggestions:",s)}},ae=(t,s)=>{if(!(!t||!s.trim()))try{const r=localStorage.getItem("supplier_city_suggestions"),n=r?JSON.parse(r):{};n[t]||(n[t]=[]),n[t].includes(s.trim())||(n[t].push(s.trim()),localStorage.setItem("supplier_city_suggestions",JSON.stringify(n)))}catch(r){console.error("Error saving city suggestion:",r)}},oe=t=>/^-?\d+\.?\d*\s*,\s*-?\d+\.?\d*$/.test(t.trim()),ne=async t=>{try{const[s,r]=t.split(",").map(c=>c.trim());$(!0);const n=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${s}&lon=${r}&addressdetails=1`,{headers:{Accept:"application/json"}});if(!n.ok)throw new Error("Failed to fetch address");const l=await n.json();if(l.display_name){if(b(c=>({...c,address:l.display_name})),l.address&&(l.address.city||l.address.town||l.address.village)){const c=l.address.city||l.address.town||l.address.village;b(d=>({...d,city:c}))}u.success("Address found from coordinates!")}else u.error("Could not find address for these coordinates")}catch(s){console.error("Error converting coordinates:",s),u.error("Failed to convert coordinates to address")}finally{$(!1)}},le=async t=>{const s=t.target.value;b({...a,address:s}),oe(s)&&await ne(s)},g=t=>{const{name:s,value:r}=t.target;if(s==="country"&&r){const n=se[r];re(r),r!=="China"&&(w(null),S(null),P("")),b({...a,[s]:r,preferred_currency:n||a.preferred_currency})}else b({...a,[s]:r})},ie=()=>{X(!0),k(t=>[...t,{name:"",mobile:""}])},ce=t=>{k(s=>s.filter((r,n)=>n!==t))},M=(t,s,r)=>{k(n=>n.map((l,c)=>c===t?{...l,[s]:r}:l))},de=["Smartphones & Tablets","Laptops & Computers","Accessories & Cables","Audio & Headphones","Cameras & Photography","Smart Home Devices","Gaming Consoles","TV & Monitors","Wearables & Smartwatches","Power Banks & Chargers","Storage Devices","Networking Equipment","Drones & RC","Security Systems","LED Lights","Electronic Components"],z=["bg-blue-50 border-blue-300 text-blue-900","bg-purple-50 border-purple-300 text-purple-900","bg-green-50 border-green-300 text-green-900","bg-orange-50 border-orange-300 text-orange-900","bg-pink-50 border-pink-300 text-pink-900","bg-indigo-50 border-indigo-300 text-indigo-900","bg-teal-50 border-teal-300 text-teal-900","bg-cyan-50 border-cyan-300 text-cyan-900"],W=t=>{const s=t.split("").reduce((r,n)=>r+n.charCodeAt(0),0);return z[s%z.length]},Y=()=>{try{const t=localStorage.getItem("supplier_category_usage");if(t){const s=JSON.parse(t);return Object.entries(s).sort((r,n)=>n[1]-r[1]).slice(0,8).map(([r])=>r)}}catch(t){console.error("Error loading category usage:",t)}return[]},me=t=>{try{const s=localStorage.getItem("supplier_category_usage"),r=s?JSON.parse(s):{};r[t]=(r[t]||0)+1,localStorage.setItem("supplier_category_usage",JSON.stringify(r))}catch(s){console.error("Error saving category usage:",s)}},ue=()=>{const s=[...Y()];for(const r of de)!s.includes(r)&&s.length<8&&s.push(r);return s.slice(0,8)},R=t=>{const s=t.trim();s&&!h.includes(s)&&(E(r=>[...r,s]),me(s),T(""))},ge=t=>{E(s=>s.filter(r=>r!==t))},xe=t=>{t.key==="Enter"&&(t.preventDefault(),f.trim()&&R(f))},J=(t,s)=>{var n;const r=(n=t.target.files)==null?void 0:n[0];if(r){if(!r.type.startsWith("image/")){u.error("Please upload an image file");return}if(r.size>2*1024*1024){u.error("Image size should be less than 2MB");return}try{const l=new FileReader;l.onloadend=()=>{try{const c=l.result;if(!c){u.error("Failed to read image file");return}s==="wechat"?(w(c),u.success("WeChat QR code uploaded")):(S(c),u.success("Alipay QR code uploaded"))}catch(c){console.error("Error processing image:",c),u.error("Failed to process image")}},l.onerror=()=>{console.error("FileReader error:",l.error),u.error("Failed to read image file. Please try again.")},l.readAsDataURL(r)}catch(l){console.error("Error uploading QR code:",l),u.error("Failed to upload image. Please try again.")}t.target.value=""}},q=t=>{t==="wechat"?w(null):S(null)},pe=async t=>{if(t.preventDefault(),!a.name.trim()){u.error("Supplier name is required");return}try{U(!0);const s=p.filter(d=>d.name.trim()||d.mobile.trim()),r=s.length>0?s.map(d=>`${d.name}${d.mobile?` (${d.mobile})`:""}`).join("; "):void 0;let n=a.notes||"";if(h.length>0){const d=`Product Categories: ${h.join(", ")}`;n=n?`${d}

${n}`:d}const l=[];if(A&&l.push("Bank Account Details Available"),N&&l.push("WeChat Pay QR Code: Uploaded"),C&&l.push("Alipay QR Code: Uploaded"),l.length>0){const d=`

Payment Information:
${l.join(`
`)}`;n=n?`${n}${d}`:d.trim()}const c={name:a.name,company_name:a.company_name||void 0,contact_person:r,phone:a.phone||void 0,email:a.email||void 0,whatsapp:a.whatsapp||void 0,wechat:a.wechat||void 0,address:a.address||void 0,city:a.city||void 0,country:a.country||void 0,tax_id:a.tax_id||void 0,payment_terms:a.payment_terms||void 0,preferred_currency:a.preferred_currency||void 0,notes:n||void 0,wechat_qr_code:N||void 0,alipay_qr_code:C||void 0,bank_account_details:A||void 0,is_active:!0};x&&i?(await he(i.id,c),u.success("Supplier updated successfully!")):(await be(c),u.success("Supplier created successfully!")),a.country&&a.city&&ae(a.country,a.city),H(),j()}catch(s){console.error(`Error ${x?"updating":"creating"} supplier:`,s),u.error(s.message||`Failed to ${x?"update":"create"} supplier`)}finally{U(!1)}};return Ce(v),m.useEffect(()=>{if(v){const t=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=t}}},[v]),v?fe.createPortal(e.jsx("div",{className:"fixed bg-black/60 flex items-center justify-center p-4",style:{top:0,left:0,right:0,bottom:0,overflow:"hidden",overscrollBehavior:"none",zIndex:100004},role:"dialog","aria-modal":"true","aria-labelledby":"supplier-form-title",onClick:j,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] flex flex-col overflow-hidden relative",style:{pointerEvents:"auto"},onClick:t=>t.stopPropagation(),children:[e.jsx("button",{type:"button",onClick:j,disabled:o,className:"absolute top-4 right-4 w-9 h-9 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-full transition-colors shadow-lg z-50",children:e.jsx(y,{className:"w-5 h-5"})}),e.jsx("div",{className:"p-8 bg-white border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"grid grid-cols-[auto,1fr] gap-6 items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-orange-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(ye,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:x?"Edit Supplier":"Add New Supplier"}),e.jsx("p",{className:"text-sm text-gray-600",children:x?"Update supplier information":"Create new supplier information"})]})]})}),e.jsxs("form",{onSubmit:pe,className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Supplier Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Supplier Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:a.name,onChange:g,placeholder:"Enter supplier name",className:"w-full px-4 py-3 border-2 rounded-xl focus:outline-none transition-colors text-gray-900 border-gray-300 focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:o,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),e.jsx("input",{type:"text",name:"company_name",value:a.company_name,onChange:g,placeholder:"Enter company name",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:g,placeholder:"+255 123 456 789",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",name:"whatsapp",value:a.whatsapp,onChange:g,placeholder:"+255 123 456 789",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",disabled:o}),e.jsx(ve,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-green-500"})]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-gray-600"}),e.jsx("h5",{className:"text-sm font-semibold text-gray-700",children:"Contact Persons"}),p.length>0&&e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full",children:p.length})]}),e.jsxs("button",{type:"button",onClick:ie,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-orange-600 hover:text-orange-700 hover:bg-orange-50 rounded-xl transition-colors",disabled:o,children:[e.jsx(G,{className:"w-4 h-4"}),"Add Contact"]})]}),p.length>0&&e.jsx("div",{className:"space-y-2",children:p.map((t,s)=>e.jsxs("div",{className:"p-3 bg-orange-50 rounded-xl border border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-medium text-orange-900",children:["Contact ",s+1]}),e.jsx("button",{type:"button",onClick:()=>ce(s),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Remove",disabled:o,children:e.jsx(y,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",placeholder:"Name",className:"w-full px-3 py-2 text-sm border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",value:t.name,onChange:r=>M(s,"name",r.target.value),disabled:o}),e.jsx("input",{type:"tel",placeholder:"+255 123 456 789",className:"w-full px-3 py-2 text-sm border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",value:t.mobile,onChange:r=>M(s,"mobile",r.target.value),disabled:o})]})]},s))}),V&&p.length===0&&e.jsx("div",{className:"text-center py-4 bg-gray-50 rounded-xl border border-dashed border-gray-300",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No contact persons added"})})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Products & Specialization"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:t=>T(t.target.value),onKeyPress:xe,onFocus:()=>F(!0),onBlur:()=>setTimeout(()=>F(!1),200),placeholder:"e.g., Smartphones & Tablets, Laptops...",className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",disabled:o}),e.jsx("button",{type:"button",onClick:()=>R(f),className:"px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-medium hover:from-orange-600 hover:to-orange-700 transition-all shadow-md hover:shadow-lg",disabled:o||!f.trim(),children:e.jsx(G,{className:"w-5 h-5"})})]}),h.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map((t,s)=>{const r=Y(),n=(()=>{try{const c=localStorage.getItem("supplier_category_usage");if(c)return JSON.parse(c)[t]||0}catch{return 0}return 0})(),l=r.includes(t);return e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 border-2 rounded-xl text-sm font-medium ${W(t)}`,children:[t,l&&n>2&&e.jsxs("span",{className:"text-xs px-1.5 py-0.5 bg-white/50 rounded-full",children:[n,"Ã—"]}),e.jsx("button",{type:"button",onClick:()=>ge(t),className:"hover:scale-110 transition-transform",disabled:o,children:e.jsx(y,{className:"w-3.5 h-3.5"})})]},s)})}),te&&e.jsx("div",{className:"flex flex-wrap gap-2",children:ue().map(t=>!h.includes(t)&&e.jsxs("button",{type:"button",onClick:()=>R(t),className:`px-2 py-1 text-xs rounded-xl transition-all border ${W(t)} opacity-50 hover:opacity-100 hover:scale-105`,disabled:o,children:["+ ",t]},t))})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Location"}),e.jsxs("div",{className:`grid grid-cols-1 gap-4 ${a.country==="China"?"md:grid-cols-3":"md:grid-cols-2"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),e.jsxs("select",{name:"country",value:a.country,onChange:g,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",disabled:o,children:[e.jsx("option",{value:"",children:"Select country"}),e.jsx("option",{value:"Tanzania",children:"ðŸ‡¹ðŸ‡¿ Tanzania"}),e.jsx("option",{value:"USA",children:"ðŸ‡ºðŸ‡¸ USA"}),e.jsx("option",{value:"UAE",children:"ðŸ‡¦ðŸ‡ª UAE"}),e.jsx("option",{value:"China",children:"ðŸ‡¨ðŸ‡³ China"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),e.jsx("input",{type:"text",name:"city",value:a.city,onChange:g,placeholder:"Enter city",list:"city-suggestions",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",disabled:o}),e.jsx("datalist",{id:"city-suggestions",children:ee.map((t,s)=>e.jsx("option",{value:t},s))})]}),a.country==="China"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WeChat ID"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"wechat",value:a.wechat,onChange:g,placeholder:"Enter WeChat ID",className:"w-full px-4 py-3 pr-10 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",disabled:o}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 bg-[#09B83E] rounded flex items-center justify-center",children:e.jsxs("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",fill:"white",children:[e.jsx("path",{d:"M8.5 6c-2.8 0-5 1.9-5 4.3 0 1.4.7 2.6 1.8 3.4l-.5 1.5 1.7-.9c.6.2 1.3.3 2 .3 2.8 0 5-1.9 5-4.3S11.3 6 8.5 6zm-1 5.8c-.4 0-.8-.3-.8-.8s.3-.8.8-.8.8.3.8.8-.4.8-.8.8zm2.5 0c-.4 0-.8-.3-.8-.8s.3-.8.8-.8.8.3.8.8-.4.8-.8.8z"}),e.jsx("path",{d:"M15.5 11c-.3 0-.5 0-.8.1 0 .1 0 .3 0 .4 0 2.9-2.6 5.2-5.7 5.2-.4 0-.7 0-1.1-.1 1 1.3 2.8 2.2 4.9 2.2.5 0 1-.1 1.5-.2l1.3.7-.4-1.2c.9-.6 1.5-1.6 1.5-2.7 0-1.8-1.5-3.4-3.2-4.4z"})]})})]})]}),e.jsxs("div",{className:a.country==="China"?"md:col-span-3":"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:["Address",e.jsxs("span",{className:"text-xs text-gray-500 font-normal flex items-center gap-1",children:[e.jsx(Ne,{className:"w-3 h-3"}),"(or paste coordinates)"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{name:"address",value:a.address,onChange:le,rows:2,placeholder:"Enter address or coordinates (e.g., -6.7924, 39.2083)",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900 resize-none",disabled:o||I}),I&&e.jsxs("div",{className:"absolute right-3 top-3 flex items-center gap-2 text-orange-600",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-orange-600 border-t-transparent"}),e.jsx("span",{className:"text-xs font-medium",children:"Converting..."})]})]})]})]})]}),a.country==="China"&&e.jsxs("div",{className:"mb-5",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:["Payment Information",e.jsx("span",{className:"text-xs bg-red-50 text-red-600 px-2 py-0.5 rounded-full",children:"ðŸ‡¨ðŸ‡³ China"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WeChat Pay QR Code"}),N?e.jsxs("div",{className:"relative w-full h-32 border-2 border-green-300 rounded-lg overflow-hidden bg-green-50",children:[e.jsx("img",{src:N,alt:"WeChat QR Code",className:"w-full h-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>q("wechat"),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",disabled:o,children:e.jsx(y,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-green-600/90 text-white text-xs py-1 px-2 flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"}),"WeChat Pay"]})]}):e.jsxs("div",{onClick:()=>{var t;return!o&&((t=Q.current)==null?void 0:t.click())},className:`flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg transition-colors ${o?"opacity-50 cursor-not-allowed":"cursor-pointer hover:border-green-500 hover:bg-green-50"}`,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(L,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload WeChat QR"}),e.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG (Max 2MB)"}),e.jsx("p",{className:"text-xs text-blue-500 mt-1 font-medium",children:"Click to browse"})]}),e.jsx("input",{ref:Q,type:"file",className:"hidden",accept:"image/*",onChange:t=>J(t,"wechat"),disabled:o})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alipay QR Code"}),C?e.jsxs("div",{className:"relative w-full h-32 border-2 border-blue-300 rounded-lg overflow-hidden bg-blue-50",children:[e.jsx("img",{src:C,alt:"Alipay QR Code",className:"w-full h-full object-contain"}),e.jsx("button",{type:"button",onClick:()=>q("alipay"),className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",disabled:o,children:e.jsx(y,{className:"w-4 h-4"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-blue-600/90 text-white text-xs py-1 px-2 flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"}),"Alipay"]})]}):e.jsxs("div",{onClick:()=>{var t;return!o&&((t=B.current)==null?void 0:t.click())},className:`flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg transition-colors ${o?"opacity-50 cursor-not-allowed":"cursor-pointer hover:border-blue-500 hover:bg-blue-50"}`,children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(L,{className:"w-8 h-8 text-gray-400 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Upload Alipay QR"}),e.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG (Max 2MB)"}),e.jsx("p",{className:"text-xs text-blue-500 mt-1 font-medium",children:"Click to browse"})]}),e.jsx("input",{ref:B,type:"file",className:"hidden",accept:"image/*",onChange:t=>J(t,"alipay"),disabled:o})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Account Details (Optional)"}),e.jsx("textarea",{value:A,onChange:t=>P(t.target.value),rows:2,placeholder:"Bank name, Account number, SWIFT/BIC code, etc.",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900 resize-none",disabled:o})]})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsxs("button",{type:"button",onClick:()=>Z(!_),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-colors border-2 border-gray-300",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Advanced Options"}),e.jsx(we,{className:`w-5 h-5 text-gray-600 transition-transform ${_?"rotate-180":""}`})]}),_&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-xl border-2 border-gray-300 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:g,placeholder:"supplier@example.com",className:"w-full px-4 py-3 border-2 rounded-xl focus:outline-none transition-colors text-gray-900 border-gray-300 focus:border-orange-500 focus:ring-2 focus:ring-orange-200",disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax ID"}),e.jsx("input",{type:"text",name:"tax_id",value:a.tax_id,onChange:g,placeholder:"Enter tax ID",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms"}),e.jsx("input",{type:"text",name:"payment_terms",value:a.payment_terms,onChange:g,placeholder:"e.g., Net 30, Cash on Delivery",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900",disabled:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{name:"notes",value:a.notes,onChange:g,rows:3,placeholder:"Additional notes or comments",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-orange-500 focus:ring-2 focus:ring-orange-200 transition-colors text-gray-900 resize-none",disabled:o})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200 flex-shrink-0 bg-white",children:[e.jsx("button",{type:"button",onClick:j,disabled:o,className:"flex-1 px-4 py-3 border-2 border-gray-300 rounded-xl text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:o,className:"flex-1 px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl font-semibold hover:from-orange-600 hover:to-orange-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),x?"Updating...":"Creating..."]}):x?"Update Supplier":"Create Supplier"})]})]})]})}),document.body):null};export{Ae as E};
