import{s as X,j as e,u as Ee,y as Ie,a as De,e as Q}from"./index-61458a34.js";import{r as i}from"./vendor-36d2c7c1.js";import{a as $e,c as Ae}from"./routing-eb8c310c.js";import{B as Fe}from"./BackButton-02a80e74.js";import{G as R}from"./GlassSelect-e243562f.js";import{s as Pe,n as f,m as ie,j as ce,X as H,U as J,a2 as Me,K as Le,r as Oe,N as se,y as ae,D as re,p as le,d as W,k as ne,v as Be,a9 as Te,Y as oe,M as Ue,P as Re,bo as _e,aw as qe,A as ze,a3 as He,av as Ge}from"./ui-28e30067.js";import{I as Ye}from"./ImportEmployeesFromUsersModal-22c8484e.js";import{e as B}from"./employeeService-efe40e70.js";import{u as Ke,S as Ve}from"./useSuccessModal-081786c4.js";import{u as Qe}from"./useDialog-6eb5c329.js";import"./supabase-cf010ec4.js";import"./utils-95f4031a.js";import"./charts-d592fbd1.js";import"./useBodyScrollLock-341c8b9f.js";const We=({value:u,onChange:j,label:p="Branch/Store",placeholder:P="Select branch",required:o=!1,error:y,allowMultiple:a=!1,className:d="",showMainBadge:c=!0})=>{const[D,N]=i.useState([]),[w,E]=i.useState(!0);i.useEffect(()=>{$()},[]);const $=async()=>{try{E(!0);const{data:g,error:l}=await X.from("store_locations").select("id, name, code, is_main, is_active").eq("is_active",!0).order("is_main",{ascending:!1}).order("name",{ascending:!0});if(l)throw l;N(g||[])}catch(g){console.error("Error loading branches:",g),N([])}finally{E(!1)}},A=D.map(g=>({value:g.id,label:`${g.name}${g.code?` (${g.code})`:""}${c&&g.is_main?" ðŸ¢ Main":""}`}));return w?e.jsxs("div",{className:d,children:[p&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[p," ",o&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",children:e.jsx("span",{className:"text-gray-500 text-sm",children:"Loading branches..."})})]}):e.jsxs("div",{className:d,children:[e.jsx(R,{label:p,placeholder:P,value:u||"",onChange:j,options:A,error:y,required:o,icon:e.jsx(Pe,{size:16})}),D.length===0&&e.jsx("p",{className:"mt-1 text-xs text-orange-600",children:"âš ï¸ No active branches found. Please create a branch first in Settings â†’ Store Management."})]})},Je=({employee:u,isOpen:j,onClose:p,onSave:P})=>{const o=new Date,y=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}-${String(o.getDate()).padStart(2,"0")}`,[a,d]=i.useState({firstName:"",lastName:"",email:"",phone:"",position:"",department:"",hireDate:y,salary:0,status:"active",performance:3,attendance:100,skills:[],manager:"",location:"",branchId:"",userId:"",userRole:""}),[c,D]=i.useState({}),[N,w]=i.useState(""),[E,$]=i.useState([]),[A,g]=i.useState(!1);i.useEffect(()=>{if(u)d(u);else{const s=new Date,r=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`;d({firstName:"",lastName:"",email:"",phone:"",position:"",department:"",hireDate:r,salary:0,status:"active",performance:3,attendance:100,skills:[],manager:"",location:"",branchId:"",userId:"",userRole:""})}D({})},[u,j]),i.useEffect(()=>{j&&l()},[j]);const l=async()=>{g(!0);try{const{data:s,error:r}=await X.from("users").select("id, email, full_name, role").order("full_name",{ascending:!0});if(r)throw r;$(s||[])}catch(s){console.error("Failed to load users:",s),f.error("Failed to load users")}finally{g(!1)}},m=()=>{var r;const s={};return a.firstName.trim()||(s.firstName="First name is required"),a.lastName.trim()||(s.lastName="Last name is required"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(s.email="Email is invalid"):s.email="Email is required",a.phone.trim()||(s.phone="Phone number is required"),a.position.trim()||(s.position="Position is required"),a.department.trim()||(s.department="Department is required"),a.hireDate||(s.hireDate="Hire date is required"),a.salary<=0&&(s.salary="Salary must be greater than 0"),(r=a.branchId)!=null&&r.trim()||(s.branchId="Branch/Store is required"),D(s),Object.keys(s).length===0},k=s=>{if(s.preventDefault(),!m()){f.error("Please fix the errors in the form");return}const r={...a,id:(u==null?void 0:u.id)||Date.now().toString()};P(r),p(),f.success(u?"Employee updated successfully":"Employee added successfully")},F=()=>{const s=a.skills||[];N.trim()&&!s.includes(N.trim())&&(d(r=>({...r,skills:[...r.skills||[],N.trim()]})),w(""))},S=s=>{d(r=>({...r,skills:(r.skills||[]).filter(M=>M!==s)}))};return j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bg-black/50",onClick:p,style:{left:"var(--sidebar-width, 0px)",top:"var(--topbar-height, 64px)",right:0,bottom:0,zIndex:35}}),e.jsx("div",{className:"fixed flex items-center justify-center p-4",style:{left:"var(--sidebar-width, 0px)",top:"var(--topbar-height, 64px)",right:0,bottom:0,zIndex:50,pointerEvents:"none"},children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${u?"bg-blue-100":"bg-green-100"}`,children:u?e.jsx(ie,{className:"w-5 h-5 text-blue-600"}):e.jsx(ce,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:u?"Edit Employee":"Add New Employee"}),e.jsx("p",{className:"text-xs text-gray-500",children:u?"Update employee information":"Create a new employee record"})]})]}),e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(H,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",value:a.firstName,onChange:s=>d(r=>({...r,firstName:s.target.value})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${c.firstName?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`,placeholder:"Enter first name"}),c.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:a.lastName,onChange:s=>d(r=>({...r,lastName:s.target.value})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${c.lastName?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`,placeholder:"Enter last name"}),c.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:a.email,onChange:s=>d(r=>({...r,email:s.target.value})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${c.email?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`,placeholder:"Enter email address"}),c.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:a.phone,onChange:s=>d(r=>({...r,phone:s.target.value})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${c.phone?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`,placeholder:"Enter phone number"}),c.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.phone})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Position *"}),e.jsx("input",{type:"text",value:a.position,onChange:s=>d(r=>({...r,position:s.target.value})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${c.position?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`,placeholder:"Enter job position"}),c.position&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.position})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Department *"}),e.jsx(R,{options:[{value:"IT",label:"IT Department"},{value:"Service",label:"Service Department"},{value:"Support",label:"Support Department"},{value:"Sales",label:"Sales Department"},{value:"Marketing",label:"Marketing Department"},{value:"Finance",label:"Finance Department"},{value:"HR",label:"Human Resources"}],value:a.department,onChange:s=>d(r=>({...r,department:s})),placeholder:"Select department"}),c.department&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.department})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hire Date *"}),e.jsx("input",{type:"date",value:a.hireDate,onChange:s=>d(r=>({...r,hireDate:s.target.value})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${c.hireDate?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`}),c.hireDate&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.hireDate})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Salary (TZS) *"}),e.jsx("input",{type:"number",value:a.salary,onChange:s=>d(r=>({...r,salary:Number(s.target.value)})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${c.salary?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`,placeholder:"Enter salary",min:"0"}),c.salary&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:c.salary})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx(R,{options:[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"on-leave",label:"On Leave"},{value:"terminated",label:"Terminated"}],value:a.status,onChange:s=>d(r=>({...r,status:s})),placeholder:"Select status"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Performance Rating (1-5)"}),e.jsx("input",{type:"number",value:a.performance,onChange:s=>d(r=>({...r,performance:Number(s.target.value)})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",min:"1",max:"5",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attendance % (0-100)"}),e.jsx("input",{type:"number",value:a.attendance,onChange:s=>d(r=>({...r,attendance:Number(s.target.value)})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",min:"0",max:"100"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manager"}),e.jsx("input",{type:"text",value:a.manager,onChange:s=>d(r=>({...r,manager:s.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",placeholder:"Enter manager name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Work Location (Optional)"}),e.jsx("input",{type:"text",value:a.location,onChange:s=>d(r=>({...r,location:s.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",placeholder:"City or specific location"})]})]}),e.jsx("div",{children:e.jsx(We,{label:"Assigned Branch/Store",value:a.branchId,onChange:s=>d(r=>({...r,branchId:s})),placeholder:"Select employee's branch",required:!0,error:c.branchId})}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(J,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"User Account Access"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Link this employee to a user account to give them system access. This allows them to log in and use the POS system."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-500"}),"Link to User Account (Optional)"]})}),e.jsx(R,{options:[{value:"",label:"No user account linked"},...E.map(s=>({value:s.id,label:`${s.full_name||s.email} (${s.role})`}))],value:a.userId||"",onChange:s=>{const r=E.find(M=>M.id===s);d(M=>({...M,userId:s,userRole:(r==null?void 0:r.role)||""}))},placeholder:A?"Loading users...":"Select user account"}),a.userId&&a.userRole&&e.jsxs("div",{className:"mt-2 flex items-center gap-2 px-3 py-2 bg-purple-50 rounded-lg",children:[e.jsx(Le,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{className:"text-sm text-purple-700",children:["Role: ",e.jsx("span",{className:"font-semibold capitalize",children:a.userRole})]})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"ðŸ’¡ User Account Benefits"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ System access with username/password"}),e.jsx("li",{children:"â€¢ Role-based permissions"}),e.jsx("li",{children:"â€¢ Track activities and actions"}),e.jsx("li",{children:"â€¢ Attendance self-service"}),e.jsx("li",{children:"â€¢ Personal dashboard access"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Skills"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("input",{type:"text",value:N,onChange:s=>w(s.target.value),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",placeholder:"Add a skill",onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),F())}),e.jsx("button",{type:"button",onClick:F,className:"px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(a.skills||[]).map((s,r)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:[s,e.jsx("button",{type:"button",onClick:()=>S(s),className:"text-blue-600 hover:text-blue-800",children:e.jsx(H,{size:14})})]},r))})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:p,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors",children:u?"Update Employee":"Add Employee"})]})]})]})})})]}):null},Xe=({employees:u,isOpen:j,onClose:p,onSave:P})=>{var E,$,A,g;const[o,y]=i.useState({employeeId:"",date:new Date().toISOString().split("T")[0],checkIn:"",checkOut:"",status:"present",hours:0,notes:""}),[a,d]=i.useState({});i.useEffect(()=>{j&&(y({employeeId:"",date:new Date().toISOString().split("T")[0],checkIn:"",checkOut:"",status:"present",hours:0,notes:""}),d({}))},[j]);const c=()=>{const l={};return o.employeeId||(l.employeeId="Please select an employee"),o.date||(l.date="Date is required"),o.checkIn||(l.checkIn="Check-in time is required"),o.status==="present"&&!o.checkOut&&(l.checkOut="Check-out time is required for present status"),d(l),Object.keys(l).length===0},D=l=>{if(l.preventDefault(),!c()){f.error("Please fix the errors in the form");return}const m=u.find(F=>F.id===o.employeeId);if(!m){f.error("Selected employee not found");return}const k={id:Date.now().toString(),employeeId:o.employeeId,employeeName:`${m.firstName} ${m.lastName}`,date:o.date,checkIn:o.checkIn,checkOut:o.checkOut,status:o.status,hours:o.hours||0,notes:o.notes};P(k),p(),f.success("Attendance marked successfully")},N=()=>{if(o.checkIn&&o.checkOut){const l=new Date(`2000-01-01T${o.checkIn}`),F=(new Date(`2000-01-01T${o.checkOut}`).getTime()-l.getTime())/(1e3*60*60);y(S=>({...S,hours:Math.max(0,F)}))}},w=()=>u.find(l=>l.id===o.employeeId);return j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed bg-black/50",onClick:p,style:{left:"var(--sidebar-width, 0px)",top:"var(--topbar-height, 64px)",right:0,bottom:0,zIndex:35}}),e.jsx("div",{className:"fixed flex items-center justify-center p-4",style:{left:"var(--sidebar-width, 0px)",top:"var(--topbar-height, 64px)",right:0,bottom:0,zIndex:50,pointerEvents:"none"},children:e.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:l=>l.stopPropagation(),style:{pointerEvents:"auto"},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Mark Attendance"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Record employee attendance for today"})]})]}),e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(H,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employee *"}),e.jsx(R,{options:u.map(l=>({value:l.id,label:`${l.firstName} ${l.lastName} - ${l.position} (${l.department})`})),value:o.employeeId,onChange:l=>y(m=>({...m,employeeId:l})),placeholder:"Select employee"}),a.employeeId&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.employeeId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:o.date,onChange:l=>y(m=>({...m,date:l.target.value})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${a.date?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`}),a.date&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx(R,{options:[{value:"present",label:"Present"},{value:"absent",label:"Absent"},{value:"late",label:"Late"},{value:"half-day",label:"Half Day"}],value:o.status,onChange:l=>y(m=>({...m,status:l})),placeholder:"Select status"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check In Time *"}),e.jsx("input",{type:"time",value:o.checkIn,onChange:l=>y(m=>({...m,checkIn:l.target.value})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${a.checkIn?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`}),a.checkIn&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.checkIn})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check Out Time"}),e.jsx("input",{type:"time",value:o.checkOut,onChange:l=>y(m=>({...m,checkOut:l.target.value})),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none transition-colors ${a.checkOut?"border-red-500 focus:border-red-600":"border-gray-200 focus:border-blue-500"}`}),a.checkOut&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.checkOut})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hours Worked"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:o.hours,onChange:l=>y(m=>({...m,hours:Number(l.target.value)})),className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",placeholder:"0",min:"0",step:"0.5"}),e.jsx("button",{type:"button",onClick:N,className:"px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Calculate"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:o.notes,onChange:l=>y(m=>({...m,notes:l.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-blue-500 transition-colors",rows:3,placeholder:"Add any additional notes..."})]}),w()&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Employee Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsxs("span",{className:"ml-2 font-medium",children:[(E=w())==null?void 0:E.firstName," ",($=w())==null?void 0:$.lastName]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Position:"}),e.jsx("span",{className:"ml-2 font-medium",children:(A=w())==null?void 0:A.position})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Department:"}),e.jsx("span",{className:"ml-2 font-medium",children:(g=w())==null?void 0:g.department})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:p,className:"flex-1 px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Mark Attendance"})]})]})]})})})]}):null},ht=()=>{Ee();const{currentBranch:u}=Ie();$e();const{confirm:j}=Qe();Ae();const p=Ke(),{startLoading:P,completeLoading:o,failLoading:y}=De(),[a,d]=i.useState([]),[c,D]=i.useState([]),[N,w]=i.useState([]),[E,$]=i.useState(!0),[A,g]=i.useState("list"),[l,m]=i.useState(""),[k,F]=i.useState("all"),[S,s]=i.useState("all"),[r,M]=i.useState("all"),[C,_]=i.useState([]),[de,T]=i.useState(!1),[me,G]=i.useState(!1),[xe,Z]=i.useState(!1),[Y,z]=i.useState(void 0),[Ze,ue]=i.useState(!1);i.useEffect(()=>{U(),he()},[u]);const he=async()=>{try{const{data:t,error:n}=await X.from("store_locations").select("id, name, code, is_main").eq("is_active",!0).order("is_main",{ascending:!1}).order("name",{ascending:!0});if(n)throw n;w(t||[])}catch(t){console.error("Failed to load branches:",t)}},U=async()=>{const t=P("Loading employees...");$(!0);try{const n=await B.getAllEmployees();d(n);const x=await B.getAllAttendanceRecords();D(x),o(t)}catch(n){console.error("Failed to load data:",n),y(t,"Failed to load employees"),f.error("Failed to load employee data")}finally{$(!1)}},L=i.useMemo(()=>{const t=a.length,n=a.filter(b=>b.status==="active").length,x=a.filter(b=>b.status==="inactive").length,O=a.filter(b=>b.status==="on-leave").length,v=new Date().toISOString().split("T")[0],h=c.filter(b=>b.attendanceDate===v&&b.status==="present").length,ve=t>0?a.reduce((b,q)=>b+(q.attendance||0),0)/t:0,we=t>0?a.reduce((b,q)=>b+(q.performance||0),0)/t:0,ke=a.reduce((b,q)=>b+(q.salary||0),0),Se=[...new Set(a.map(b=>b.department))].length,Ce=a.filter(b=>b.userId).length;return{total:t,active:n,inactive:x,onLeave:O,todayPresent:h,avgAttendance:ve,avgPerformance:we,totalSalary:ke,departments:Se,withUserAccounts:Ce}},[a,c]),I=i.useMemo(()=>a.filter(t=>{const n=!l||`${t.firstName} ${t.lastName}`.toLowerCase().includes(l.toLowerCase())||t.position.toLowerCase().includes(l.toLowerCase())||t.department.toLowerCase().includes(l.toLowerCase())||t.email.toLowerCase().includes(l.toLowerCase()),x=k==="all"||t.department===k,O=S==="all"||t.status===S,v=r==="all"||t.branchId===r;return n&&x&&O&&v}),[a,l,k,S,r]),K=i.useMemo(()=>[...new Set(a.map(t=>t.department))].sort(),[a]),pe=async t=>{try{const n=!!Y;n?await B.updateEmployee(Y.id,t):await B.createEmployee(t),await U(),T(!1),z(void 0);const x=`${t.firstName} ${t.lastName}`;p.show(`Employee "${x}" has been ${n?"updated":"added"} successfully!`,{title:`Employee ${n?"Updated":"Added"}`,actionButtons:[{label:"View Employees",onClick:()=>{},variant:"primary"},{label:"Add Another",onClick:()=>T(!0),variant:"secondary"}]})}catch(n){console.error("Failed to save employee:",n),f.error("Failed to save employee")}},ge=async t=>{if(await j("Are you sure you want to delete this employee?"))try{const n=a.find(x=>x.id===t);await B.deleteEmployee(t),await U(),p.show(`Employee "${n==null?void 0:n.firstName} ${n==null?void 0:n.lastName}" has been deleted successfully!`,{title:"Employee Deleted",autoCloseDelay:2e3})}catch(n){console.error("Failed to delete employee:",n),f.error("Failed to delete employee")}},be=t=>{z(t),T(!0)},fe=async t=>{try{await B.markAttendance(t),f.success("Attendance marked successfully"),await U(),G(!1)}catch(n){console.error("Failed to save attendance:",n),f.error("Failed to save attendance")}},ee=async t=>{if(C.length===0){f.error("Please select employees first");return}switch(t){case"export":te();break;case"archive":await j(`Archive ${C.length} employees?`)&&f.success("Employees archived");break;case"delete":if(await j(`Delete ${C.length} employees?`))try{await Promise.all(C.map(n=>B.deleteEmployee(n))),f.success("Employees deleted"),await U(),_([])}catch{f.error("Failed to delete employees")}break}ue(!1)},te=()=>{const t=a.filter(h=>C.includes(h.id)),n=[["Name","Email","Phone","Position","Department","Status","Salary","Attendance","Performance"],...t.map(h=>[`${h.firstName} ${h.lastName}`,h.email,h.phone,h.position,h.department,h.status,h.salary,`${h.attendance}%`,h.performance])].map(h=>h.join(",")).join(`
`),x=new Blob([n],{type:"text/csv"}),O=window.URL.createObjectURL(x),v=document.createElement("a");v.href=O,v.download=`employees_${new Date().toISOString().split("T")[0]}.csv`,v.click(),f.success("Employees exported")},ye=t=>{_(n=>n.includes(t)?n.filter(x=>x!==t):[...n,t])},je=()=>{C.length===I.length?_([]):_(I.map(t=>t.id))},Ne=t=>{switch(t){case"active":return"bg-green-100 text-green-700";case"inactive":return"bg-gray-100 text-gray-700";case"on-leave":return"bg-yellow-100 text-yellow-700";case"terminated":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},V=t=>t>=4.5?"text-green-600":t>=3.5?"text-blue-600":t>=2.5?"text-yellow-600":"text-red-600";return E?e.jsx("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600 font-medium",children:"Loading employees..."})]})}):e.jsxs("div",{className:"p-4 sm:p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Fe,{to:"/dashboard"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Employee Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your team, track attendance, and monitor performance"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{z(void 0),T(!0)},className:"flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors text-sm",children:[e.jsx(se,{size:18}),"New Employee",e.jsx("span",{className:"hidden sm:inline text-xs opacity-75 ml-2",children:"âŒ˜N"})]}),e.jsxs("button",{onClick:()=>Z(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-lg font-medium bg-purple-600 text-white hover:bg-purple-700 transition-colors text-sm",title:"Import employees from existing users",children:[e.jsx(ce,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Import from Users"})]}),e.jsxs("button",{onClick:()=>G(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-lg font-medium bg-green-600 text-white hover:bg-green-700 transition-colors text-sm",children:[e.jsx(ae,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Attendance"})]}),e.jsxs("button",{onClick:()=>te(),className:"flex items-center gap-2 px-4 py-2.5 rounded-lg font-medium bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors text-sm",children:[e.jsx(re,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsx("div",{className:"bg-blue-50 rounded-lg p-5 hover:bg-blue-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(le,{className:"w-7 h-7 text-blue-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total Employees"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.total}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[L.active," active"]})]})]})}),e.jsx("div",{className:"bg-green-50 rounded-lg p-5 hover:bg-green-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"w-7 h-7 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Present Today"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.todayPresent}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[L.avgAttendance.toFixed(1),"% avg"]})]})]})}),e.jsx("div",{className:"bg-purple-50 rounded-lg p-5 hover:bg-purple-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-7 h-7 text-purple-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Avg Performance"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.avgPerformance.toFixed(1)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"out of 5.0"})]})]})}),e.jsx("div",{className:"bg-orange-50 rounded-lg p-5 hover:bg-orange-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-7 h-7 text-orange-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"System Access"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:L.withUserAccounts}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[L.departments," depts, ",N.length," branches"]})]})]})})]}),e.jsxs(Q,{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 w-full lg:w-auto lg:min-w-[350px]",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, position, department, email...",value:l,onChange:t=>m(t.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"}),l&&e.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(H,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),e.jsx("div",{className:"flex rounded-full bg-gray-100 p-1 gap-1",children:[{value:"all",label:"All",color:"blue"},{value:"active",label:"Active",color:"green"},{value:"on-leave",label:"Leave",color:"yellow"},{value:"inactive",label:"Inactive",color:"gray"}].map(({value:t,label:n,color:x})=>e.jsx("button",{onClick:()=>s(t),className:`px-3 py-1.5 text-sm font-medium rounded-full transition-colors ${S===t?`bg-${x}-500 text-white`:"text-gray-600 hover:text-gray-900"}`,style:S===t?{backgroundColor:x==="blue"?"#3b82f6":x==="green"?"#10b981":x==="yellow"?"#f59e0b":"#6b7280"}:{},children:n},t))})]}),K.length>0&&e.jsxs("select",{value:k,onChange:t=>F(t.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[e.jsx("option",{value:"all",children:"All Departments"}),K.map(t=>e.jsx("option",{value:t,children:t},t))]}),N.length>0&&e.jsxs("select",{value:r,onChange:t=>M(t.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:[e.jsx("option",{value:"all",children:"All Branches"}),N.map(t=>e.jsxs("option",{value:t.id,children:[t.name," ",t.is_main?"(Main)":""]},t.id))]})]}),C.length>0&&e.jsxs("div",{className:"mt-4 flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"w-5 h-5 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[C.length," employee",C.length!==1?"s":""," selected"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>ee("export"),className:"px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:[e.jsx(re,{className:"w-4 h-4 inline mr-1"}),"Export"]}),e.jsxs("button",{onClick:()=>ee("delete"),className:"px-3 py-1.5 text-sm font-medium text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:[e.jsx(oe,{className:"w-4 h-4 inline mr-1"}),"Delete"]}),e.jsx("button",{onClick:()=>_([]),className:"px-3 py-1.5 text-sm font-medium text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:"Clear"})]})]})]}),e.jsxs(Q,{className:"overflow-hidden",children:[I.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(le,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No employees found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:l||k!=="all"||S!=="all"||r!=="all"?"Try adjusting your search or filters":"Get started by adding your first employee"}),!l&&k==="all"&&S==="all"&&r==="all"&&e.jsxs("button",{onClick:()=>T(!0),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg font-medium bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:[e.jsx(se,{size:18}),"Add First Employee"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left",children:e.jsx("input",{type:"checkbox",checked:C.length===I.length&&I.length>0,onChange:je,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Position"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Branch"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Performance"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Attendance"}),e.jsx("th",{className:"py-3 px-4 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:I.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("input",{type:"checkbox",checked:C.includes(t.id),onChange:()=>ye(t.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-sm font-bold text-white",children:[t.firstName[0],t.lastName[0]]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[t.firstName," ",t.lastName]}),t.userId&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",title:`Has user account${t.userRole?` (${t.userRole})`:""}`,children:[e.jsx(J,{className:"w-3 h-3"}),t.userRole||"User"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx(Ue,{className:"w-3 h-3 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.email})]})]})]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.position}),e.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx(Re,{className:"w-3 h-3 text-gray-400"}),e.jsx("p",{className:"text-xs text-gray-500",children:t.phone})]})]}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium",children:[e.jsx(_e,{className:"w-3 h-3"}),t.department]})}),e.jsx("td",{className:"py-4 px-4",children:t.branch?e.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 bg-blue-50 text-blue-700 rounded-full text-xs font-medium",children:[e.jsx(qe,{className:"w-3 h-3"}),t.branch.name]}):e.jsx("span",{className:"text-xs text-gray-400",children:"No branch"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${Ne(t.status)}`,children:[t.status==="active"&&e.jsx(W,{className:"w-3 h-3 mr-1"}),t.status==="on-leave"&&e.jsx(ae,{className:"w-3 h-3 mr-1"}),t.status==="inactive"&&e.jsx(ze,{className:"w-3 h-3 mr-1"}),t.status.replace("-"," ")]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:`w-4 h-4 ${V(t.performance||0)}`,fill:"currentColor"}),e.jsx("span",{className:`text-sm font-semibold ${V(t.performance||0)}`,children:(t.performance||0).toFixed(1)}),e.jsx("span",{className:"text-xs text-gray-400",children:"/5.0"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex-1 min-w-[60px]",children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsxs("span",{className:"text-xs font-medium text-gray-900",children:[t.attendance||0,"%"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:e.jsx("div",{className:`h-1.5 rounded-full ${(t.attendance||0)>=90?"bg-green-500":(t.attendance||0)>=75?"bg-blue-500":(t.attendance||0)>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${t.attendance||0}%`}})})]})})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>be(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ge(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(oe,{className:"w-4 h-4"})})]})})]},t.id))})]})}),I.length>0&&e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",e.jsx("span",{className:"font-medium",children:I.length})," of"," ",e.jsx("span",{className:"font-medium",children:a.length})," employees"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"View:"}),e.jsx("button",{onClick:()=>g("list"),className:`p-2 rounded-lg transition-colors ${A==="list"?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:e.jsx(He,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g("grid"),className:`p-2 rounded-lg transition-colors ${A==="grid"?"bg-blue-100 text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:e.jsx(Ge,{className:"w-4 h-4"})})]})]})})]}),I.length>0&&e.jsxs(Q,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Department Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:K.map(t=>{const n=I.filter(v=>v.department===t),x=n.reduce((v,h)=>v+(h.performance||0),0)/n.length,O=n.reduce((v,h)=>v+(h.attendance||0),0)/n.length;return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:t}),e.jsx("span",{className:"text-sm font-medium text-gray-500",children:n.length})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Performance:"}),e.jsxs("span",{className:`font-semibold ${V(x)}`,children:[(x||0).toFixed(1),"/5.0"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Attendance:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[(O||0).toFixed(1),"%"]})]})]})]},t)})})]}),e.jsx(Je,{employee:Y,isOpen:de,onClose:()=>{T(!1),z(void 0)},onSave:pe}),e.jsx(Ye,{isOpen:xe,onClose:()=>Z(!1),onImportComplete:()=>{U(),p.show("Employees imported successfully! You can now edit them to add more details.",{title:"Import Complete",autoCloseDelay:3e3})}}),e.jsx(Xe,{employees:a,isOpen:me,onClose:()=>G(!1),onSave:fe}),e.jsx(Ve,{...p.props})]})};export{ht as default};
