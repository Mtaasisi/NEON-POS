import{u as W,M as A,s as y,j as e}from"./index-61458a34.js";import{r as l}from"./vendor-36d2c7c1.js";import{X as Y,a3 as K,r as O,G as L,y as J,d as F,N as U,Y as V,e as X,U as H,a5 as B,n as w}from"./ui-28e30067.js";const C={technician:{daily:{title:"REPORT YA LEO - TEKNISIANI",customer_interactions:"Leo nimepokea vifaa V vya kutengeneza. Vifaa vilivyokamilika: X. Wateja waliofika kuangalia maendeleo:",pending_work:"Vifaa bado kwenye repair: â€¢ iPhone 15 Pro Max - screen â€¢ Samsung A54 - battery â€¢ Huawei P40 - charging port",recommendations:"Mapendekezo: â€¢ Spare parts zinahitajika: screens x5, batteries x3 â€¢ Mafunzo ya ziada kwenye complex repairs",additional_notes:""},monthly:{title:"REPORT YA MWEZI - TEKNISIANI",customer_interactions:"Katika mwezi huu, nimetengeneza vifaa V jumla. Maelezo ya kazi: â€¢ Screen repairs: X â€¢ Battery replacements: Y â€¢ Software issues: Z",pending_work:"Vifaa bado pending mwishoni mwa mwezi: â€¢ Complex motherboard repairs â€¢ Waiting for spare parts",recommendations:"Mapendekezo ya kuboresha: â€¢ Ongeza inventory ya spare parts â€¢ Training kwenye latest models",additional_notes:""}},"customer-care":{daily:{title:"REPORT YA LEO - HUDUMA KWA WATEJA",customer_interactions:"Leo nimehudumia wateja X. Mauzi yaliyofanyika: TZS Y. Wateja waliofika: â€¢ Walk-ins: A â€¢ Appointments: B â€¢ WhatsApp inquiries: C",pending_work:"Masuala ya wateja yaliyopo pending: â€¢ Device diagnostics pending â€¢ Price quotations needed â€¢ Follow-ups required",recommendations:"Mapendekezo: â€¢ Improve appointment booking system â€¢ Add more customer education materials",additional_notes:""},monthly:{title:"REPORT YA MWEZI - HUDUMA KWA WATEJA",customer_interactions:"Katika mwezi huu, jumla ya wateja X walihudumiwa. Mauzi jumla: TZS Y. Maelezo: â€¢ New customers: A â€¢ Returning customers: B â€¢ Support calls resolved: C",pending_work:"Masuala pending mwishoni mwa mwezi: â€¢ Customer feedback follow-ups â€¢ Warranty claims processing",recommendations:"Mapendekezo ya kuboresha: â€¢ Enhance loyalty program â€¢ Improve customer communication channels",additional_notes:""}},sales:{daily:{title:"REPORT YA LEO - MAUZI",customer_interactions:"Leo nimefanya mauzi ya bidhaa X, jumla TZS Y. Wateja waliohudumiwa: A. Mauzo makubwa: â€¢ iPhone 15 Pro Max â€¢ Samsung accessories",pending_work:"Masuala ya mauzi pending: â€¢ Price negotiations ongoing â€¢ Product demonstrations scheduled â€¢ Customer follow-ups needed",recommendations:"Mapendekezo: â€¢ Focus on high-margin products â€¢ Improve product display â€¢ Add sales training",additional_notes:""},monthly:{title:"REPORT YA MWEZI - MAUZI",customer_interactions:"Katika mwezi huu, mauzi jumla TZS X yamefikiwa. Maelezo: â€¢ Target achieved: Y% â€¢ Top products sold: iPhones, Samsung phones â€¢ Customer conversions: Z%",pending_work:"Mauzo pending: â€¢ Large corporate orders â€¢ Bulk accessory purchases",recommendations:"Mapendekezo ya kuongeza mauzi: â€¢ Marketing campaigns â€¢ Product bundles â€¢ Customer referral program",additional_notes:""}},admin:{daily:{title:"REPORT YA LEO - USIMAMIZI",customer_interactions:"Nimefuatilia shughuli zote za leo. Jumla wateja: X. Mauzi jumla: TZS Y. Vifaa vya repair: Z",pending_work:"Masuala ya usimamizi pending: â€¢ Staff scheduling â€¢ Inventory replenishment â€¢ System maintenance",recommendations:"Mapendekezo: â€¢ Optimize staff allocation â€¢ Improve inventory management â€¢ System performance monitoring",additional_notes:""},monthly:{title:"REPORT YA MWEZI - USIMAMIZI",customer_interactions:"Mfuatilio wa mwezi mzima: â€¢ Jumla wateja: X â€¢ Mauzi jumla: TZS Y â€¢ Profit margin: Z% â€¢ Staff performance ratings",pending_work:"Masuala ya usimamizi pending: â€¢ Monthly financial reports â€¢ Staff performance reviews â€¢ System backups",recommendations:"Mapendekezo ya kuboresha: â€¢ Process automation â€¢ Staff training programs â€¢ Customer satisfaction surveys",additional_notes:""}},manager:{daily:{title:"REPORT YA LEO - USIMAMIZI WA TIMU",customer_interactions:"Nimefuatilia timu ya leo. Jumla shughuli: â€¢ Technicians: X repairs â€¢ Sales: TZS Y revenue â€¢ Customer care: Z interactions",pending_work:"Masuala ya timu pending: â€¢ Staff performance reviews â€¢ Training sessions needed â€¢ Team coordination issues",recommendations:"Mapendekezo: â€¢ Improve team communication â€¢ Staff motivation programs â€¢ Process optimization",additional_notes:""},monthly:{title:"REPORT YA MWEZI - USIMAMIZI WA TIMU",customer_interactions:"Mfuatilio wa timu mwezi mzima: â€¢ Overall performance: Excellent â€¢ Key achievements: Target exceeded by X% â€¢ Team challenges: Staff turnover",pending_work:"Masuala ya timu pending: â€¢ Performance evaluations â€¢ Training budget allocation â€¢ Succession planning",recommendations:"Mapendekezo ya kuboresha timu: â€¢ Professional development programs â€¢ Performance incentives â€¢ Work-life balance initiatives",additional_notes:""}},user:{daily:{title:"REPORT YA LEO - KAZI ZA UFUNZI",customer_interactions:"Leo nimefanya kazi za msingi katika duka. Shughuli zilizofanyika: â€¢ Customer assistance â€¢ Basic device checks â€¢ Inventory organization",pending_work:"Kazi zilizopo pending: â€¢ Learning advanced repair techniques â€¢ Customer service training â€¢ Product knowledge improvement",recommendations:"Mapendekezo: â€¢ More hands-on training â€¢ Mentorship program â€¢ Clear job responsibilities",additional_notes:""},monthly:{title:"REPORT YA MWEZI - KAZI ZA UFUNZI",customer_interactions:"Katika mwezi huu, nimejifunza na kusaidia katika shughuli mbalimbali za duka. Maendeleo: â€¢ Basic skills acquired â€¢ Customer interaction experience",pending_work:"Masuala ya maendeleo pending: â€¢ Advanced training modules â€¢ Certification programs â€¢ Specialized skill development",recommendations:"Mapendekezo ya kuboresha: â€¢ Structured training program â€¢ Performance feedback system â€¢ Career development path",additional_notes:""}}},Q=({isOpen:c,onClose:p,reportType:u="daily",editReport:m,onSuccess:v})=>{const{currentUser:o}=W();l.useState(!1);const[b,z]=l.useState(!1),[s,g]=l.useState({report_type:u,report_date:new Date().toISOString().split("T")[0],title:"",customer_interactions:"",pending_work:"",recommendations:"",additional_notes:"",customers_served:0,sales_made:0,issues_resolved:0,pending_tasks:0,status:"draft"}),[N,E]=l.useState(null),[_,M]=l.useState(null),[j,x]=l.useState([""]),n=(o==null?void 0:o.role)||"technician",S=n==="customer-care"?"customer-care":n;l.useEffect(()=>(c?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[c]);const f=s.customer_interactions.trim().length>0;l.useEffect(()=>{if(!c)return;const a=t=>{(t.ctrlKey||t.metaKey)&&t.key==="s"&&(t.preventDefault(),h(!1)),(t.ctrlKey||t.metaKey)&&t.key==="Enter"&&(t.preventDefault(),f&&h(!0)),t.key==="Escape"&&(t.preventDefault(),p()),(t.ctrlKey||t.metaKey)&&t.shiftKey&&t.key==="P"&&(t.preventDefault(),T())};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[c,f,p]),l.useEffect(()=>{var a;if(c)if(m){const{user:t,...i}=m;g({...i,report_date:m.report_date||new Date().toISOString().split("T")[0]}),x(m.pending_work?m.pending_work.split(`
`).filter(d=>d.trim()):[""])}else{const t=((a=C[S])==null?void 0:a[u])||C.technician[u];g({report_type:u,report_date:new Date().toISOString().split("T")[0],report_month:u==="monthly"?new Date().toISOString().substring(0,7)+"-01":void 0,title:t.title,customer_interactions:t.customer_interactions,pending_work:t.pending_work,recommendations:t.recommendations,additional_notes:t.additional_notes,customers_served:0,sales_made:0,issues_resolved:0,pending_tasks:0,status:"draft"}),x([""])}},[c,u,S,m]);const I=l.useCallback(async()=>{if(!(!s.title&&!s.customer_interactions))try{const a={...s,user_id:o==null?void 0:o.id,branch_id:A(),updated_at:new Date().toISOString()};if(s.id){const{error:t}=await y.from("daily_reports").update(a).eq("id",s.id);if(t)throw t}else{const{data:t,error:i}=await y.from("daily_reports").insert(a).select().single();if(i)throw i;g(d=>({...d,id:t.id}))}M(new Date)}catch(a){console.error("Auto-save failed:",a)}},[s,o==null?void 0:o.id]);l.useEffect(()=>{N&&clearTimeout(N);const a=setTimeout(()=>{I()},3e3);return E(a),()=>{a&&clearTimeout(a)}},[s,I]);const r=(a,t)=>{g(i=>({...i,[a]:t}))},T=()=>{x(a=>[...a,""])},P=a=>{x(t=>t.filter((i,d)=>d!==a))},Z=(a,t)=>{x(i=>i.map((d,k)=>k===a?t:d))},R=()=>j.filter(a=>a.trim()).join(`
â€¢ `),h=async(a=!1)=>{if(!s.customer_interactions.trim()){w.error("Tafadhali jaza sehemu ya mwingiliano na wateja");return}z(!0);try{const t={...s,pending_work:R(),status:a?"submitted":"draft",submitted_at:a?new Date().toISOString():null,updated_at:new Date().toISOString()};if(s.id){const{error:i}=await y.from("daily_reports").update(t).eq("id",s.id);if(i)throw i}else{const{data:i,error:d}=await y.from("daily_reports").insert({...t,user_id:o==null?void 0:o.id,branch_id:A()}).select().single();if(d)throw d;g(k=>({...k,id:i.id}))}a?(w.success("Report imetumwa kikamilifu! ðŸŽ‰"),v==null||v(),p()):(w.success("Report imehifadhiwa kama draft"),M(new Date))}catch(t){console.error("Save error:",t),w.error("Imeshindikana kuhifadhi report")}finally{z(!1)}};if(!c)return null;const D=s.status==="draft";return e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-[99999]",role:"dialog","aria-modal":"true","aria-labelledby":"report-modal-title",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col overflow-hidden relative",children:[e.jsx("button",{onClick:p,className:"absolute top-4 right-4 w-9 h-9 flex items-center justify-center bg-red-500 hover:bg-red-600 text-white rounded-full transition-colors shadow-lg z-50",children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsx("div",{className:"p-8 bg-white border-b border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"grid grid-cols-[auto,1fr] gap-6 items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center shadow-lg",children:e.jsx(K,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{id:"report-modal-title",className:"text-2xl font-bold text-gray-900 mb-3",children:m?"Hariri Report":`Report Mpya ya ${u==="daily"?"Kila Siku":"Mwezi"}`}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx(O,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-bold text-blue-700",children:u==="daily"?new Date(s.report_date).toLocaleDateString("sw-TZ",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):`Mwezi: ${new Date(s.report_month||s.report_date).toLocaleDateString("sw-TZ",{year:"numeric",month:"long"})}`})]}),_&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(L,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-bold text-green-700",children:["Imehifadhi: ",_.toLocaleTimeString("sw-TZ")]})]}),D?e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-orange-50 border border-orange-200 rounded-lg animate-pulse",children:[e.jsx(J,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-bold text-orange-700",children:"Draft - Haijatumwa"})]}):e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(F,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-bold text-green-700",children:"Imetumwa"})]})]})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6",children:[e.jsxs("div",{className:"py-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kichwa cha Report"}),e.jsx("input",{type:"text",value:s.title,onChange:a=>r("title",a.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-gray-900 text-lg font-bold bg-white",placeholder:"Mfano: REPORT YA LEO"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mwingiliano na Wateja *"}),e.jsx("textarea",{value:s.customer_interactions,onChange:a=>r("customer_interactions",a.target.value),rows:6,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200 text-gray-900 bg-white resize-none",placeholder:"Eleza mwingiliano wako na wateja, mauzi yaliyofanyika, matatizo yaliyotatuliwa..."})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Takwimu Muhimu (Hiari)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n==="technician"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Vifaa Vilivyotengenezwa"}),e.jsx("input",{type:"number",min:"0",value:s.issues_resolved,onChange:a=>r("issues_resolved",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Vifaa Bado Pending"}),e.jsx("input",{type:"number",min:"0",value:s.pending_tasks,onChange:a=>r("pending_tasks",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Spare Parts Zilizotumika"}),e.jsx("input",{type:"number",min:"0",value:s.customers_served,onChange:a=>r("customers_served",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Wateja Waliofika"}),e.jsx("input",{type:"number",min:"0",value:s.sales_made,onChange:a=>r("sales_made",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]})]}),(n==="customer-care"||n==="sales")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Wateja Waliohudumiwa"}),e.jsx("input",{type:"number",min:"0",value:s.customers_served,onChange:a=>r("customers_served",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Mauzi Yaliyofanyika"}),e.jsx("input",{type:"number",min:"0",value:s.sales_made,onChange:a=>r("sales_made",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Masuala Yaliyotatuliwa"}),e.jsx("input",{type:"number",min:"0",value:s.issues_resolved,onChange:a=>r("issues_resolved",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Wateja Wapya"}),e.jsx("input",{type:"number",min:"0",value:s.pending_tasks,onChange:a=>r("pending_tasks",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]})]}),(n==="admin"||n==="manager")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Wateja Jumla"}),e.jsx("input",{type:"number",min:"0",value:s.customers_served,onChange:a=>r("customers_served",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Mauzi Jumla (TZS)"}),e.jsx("input",{type:"number",min:"0",value:s.sales_made,onChange:a=>r("sales_made",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Vifaa Vya Repair"}),e.jsx("input",{type:"number",min:"0",value:s.issues_resolved,onChange:a=>r("issues_resolved",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Masuala Pending"}),e.jsx("input",{type:"number",min:"0",value:s.pending_tasks,onChange:a=>r("pending_tasks",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]})]}),n==="user"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Siku za Kazi"}),e.jsx("input",{type:"number",min:"0",max:"31",value:s.customers_served,onChange:a=>r("customers_served",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Mafunzo Yaliyopata"}),e.jsx("input",{type:"number",min:"0",value:s.sales_made,onChange:a=>r("sales_made",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Wateja Waliosaidiwa"}),e.jsx("input",{type:"number",min:"0",value:s.issues_resolved,onChange:a=>r("issues_resolved",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Maswali Yaliyoulizwa"}),e.jsx("input",{type:"number",min:"0",value:s.pending_tasks,onChange:a=>r("pending_tasks",parseInt(a.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-200 text-center font-bold"})]})]})]})]}),e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kazi Zilizopo Pending"}),e.jsxs("button",{type:"button",onClick:T,className:"flex items-center gap-2 px-3 py-1.5 bg-orange-600 hover:bg-orange-700 text-white text-sm rounded-lg transition-colors",children:[e.jsx(U,{className:"w-4 h-4"}),"Ongeza"]})]}),e.jsx("div",{className:"space-y-2",children:j.map((a,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-orange-600 font-bold",children:"â€¢"}),e.jsx("input",{type:"text",value:a,onChange:i=>Z(t,i.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-1 focus:ring-orange-200 text-gray-900",placeholder:"Andika kazi iliyobaki..."}),j.length>1&&e.jsx("button",{type:"button",onClick:()=>P(t),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:e.jsx(V,{className:"w-4 h-4"})})]},t))})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mapendekezo"}),e.jsx("textarea",{value:s.recommendations,onChange:a=>r("recommendations",a.target.value),rows:4,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-200 text-gray-900 bg-white resize-none",placeholder:"Toa mapendekezo yoyote ya kuboresha kazi..."})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maelezo Ya Ziada (Hiari)"}),e.jsx("textarea",{value:s.additional_notes,onChange:a=>r("additional_notes",a.target.value),rows:3,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 text-gray-900 bg-white resize-none",placeholder:"Maelezo yoyote ya ziada..."})]})]}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-white font-bold",children:"ðŸ’¡"})}),e.jsxs("span",{className:"text-sm font-semibold text-green-800",children:[n==="technician"&&"Maelekezo kwa Teknisiani",n==="customer-care"&&"Maelekezo kwa Huduma kwa Wateja",n==="sales"&&"Maelekezo kwa Mauzi",n==="admin"&&"Maelekezo kwa Usimamizi",n==="manager"&&"Maelekezo kwa Usimamizi wa Timu",n==="user"&&"Maelekezo kwa Mfanyakazi Mpya"]})]}),e.jsxs("div",{className:"text-xs text-green-700",children:[n==="technician"&&"Jumuisha: vifaa vilivyotengenezwa, spare parts zilizotumika, changamoto zilizopata, na vifaa bado kwenye repair.",n==="customer-care"&&"Jumuisha: wateja waliohudumiwa, mauzi yaliyofanyika, masuala yaliyotatuliwa, na maoni ya wateja.",n==="sales"&&"Jumuisha: bidhaa zilizouzwa, wateja wapya, lengo lililovutiwa, na fursa za mauzi zaidi.",n==="admin"&&"Jumuisha: muhtasari wa shughuli zote, changamoto za mfumo, na maamuzi muhimu.",n==="manager"&&"Jumuisha: utendaji wa timu, changamoto za wafanyakazi, na mipango ya kuboresha.",n==="user"&&"Jumuisha: kazi ulizofanya, mafunzo uliyopata, changamoto ulizokutana nazo, na maendeleo yako."]})]})}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-white font-bold",children:"âŒ¨"})}),e.jsx("span",{className:"text-sm font-semibold text-blue-800",children:"Keyboard Shortcuts"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-blue-700",children:[e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded border",children:"Ctrl+S"})," Save Draft"]}),e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded border",children:"Ctrl+Enter"})," Submit Report"]}),e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded border",children:"Ctrl+Shift+P"})," Add Pending Item"]}),e.jsxs("div",{children:[e.jsx("kbd",{className:"px-1 py-0.5 bg-white rounded border",children:"Esc"})," Close Modal"]})]})]})}),e.jsxs("div",{className:"p-6 pt-4 border-t border-gray-200 bg-white flex-shrink-0",children:[!f&&e.jsxs("div",{className:"mb-3 p-3 bg-orange-50 border border-orange-200 rounded-lg flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-orange-600 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-semibold text-orange-700",children:"Jaza sehemu ya mwingiliano na wateja ili kutuma report"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:o==null?void 0:o.name}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("span",{className:"capitalize",children:n.replace("-"," ")})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),disabled:b,className:"px-6 py-3 bg-gray-600 text-white rounded-xl font-semibold hover:bg-gray-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:b?"Inahifadhi...":"Hifadhi Draft"}),e.jsx("button",{type:"button",onClick:()=>h(!0),disabled:b||!f,className:"px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg flex items-center gap-2",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Inatuma..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-5 h-5"}),"Tuma Report"]})})]})]})]})]})})};export{Q as D};
