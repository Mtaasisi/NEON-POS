# üîß Automatic Database Fix

This script automatically applies the SQL fix to your Neon database to resolve the 400 errors.

## Quick Start

### 1Ô∏è‚É£ Setup Environment Variables

First, create a `.env` file with your Neon database URL:

```bash
# Copy the template
cp .env.template .env

# Then edit .env and add your Neon database URL
```

Your `.env` file should look like:
```env
VITE_DATABASE_URL=postgresql://username:password@ep-xxxxx.us-east-1.aws.neon.tech/dbname?sslmode=require
```

**Where to find your database URL:**
1. Go to [Neon Console](https://console.neon.tech)
2. Select your project
3. Click "Connection Details"
4. Copy the connection string

### 2Ô∏è‚É£ Run the Fix

```bash
npm run fix-database
```

That's it! The script will:
- ‚úÖ Disable RLS on all POS settings tables
- ‚úÖ Create default settings for your admin user
- ‚úÖ Verify everything worked

### 3Ô∏è‚É£ Refresh Your App

After the script completes:
1. Hard refresh your browser: `Cmd+Shift+R` (Mac) or `Ctrl+Shift+R` (Windows)
2. Login to your app
3. The 400 errors should be gone! üéâ

---

## Alternative: Manual Fix

If you prefer to run the SQL manually, you can use any of these files in the Neon SQL Editor:

- `QUICK-FIX-400.sql` - Simplified fix (recommended)
- `diagnose-and-fix-400.sql` - Full diagnostic + fix
- `FINAL-FIX.sql` - Original comprehensive fix

---

## Troubleshooting

### Error: "Database URL not found"
Make sure you created the `.env` file and added your `VITE_DATABASE_URL`.

### Error: "Permission denied"
Make sure your database user has permission to:
- Alter tables
- Insert data
- Disable RLS policies

### Still getting 400 errors?
1. Check the browser console for specific error messages
2. Run the diagnostic: `diagnose-and-fix-400.sql` in Neon SQL Editor
3. Check that the admin user ID matches: `287ec561-d5f2-4113-840e-e9335b9d3f69`

---

*Created: October 7, 2025*

